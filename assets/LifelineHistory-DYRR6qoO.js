import{u as C}from"./transactionStore-BiWy66FO.js";import{m as A,I as S,v as z,r as m,x as B,s as x,o as D,c as s,b as e,g,u as o,h as u,F as H,d as N,f as y,j as a,D as h,t as l,l as V}from"./index-LZ7Ng8Fw.js";import"./mainStore-ItKn7B0_.js";const M={class:"flex flex-col min-h-screen bg-gray-100"},T={class:"w-full overflow-x-auto rounded-lg shadow-sm"},j={class:"min-w-full divide-y divide-gray-200"},F={class:"bg-white divide-y divide-gray-200"},I={key:0,class:"hover:bg-gray-50"},R={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},U={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},$={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},q={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},E={key:0,class:"py-8 text-center text-gray-500"},Q={key:1,class:"my-4 text-center"},G=["disabled"],J={key:0,class:"flex items-center justify-center"},K={key:1,class:"flex items-center justify-center"},Y={__name:"LifelineHistory",setup(O){A.add(S);const w=V(),v=z(),c=m(1),p=m(!0),n=C(),_=B();x(_);const{lifeline_histories:d}=x(n);D(()=>{f()});const f=async()=>{const r=await n.getLifelineHistories(c.value);r.success?r.pagination?c.value=c.value+1:p.value=!1:v.error("failed to fetch lifeline history")},k=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=()=>{w.back()};return(r,t)=>(a(),s("div",M,[e("div",{onClick:t[0]||(t[0]=i=>b()),class:"bg-orange-500 text-white p-3 flex items-center"},[g(o(h),{icon:"arrow-left",class:"mr-2"}),t[1]||(t[1]=e("span",{class:"font-medium"},"Lifeline History",-1))]),e("div",T,[e("table",j,[t[3]||(t[3]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Lifeline Name"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quiz Applied"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Used At")])],-1)),e("tbody",F,[o(n).loading?(a(),s("tr",I,t[2]||(t[2]=[e("td",{colspan:"4",class:"px-4 py-8 text-center"},[e("div",{class:"flex justify-center items-center space-x-2"},[e("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-sm text-gray-600"},"Loading transactions...")])],-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1)]))):u("",!0),(a(!0),s(H,null,N(o(d),(i,L)=>(a(),s("tr",{key:o(d).id,class:"hover:bg-gray-50"},[e("td",R,l(L+1),1),e("td",U,l(i.lifeline_name),1),e("td",$,l(i.applied_quiz_name||""),1),e("td",q,l(k(i.used_at)),1)]))),128))])]),o(d).length===0?(a(),s("div",E," No lifeline history available. ")):u("",!0),p.value?(a(),s("div",Q,[e("button",{onClick:f,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:o(n).loading},[o(n).loading?(a(),s("span",J,t[4]||(t[4]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Loading... ")]))):(a(),s("span",K,[t[5]||(t[5]=y(" Load More ")),g(o(h),{icon:"chevron-down",class:"ml-2"})]))],8,G)])):u("",!0)])]))}};export{Y as default};
