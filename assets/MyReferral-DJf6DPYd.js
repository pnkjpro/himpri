import{m as j,I as $,N as D,O as I,P as E,Q as F,T,U as A,v as B,x as V,s as y,r as _,o as P,c as r,b as e,g as c,u as s,t as n,F as L,d as N,j as a,D as x,l as J}from"./index-POsu4t_Q.js";import{u as W}from"./mainStore-BMfi6C0O.js";const Y={class:"flex flex-col min-h-screen bg-gray-100"},H={class:"flex-1 p-4"},O={class:"bg-white rounded-lg shadow-md p-5 mb-4"},Q={class:"text-center mb-6"},q={class:"bg-gray-100 rounded-lg p-4 mb-4 flex items-center justify-between"},z={class:"font-bold text-lg text-gray-800"},G={class:"bg-white rounded-lg shadow-md p-5 mb-4"},K={class:"flex justify-between"},X={class:"text-center p-3 flex-1"},Z={class:"text-xl font-bold text-gray-800"},ee={class:"text-center p-3 flex-1 border-x border-gray-200"},te={class:"text-xl font-bold text-green-600"},se={class:"text-center p-3 flex-1"},oe={class:"text-xl font-bold text-orange-500"},ne={class:"bg-white rounded-lg shadow-md p-5 mb-4"},re={class:"flex justify-between items-center mb-4"},ae={class:"flex items-center text-sm"},de={class:"text-green-600 font-medium"},le={class:"text-orange-500 font-medium"},ie={class:"text-gray-700 font-medium"},ce={key:0,class:"flex justify-center items-center py-8"},xe={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},fe={class:"block sm:inline"},me={key:2,class:"text-center py-8"},pe={key:3,class:"overflow-hidden"},ge={class:"flex items-center py-3"},ue={class:"flex-1"},be={class:"font-medium text-gray-800"},ye={class:"text-xs text-gray-500"},_e={class:"ml-2"},he={key:0,class:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full"},ve={key:1,class:"bg-orange-100 text-orange-700 text-xs px-2 py-1 rounded-full"},Ce={__name:"MyReferral",setup(we){j.add($,D,I,E,F,T,A);const h=J(),f=B(),v=V(),m=W(),{user:i}=y(v),{referredUsers:u,referredMetaData:d}=y(m),b=_(null),p=_(1),w=()=>{h.back()},k=()=>{navigator.clipboard.writeText(i.value.refer_code).then(()=>{f.success("Referral code copied to clipboard!")}).catch(()=>{f.error("Failed to copy referral code")})},g=`Hey! Use my referral code ${i.value.refer_code} to sign up!
 follow this link to join now https://www.himpri.com/auth/register?refer_code=${i.value.refer_code}`,R=()=>{const o=encodeURIComponent(g);window.open(`https://wa.me/?text=${o}`,"_blank")},C=()=>{const o=encodeURIComponent(g);window.open(`sms:?body=${o}`,"_blank")},S=()=>{const o=encodeURIComponent("Join using my referral code"),t=encodeURIComponent(g);window.open(`mailto:?subject=${o}&body=${t}`,"_blank")},U=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),M=async()=>{const o=await m.fetchReferredUsers(p.value);o.success?p.value=p.value+1:f.error(o.message)};return P(()=>{M()}),(o,t)=>(a(),r("div",Y,[e("div",{onClick:t[0]||(t[0]=l=>w()),class:"bg-orange-500 text-white p-3 flex items-center"},[c(s(x),{icon:"arrow-left",class:"mr-2"}),t[1]||(t[1]=e("span",{class:"font-medium"},"My Refer Code",-1))]),e("div",H,[e("div",O,[e("div",Q,[c(s(x),{icon:"coins",class:"text-orange-500 text-4xl mb-3"}),t[2]||(t[2]=e("h2",{class:"text-xl font-bold text-gray-800"},"Share Your Referral Code",-1)),t[3]||(t[3]=e("p",{class:"text-gray-600 mt-2"},"Invite friends and earn rewards!",-1))]),e("div",q,[e("span",z,n(s(i).refer_code),1),e("button",{onClick:k,class:"bg-orange-500 hover:bg-orange-600 text-white px-3 py-2 rounded text-sm"}," Copy ")]),e("div",{class:"mb-6"},[t[4]||(t[4]=e("p",{class:"text-gray-700 font-medium mb-3"},"Share via:",-1)),e("div",{class:"flex space-x-3"},[e("button",{onClick:R,class:"bg-green-500 text-white p-3 rounded-full flex-1 font-medium"}," WhatsApp "),e("button",{onClick:C,class:"bg-blue-500 text-white p-3 rounded-full flex-1 font-medium"}," SMS "),e("button",{onClick:S,class:"bg-red-500 text-white p-3 rounded-full flex-1 font-medium"}," Email ")])])]),e("div",G,[e("div",K,[e("div",X,[t[5]||(t[5]=e("p",{class:"text-gray-600 text-sm"},"Total Referred",-1)),e("p",Z,n(s(d).totalReferred),1)]),e("div",ee,[t[6]||(t[6]=e("p",{class:"text-gray-600 text-sm"},"Rewards Earned",-1)),e("p",te,"â‚¹ "+n(s(d).referEarned),1)]),e("div",se,[t[7]||(t[7]=e("p",{class:"text-gray-600 text-sm"},"Pending Claims",-1)),e("p",oe,n(s(d).pendingRewards),1)])])]),e("div",ne,[e("div",re,[t[11]||(t[11]=e("h3",{class:"font-bold text-lg text-gray-800"},"My Referred Users",-1)),e("div",ae,[t[8]||(t[8]=e("span",{class:"text-gray-500 mr-2"},"Showing:",-1)),e("span",de,n(s(d).claimedRewards),1),t[9]||(t[9]=e("span",{class:"text-gray-500 mx-1"},"/",-1)),e("span",le,n(s(d).pendingRewards),1),t[10]||(t[10]=e("span",{class:"text-gray-500 mx-1"},"/",-1)),e("span",ie,n(s(d).totalReferred),1)])]),s(m).loading?(a(),r("div",ce,[c(s(x),{icon:"spinner",spin:"",class:"text-orange-500 text-2xl"})])):b.value?(a(),r("div",xe,[t[12]||(t[12]=e("strong",{class:"font-bold"},"Error!",-1)),e("span",fe,n(b.value),1)])):s(u).length===0?(a(),r("div",me,[c(s(x),{icon:"user-friends",class:"text-gray-400 text-4xl mb-3"}),t[13]||(t[13]=e("p",{class:"text-gray-600"},"You haven't referred any users yet.",-1))])):(a(),r("div",pe,[(a(!0),r(L,null,N(s(u),l=>(a(),r("div",{key:l.id,class:"border-b border-gray-100 last:border-b-0"},[e("div",ge,[e("div",ue,[e("h3",be,n(l.name),1),e("p",ye,"Joined "+n(U(l.created_at)),1)]),e("div",_e,[l.is_reward_given?(a(),r("span",he," Claimed ")):(a(),r("span",ve," Pending "))])])]))),128))]))])])]))}};export{Ce as default};
