import{D as E,r as o,s as _,a as x,E as c}from"./index-D2_x7L79.js";import{u as S}from"./mainStore-BScmQdNT.js";const N=E("transaction",()=>{const r=o(!1),i=o([]),u=o([]),l=o([]),d=o(null),g=o(""),f=S(),{contest:m}=_(f),v=x();async function p(a){var t,n;try{if(r.value=!0,!a||isNaN(a)||a<=0)throw new Error("Invalid amount. Please enter a valid positive number.");const e=await c.post("/funds/transaction",{action:"deposit",amount:a});return r.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return r.value=!1,console.error("Error Adding Fund:",e),{success:!1,message:((n=(t=e.response)==null?void 0:t.data)==null?void 0:n.message)||"An unexpected error occurred"}}}async function h(a){var t,n;try{if(r.value=!0,!a||isNaN(a)||a<=0)throw new Error("Invalid amount. Please enter a valid positive number.");const e=await c.post("/funds/transaction",{action:"withdraw",amount:a});return r.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return r.value=!1,console.error("Error Withdrawing Fund:",e),{success:!1,message:((n=(t=e.response)==null?void 0:t.data)==null?void 0:n.message)||"An unexpected error occurred"}}}async function w(a){var t,n;try{r.value=!0;const e=await c.post("/play/quiz/join",{node_id:m.value.node_id,variant_id:a});return v.fetchUser(),r.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return r.value=!1,console.error("Error Joining Game:",e),{success:!1,message:((n=(t=e.response)==null?void 0:t.data)==null?void 0:n.message)||"An unexpected error occurred"}}}async function y(a=1){var t,n;try{r.value=!0;const e={page:a},s=await c.get("/funds/transaction/list",{params:e});return a===1?i.value=s.data.data.transactions:i.value=[...i.value,...s.data.data.transactions],r.value=!1,{success:s.data.success,message:s.data.message,pagination:s.data.data.totalCount>i.value.length}}catch(e){return r.value=!1,console.error("Error getting transactions:",e),{success:!1,message:((n=(t=e.response)==null?void 0:t.data)==null?void 0:n.message)||"An unexpected error occurred"}}}async function M(a=1){var t,n;try{const e={page:a};r.value=!0;const s=await c.get("/lifeline/transaction/list",{params:e});return a===1?u.value=s.data.data.lifeline_transactions:u.value=[...u.value,...s.data.data.lifeline_transactions],r.value=!1,{success:s.data.success,message:s.data.message,pagination:s.data.data.totalCount>u.value.length}}catch(e){return r.value=!1,console.error("Error Joining Game:",e),{success:!1,message:((n=(t=e.response)==null?void 0:t.data)==null?void 0:n.message)||"An unexpected error occurred"}}}async function A(a=1){var t,n;try{r.value=!0;const e={page:a},s=await c.get("/lifeline/history/list",{params:e});return a===1?l.value=s.data.data.lifeline_histories:l.value=[...l.value,...s.data.data.lifeline_histories],r.value=!1,{success:s.data.success,message:s.data.message,pagination:s.data.data.totalCount>l.value.length}}catch(e){return r.value=!1,console.error("Error Joining Game:",e),{success:!1,message:((n=(t=e.response)==null?void 0:t.data)==null?void 0:n.message)||"An unexpected error occurred"}}}return{getTransactions:y,getLifelineTransactions:M,getLifelineHistories:A,withdrawFunds:h,addFunds:p,joinGame:w,fundAction:g,loading:r,error:d,transactions:i,lifeline_transactions:u,lifeline_histories:l}});export{N as u};
