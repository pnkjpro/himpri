import{H as h,r as n,m as z,u as q,s as w,I as c}from"./index-Bjie691a.js";import{u as Q}from"./mainStore-Bf8H3LFE.js";const b=h("playQuiz",()=>{const s=n(!1),i=n(null),f=z(),v=q(),d=n([]),u=n({}),p=n({userPoints:{score:0},totalParticipants:0,topPlayers:[]}),m=Q(),{contest:g,variant:y}=w(m);async function M(){var t,a;try{s.value=!0;const e=await c.post("/play",{node_id:g.value.node_id,variant_id:y.value.id});return console.log(e.data.data),e.data.success&&(u.value={...e.data.data}),s.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return s.value=!1,console.error("Error Responses:",e),{success:!1,message:((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"An unexpected error occurred"}}}async function _(t){var a,e,r,l;try{s.value=!0,i.value=null;const o=await c.post("/play/next",{node_id:g.value.node_id,question_id:u.value.id,answer_id:t});return(a=o.data.data)!=null&&a.flag&&((e=o.data.data)==null?void 0:e.is_nextQuestion)===!1?(v.success(o.data.data.message),f.push("/quiz/play/finished")):u.value={...o.data.data},s.value=!1,{success:o.data.success,message:o.data.message}}catch(o){return s.value=!1,console.error("Error Responses:",o),{success:!1,message:((l=(r=o.response)==null?void 0:r.data)==null?void 0:l.message)||"An unexpected error occurred"}}}async function x(){var t,a;try{s.value=!0;const e=await c.get("/quiz/responses/list");return d.value=e.data.data,console.log("pinia: ",d.value),s.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return s.value=!1,console.error("Error Responses:",e),{success:!1,message:((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"An unexpected error occurred"}}}async function R(t){var a,e;try{s.value=!0;const r=await c.post("/quiz/leaderboard",{node_id:t});return p.value={...r.data.data},s.value=!1,{success:r.data.success,message:r.data.message}}catch(r){return s.value=!1,console.error("Error Responses:",r),{success:!1,message:((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"An unexpected error occurred"}}}return{playQuiz:M,nextQuestion:_,getUserResponses:x,getLeaderboard:R,leaderboard:p,responses:d,question:u,loading:s,error:i}});export{b as u};
