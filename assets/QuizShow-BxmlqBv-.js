import{u as j}from"./adminStore-Do2t5uNq.js";import{s as B,r as _,B as w,c as l,i,b as t,t as o,F as x,d as p,k,p as g,o as d,n as m,q as L,m as T}from"./index-CP6W9PjL.js";import{u as f}from"./helperStore-CIV52iB1.js";import"./en-US-ClfMaaVW.js";import"./differenceInCalendarDays-Kyai2brU.js";import"./normalizeDates-D28e74vf.js";const M={class:"container mx-auto px-4 py-8"},P={key:0,class:"flex justify-center items-center h-64"},U={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},I={key:2},R={class:"bg-white shadow rounded-lg p-6 mb-6"},$={class:"flex flex-col md:flex-row justify-between items-start md:items-center"},N={class:"text-2xl font-bold text-gray-800"},E={class:"text-gray-600 mt-1"},F={class:"mt-4 md:mt-0"},O={class:"bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full"},V={class:"bg-blue-100 text-blue-800 text-sm font-medium ml-2 px-3 py-1 rounded-full"},H={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},W={class:"bg-white shadow rounded-lg p-6"},G={class:"grid grid-cols-2 gap-4"},J={class:"text-gray-900"},K={class:"text-gray-900"},X={class:"text-gray-900"},Y={class:"text-gray-900"},Z={class:"text-gray-900"},tt={class:"text-gray-900"},et={class:"bg-white shadow rounded-lg p-6"},st={class:"space-y-3"},ot={class:"text-gray-900"},nt={class:"text-gray-900"},it={class:"text-gray-900"},rt={class:"text-gray-900"},lt={class:"bg-white shadow rounded-lg p-6"},dt={class:"space-y-3"},at={class:"text-gray-900"},ut={class:"text-gray-900"},ct={class:"text-gray-900"},mt={class:"bg-white shadow rounded-lg p-6 mb-6"},xt={class:"flex justify-between items-start"},pt={class:"text-lg font-medium"},gt={class:"bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded"},_t={class:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},ft={class:"flex items-center"},yt={key:0,class:"ml-2 text-xs text-green-600 font-medium"},vt={class:"bg-white shadow rounded-lg p-6"},bt={class:"overflow-x-auto"},ht={class:"min-w-full divide-y divide-gray-200"},wt={class:"bg-white divide-y divide-gray-200"},kt={class:"px-6 py-4 whitespace-nowrap"},zt={class:"text-sm font-medium text-gray-900"},Qt={class:"text-sm text-gray-500"},Ct={class:"px-6 py-4 whitespace-nowrap"},qt={class:"px-6 py-4 whitespace-nowrap"},At={class:"text-sm text-gray-900"},Dt={key:0,class:"text-xs text-gray-500"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},jt={key:0},Bt={key:1},Lt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},Tt={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto"},Mt={class:"p-6 border-b"},Pt={class:"flex justify-between items-center"},Ut={class:"text-xl font-semibold text-gray-900"},It={class:"p-6"},Rt={class:"mb-4"},$t={class:"mb-4"},Nt={key:0,class:"space-y-4"},Et={class:"flex items-start justify-between"},Ft={class:"font-medium"},Ot={class:"mt-2"},Vt={key:0,class:"mt-1 text-red-600"},Ht={key:0,class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},Wt={key:1,class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},Gt={key:1,class:"text-center p-6 text-gray-500"},se={__name:"QuizShow",setup(Jt){const y=j(),{usersByquiz:n}=B(y);_(!0);const v=_(null);L();const z=T(),c=_(null),Q=w(()=>{var r;return((r=n.value.user_responses)==null?void 0:r.filter(e=>e.status==="completed").length)||0});w(()=>{if(!n.value.user_responses||n.value.user_responses.length===0)return 0;const r=n.value.user_responses.filter(s=>s.status==="completed");return r.length===0?0:r.reduce((s,a)=>s+a.score,0)/r.length});function b(r,e){if(!r||!e||r===0||e===0)return"--";const s=e-r,a=Math.floor(s/60),u=s%60;return`${a}m ${u}s`}function C(r){if(!r||r===0)return"--";const e=Math.floor(r/60),s=r%60;return`${e}m ${s}s`}function h(r,e){return e?Math.round(r/e*100):0}function q(r){const e=n.value.quizContents.find(s=>s.id===r);return e?e.question:"Unknown question"}function A(r,e){const s=n.value.quizContents.find(u=>u.id===r);if(!s)return"Unknown option";const a=s.options.find(u=>u.id===e);return a?a.option:"Unknown option"}function D(r){const e=n.value.quizContents.find(a=>a.id===r);if(!e)return"Unknown";const s=e.options.find(a=>a.id===e.correctAnswerId);return s?s.option:"Unknown"}const S=()=>{z.back()};return(r,e)=>(d(),l("div",M,[i(y).loading?(d(),l("div",P,e[2]||(e[2]=[t("div",{class:"text-center"},[t("div",{class:"spinner-border text-primary mb-3",role:"status"}),t("p",null,"Loading quiz data...")],-1)]))):v.value?(d(),l("div",U,[t("p",null,o(v.value),1)])):(d(),l("div",I,[t("header",R,[t("button",{onClick:e[0]||(e[0]=s=>S()),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 mb-4 py-2 rounded-md flex items-center"},e[3]||(e[3]=[t("span",{class:"mr-2"},"Back To Quiz List",-1)])),t("div",$,[t("div",null,[t("h1",N,o(i(n).title),1),t("p",E,o(i(n).description),1)]),t("div",F,[t("span",O,o(i(n).is_active==1?"Active":"Inactive"),1),t("span",V," Node ID: "+o(i(n).node_id),1)])])]),t("div",H,[t("div",W,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quiz Information",-1)),t("div",G,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-500"},"Entry Fee",-1)),t("p",J,"₹"+o(i(n).entry_fees),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-500"},"Prize Money",-1)),t("p",K,"₹"+o(i(n).prize_money),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-500"},"Questions",-1)),t("p",X,o(i(n).totalQuestion),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-500"},"Time Per Question",-1)),t("p",Y,o(i(n).quiz_timer)+" seconds",1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-500"},"Participant Limit",-1)),t("p",Z,o(i(n).spot_limit),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-500"},"Winners",-1)),t("p",tt,o(i(n).winners),1)])])]),t("div",et,[e[15]||(e[15]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quiz Timing",-1)),t("div",st,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-500"},"Start Time",-1)),t("p",ot,o(i(f)().formatDate(i(n).start_time)),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-500"},"End Time",-1)),t("p",nt,o(i(f)().formatDate(i(n).end_time)),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-500"},"Quiz Over At",-1)),t("p",it,o(i(f)().formatDate(i(n).quiz_over_at)),1)]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-500"},"Duration",-1)),t("p",rt,o(C(i(n).totalQuestion*i(n).quiz_timer)),1)])])]),t("div",lt,[e[19]||(e[19]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quiz Statistics",-1)),t("div",dt,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Participants",-1)),t("p",at,o(i(n).user_responses.length),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm font-medium text-gray-500"},"Completed Attempts",-1)),t("p",ut,o(Q.value),1)]),t("div",null,[e[18]||(e[18]=t("p",{class:"text-sm font-medium text-gray-500"},"Prize Distribution",-1)),t("p",ct,o(i(n).is_prize_distributed==1?"Completed":"Pending"),1)])])])]),t("div",mt,[e[20]||(e[20]=t("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Quiz Questions",-1)),(d(!0),l(x,null,p(i(n).quizContents,(s,a)=>(d(),l("div",{key:a,class:"mb-6 p-4 border rounded-lg"},[t("div",xt,[t("h3",pt,o(a+1)+". "+o(s.question),1),t("span",gt," ID: "+o(s.id),1)]),t("div",_t,[(d(!0),l(x,null,p(s.options,u=>(d(),l("div",{key:u.id,class:m(["p-2 rounded border",u.id===s.correctAnswerId?"bg-green-50 border-green-200":""])},[t("div",ft,[t("span",{class:m(["h-5 w-5 flex items-center justify-center rounded-full border mr-2",u.id===s.correctAnswerId?"bg-green-500 text-white border-green-500":""])},o(u.id),3),t("span",null,o(u.option),1),u.id===s.correctAnswerId?(d(),l("span",yt," (Correct Answer) ")):g("",!0)])],2))),128))])]))),128))]),t("div",vt,[e[22]||(e[22]=t("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Participant Results",-1)),t("div",bt,[t("table",ht,[e[21]||(e[21]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Score "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Duration ")])],-1)),t("tbody",wt,[(d(!0),l(x,null,p(i(n).user_responses,(s,a)=>(d(),l("tr",{key:a},[t("td",kt,[t("div",null,[t("div",zt,o(s.user.name),1),t("div",Qt,o(s.user.email),1)])]),t("td",Ct,[t("span",{class:m(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.status==="completed","bg-yellow-100 text-yellow-800":s.status==="joined"}])},o(s.status),3)]),t("td",qt,[t("div",At,o(s.score)+" / "+o(i(n).totalQuestion),1),s.status==="completed"?(d(),l("div",Dt,o(h(s.score,i(n).totalQuestion))+"% ",1)):g("",!0)]),t("td",St,[s.started_at>0?(d(),l("div",jt,o(b(s.started_at,s.ended_at)),1)):(d(),l("div",Bt,"--"))])]))),128))])])])]),c.value?(d(),l("div",Lt,[t("div",Tt,[t("div",Mt,[t("div",Pt,[t("h3",Ut,o(c.value.user.name)+"'s Responses ",1),t("button",{onClick:e[1]||(e[1]=s=>c.value=null),class:"text-gray-400 hover:text-gray-500"},e[23]||(e[23]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),t("div",It,[t("div",Rt,[e[24]||(e[24]=t("span",{class:"font-medium"},"Score:",-1)),k(" "+o(c.value.score)+" / "+o(i(n).totalQuestion)+" ("+o(h(c.value.score,i(n).totalQuestion))+"%) ",1)]),t("div",$t,[e[25]||(e[25]=t("span",{class:"font-medium"},"Time Taken:",-1)),k(" "+o(b(c.value.started_at,c.value.ended_at)),1)]),c.value.responseContents?(d(),l("div",Nt,[(d(!0),l(x,null,p(c.value.responseContents,(s,a)=>(d(),l("div",{key:a,class:m(["p-4 border rounded-lg",{"bg-green-50":s.is_correct,"bg-red-50":!s.is_correct}])},[t("div",Et,[t("div",null,[t("h4",Ft," Question "+o(s.question_id)+": "+o(q(s.question_id)),1),t("p",Ot," Selected Answer: "+o(A(s.question_id,s.answer_id)),1),s.is_correct?g("",!0):(d(),l("p",Vt," Correct Answer: "+o(D(s.question_id)),1))]),t("span",{class:m(["inline-flex items-center justify-center h-8 w-8 rounded-full",{"bg-green-100 text-green-800":s.is_correct,"bg-red-100 text-red-800":!s.is_correct}])},[s.is_correct?(d(),l("svg",Ht,e[26]||(e[26]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(d(),l("svg",Wt,e[27]||(e[27]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])))],2)])],2))),128))])):(d(),l("div",Gt," No response data available "))])])])):g("",!0)]))]))}};export{se as default};
