import{L as h,r as n,l as z,u as q,s as w,M as u}from"./index-BwFxJ-S-.js";import{u as Q}from"./mainStore-iv2Y7E3s.js";const b=h("playQuiz",()=>{const s=n(!1),i=n(null),f=z(),m=q(),d=n([]),c=n({}),p=n({userPoints:{score:0},totalParticipants:0,topPlayers:[]}),v=Q(),{contest:g,variant:y}=w(v);async function M(){var o,a;try{const e=await u.post("/play",{node_id:g.value.node_id,variant_id:y.value.id});return console.log(e.data.data),e.data.success&&(c.value={...e.data.data}),{success:e.data.success,message:e.data.message}}catch(e){return s.value=!1,console.error("Error Responses:",e),{success:!1,message:((a=(o=e.response)==null?void 0:o.data)==null?void 0:a.message)||"An unexpected error occurred"}}}async function _(o){var a,e,r,l;try{s.value=!0,i.value=null;const t=await u.post("/play/next",{node_id:g.value.node_id,question_id:c.value.id,answer_id:o});return(a=t.data.data)!=null&&a.flag&&((e=t.data.data)==null?void 0:e.is_nextQuestion)===!1?(m.success(t.data.data.message),f.push("/quiz/play/finished")):c.value={...t.data.data},s.value=!1,{success:t.data.success,message:t.data.message}}catch(t){return s.value=!1,console.error("Error Responses:",t),{success:!1,message:((l=(r=t.response)==null?void 0:r.data)==null?void 0:l.message)||"An unexpected error occurred"}}}async function x(){var o,a;try{s.value=!0;const e=await u.get("/quiz/responses/list");return d.value=e.data.data,console.log("pinia: ",d.value),s.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return s.value=!1,console.error("Error Responses:",e),{success:!1,message:((a=(o=e.response)==null?void 0:o.data)==null?void 0:a.message)||"An unexpected error occurred"}}}async function R(o){var a,e;try{s.value=!0;const r=await u.post("/quiz/leaderboard",{node_id:o});return p.value={...r.data.data},s.value=!1,{success:r.data.success,message:r.data.message}}catch(r){return s.value=!1,console.error("Error Responses:",r),{success:!1,message:((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"An unexpected error occurred"}}}return{playQuiz:M,nextQuestion:_,getUserResponses:x,getLeaderboard:R,leaderboard:p,responses:d,question:c,loading:s,error:i}});export{b as u};
