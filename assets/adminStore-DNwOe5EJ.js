import{G as T,r as u,H as n}from"./index-B6sWn_cM.js";const F=T("admin",()=>{const t=u(!1),f=u(null),i=u([]),d=u([]),g=u([]),p=u([]),v=u([]),m=u([]),l=u([]);async function h(r){var s,o;try{t.value=!0;const e=await n.post("/admin/category/create",r);return{success:e.data.success,message:e.data.message}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||"An unexpected error occurred"}}finally{t.value=!1}}async function w(r){var s,o;try{t.value=!0;const e=await n.post("/admin/quiz/create",r);return t.value=!0,{success:e.data.success,message:e.data.message}}catch(e){return t.value=!0,console.error("Error using Lifeline:",e),{success:!1,message:((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||"An unexpected error occurred"}}}async function z(r=1){var s,o;try{t.value=!0;const e={page:r},a=await n.get("/admin/transaction/list/all",{params:e});return r===1?l.value=[...a.data.data.transactions]:l.value=[...l.value,...a.data.data.transactions],console.log(a.data.data.totalCount>l.value.length),{success:a.data.success,message:a.data.message,pagination:a.data.data.totalCount>l.value.length}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||"An unexpected error occurred"}}finally{t.value=!1}}async function M(r,s){var o,e;try{console.log(r),t.value=!0;const a=await n.post("/admin/transaction/approval",{uid:r.user_id,approval_id:r.id,change_approval:s});if(a.data.success){const c={...r,approved_status:s},y=l.value.findIndex(S=>S.id===r.id);y!==-1&&(l.value[y]=c)}return{success:a.data.success,message:a.data.message}}catch(a){return console.error("Error using Lifeline:",a),{success:!1,message:((e=(o=a.response)==null?void 0:o.data)==null?void 0:e.message)||"An unexpected error occurred"}}finally{t.value=!1}}const L=async(r=1)=>{var s,o;t.value=!0,f.value=null;try{const e={page:r},a=await n.get("/admin/list/leaderboards",{params:e});return r===1?i.value=a.data.data.leaderboards:i.value=[...i.value,...a.data.data.leaderboards],{success:a.data.success,message:a.data.message,pagination:a.data.data.totalCount>i.value.length}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||"An unexpected error occurred"}}finally{t.value=!1}},E=async r=>{var s,o;t.value=!0,f.value=null;try{const e=await n.post("/admin/show/leaderboard",r);return m.value=e.data.data,{success:e.data.success,message:e.data.message}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||"An unexpected error occurred"}}finally{t.value=!1}};async function A(r){try{t.value=!0;const s=await n.post("/admin/lifeline/update",r);return{success:s.data.success,message:s.data.message}}catch(s){return console.error("Error updating Lifeline:",s),{success:!1,message:"Error updating Lifeline"}}finally{t.value=!1}}async function x(r){try{t.value=!0;const s=await n.post("/admin/variables/update",r);return{success:s.data.success,message:s.data.message}}catch(s){return console.error("Error updating official notice:",s),{success:!1,message:"Error updating official notice"}}finally{t.value=!1}}const b=()=>{i.value=[],m.value=[],f.value=null},C=async r=>{var s,o;t.value=!0;try{const e=await n.post("/admin/categories/update-order",{categories:r});return t.value=!1,e.data}catch(e){return t.value=!1,console.error("Error updating categories order:",e),{success:!1,message:((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||"Failed to update category order"}}};async function q(r){var s,o;try{t.value=!0,console.log("pinia node id: ",r);const e=await n.get(`/admin/show/quiz/users?node_id=${r}`);return v.value=e.data.data,t.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return t.value=!1,console.error("Error showing users of quiz:",e),{success:!1,message:((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||"An unexpected error occurred"}}}async function _(r){var s,o;try{t.value=!0;const e=await n.get("/admin/show/user/quizzes",{user_id:r});return p.value=e.data.data,t.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return t.value=!1,console.error("Error showing quizzes by user:",e),{success:!1,message:((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||"An unexpected error occurred"}}}async function B(r=1){var s,o;try{t.value=!0;const e={page:r},a=await n.get("/admin/user/list",{params:e});return r===1?d.value=[...a.data.data.users]:d.value=[...d.value,...a.data.data.users],t.value=!1,{success:a.data.success,message:a.data.message,pagination:a.data.data.totalCount>d.value.length}}catch(e){return t.value=!1,console.error("Error showing user list:",e),{success:!1,message:((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||"An unexpected error occurred"}}}async function Q(r=1,s=""){var o,e;try{t.value=!0;const a={page:r};s&&(a.category=s);const c=await n.get("/admin/quiz/list",{params:a});return r===1?g.value=c.data.data.quizzes:g.value=[...g.value,...c.data.data.quizzes],t.value=!1,{success:c.data.success,message:c.data.message,pagination:c.data.data.totalCount>g.value.length}}catch(a){return t.value=!1,console.error("Error showing user list:",a),{success:!1,message:((e=(o=a.response)==null?void 0:o.data)==null?void 0:e.message)||"An unexpected error occurred"}}}return{createCategory:h,createQuiz:w,fetchTransactions:z,statusApproval:M,listAdminLeaderboards:L,showAdminLeaderboard:E,resetLeaderboardState:b,updateLifelineCost:A,updateCategorySorting:C,updateOfficialNotice:x,showUsersByQuiz:q,showQuizzesByUser:_,showUserList:B,showQuizList:Q,quizzesByuser:p,usersByquiz:v,userList:d,quizList:g,allTransactions:l,leaderboards:i,currentLeaderboard:m,loading:t}});export{F as u};
