import{G as A,r as o,s as E,a as x,H as c}from"./index-DGIMCJ6f.js";import{u as S}from"./mainStore-DMhcFrKI.js";const T=A("transaction",()=>{const r=o(!1),i=o([]),u=o([]),l=o([]),d=o(null),g=o(""),f=S(),{contest:m}=E(f),v=x();async function p(a,n){var t,e;try{if(r.value=!0,!a||isNaN(a)||a<=0)throw new Error("Invalid amount. Please enter a valid positive number.");const s=await c.post("/funds/transaction",{action:"deposit",amount:a,transaction_id:n});return r.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return r.value=!1,console.error("Error Adding Fund:",s),{success:!1,message:((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"An unexpected error occurred"}}}async function h(a){var n,t;try{if(r.value=!0,!a||isNaN(a)||a<=0)throw new Error("Invalid amount. Please enter a valid positive number.");const e=await c.post("/funds/transaction",{action:"withdraw",amount:a});return r.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return r.value=!1,console.error("Error Withdrawing Fund:",e),{success:!1,message:((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function w(a){var n,t;try{r.value=!0;const e=await c.post("/play/quiz/join",{node_id:m.value.node_id,variant_id:a});return v.fetchUser(),r.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return r.value=!1,console.error("Error Joining Game:",e),{success:!1,message:((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function y(a=1){var n,t;try{r.value=!0;const e={page:a},s=await c.get("/funds/transaction/list",{params:e});return a===1?i.value=s.data.data.transactions:i.value=[...i.value,...s.data.data.transactions],r.value=!1,{success:s.data.success,message:s.data.message,pagination:s.data.data.totalCount>i.value.length}}catch(e){return r.value=!1,console.error("Error getting transactions:",e),{success:!1,message:((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function M(a=1){var n,t;try{const e={page:a};r.value=!0;const s=await c.get("/lifeline/transaction/list",{params:e});return a===1?u.value=s.data.data.lifeline_transactions:u.value=[...u.value,...s.data.data.lifeline_transactions],r.value=!1,{success:s.data.success,message:s.data.message,pagination:s.data.data.totalCount>u.value.length}}catch(e){return r.value=!1,console.error("Error Joining Game:",e),{success:!1,message:((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function _(a=1){var n,t;try{r.value=!0;const e={page:a},s=await c.get("/lifeline/history/list",{params:e});return a===1?l.value=s.data.data.lifeline_histories:l.value=[...l.value,...s.data.data.lifeline_histories],r.value=!1,{success:s.data.success,message:s.data.message,pagination:s.data.data.totalCount>l.value.length}}catch(e){return r.value=!1,console.error("Error Joining Game:",e),{success:!1,message:((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"An unexpected error occurred"}}}return{getTransactions:y,getLifelineTransactions:M,getLifelineHistories:_,withdrawFunds:h,addFunds:p,joinGame:w,fundAction:g,loading:r,error:d,transactions:i,lifeline_transactions:u,lifeline_histories:l}});export{T as u};
