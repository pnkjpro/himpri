import{u as L}from"./transactionStore-BCYsZjv5.js";import{l as j,F as m}from"./index.es-BLIuorgg.js";import{b as B}from"./index-DHaoE_mB.js";import{u as F,r as f,a as M,s as g,y as R,c as a,b as e,h as y,i as n,p as d,F as V,d as N,k as w,o,t as c,n as h,m as q}from"./index-TC_BJqEW.js";import"./mainStore-yRi8RT7p.js";const I={class:"flex flex-col min-h-screen bg-gray-100"},U={class:"w-full overflow-x-auto rounded-lg shadow-sm"},E={class:"min-w-full divide-y divide-gray-200"},H={class:"bg-white divide-y divide-gray-200"},P={key:0,class:"hover:bg-gray-50"},Q={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},$={class:"px-4 py-4 whitespace-nowrap"},O={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},W={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},G={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},J={class:"px-4 py-4 whitespace-nowrap"},K={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},X={key:0,class:"py-8 text-center text-gray-500"},Y={key:1,class:"my-4 text-center"},Z=["disabled"],ee={key:0,class:"flex items-center justify-center"},te={key:1,class:"flex items-center justify-center"},ie={__name:"MyTransactions",setup(se){j.add(B);const _=q(),v=F(),l=f(1),p=f(!0),i=L(),b=M();g(b);const{transactions:u}=g(i);R(()=>{x()});const x=async()=>{const t=await i.getTransactions(l.value);t.success?t.pagination?l.value=l.value+1:p.value=!1:v.error("failed to fetch transactions")},k=t=>{switch(t){case"pending":return"Pending";case"approved":return"Approved";case"rejected":return"Rejected";default:return t.charAt(0).toUpperCase()+t.slice(1)}},C=t=>{switch(t){case"deposit":case"referred_reward":case"quiz_reward":return"text-green-600 font-medium";case"withdrawal":case"quiz_entry":case"lifeline_purchase":return"text-red-600 font-medium";default:return"text-gray-600 font-medium"}},z=t=>{switch(t){case"deposit":return"Deposit";case"withdrawal":return"Withdrawal";case"referred_reward":return"Referral Reward";case"quiz_reward":return"Quiz Reward";case"quiz_entry":return"Quiz Entry";case"lifeline_purchase":return"Lifeline Purchase";default:return t.charAt(0).toUpperCase()+t.slice(1)}},T=t=>{switch(t){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),S=()=>{_.back()};return(t,s)=>(o(),a("div",I,[e("div",{onClick:s[0]||(s[0]=r=>S()),class:"bg-orange-500 text-white p-3 flex items-center"},[y(n(m),{icon:"arrow-left",class:"mr-2"}),s[1]||(s[1]=e("span",{class:"font-medium"},"Fund Transactions",-1))]),s[6]||(s[6]=e("div",{class:"flex border-b border-gray-200 bg-white"},[e("button",{class:"flex-1 py-3 text-center font-bold"}," Fund Transactions ")],-1)),e("div",U,[e("table",E,[s[3]||(s[3]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transaction Type"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Order ID"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),e("tbody",H,[n(i).loading?(o(),a("tr",P,s[2]||(s[2]=[e("td",{colspan:"4",class:"px-4 py-8 text-center"},[e("div",{class:"flex justify-center items-center space-x-2"},[e("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-sm text-gray-600"},"Loading transactions...")])],-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1)]))):d("",!0),(o(!0),a(V,null,N(n(u),(r,D)=>(o(),a("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",Q,c(D+1),1),e("td",$,[e("span",{class:h(C(r.action))},c(z(r.action)),3)]),e("td",O,c(r.amount),1),e("td",W,c(r.description||""),1),e("td",G,c(r.razorpay_order_id||""),1),e("td",J,[e("span",{class:h(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",T(r.approved_status)])},c(k(r.approved_status)),3)]),e("td",K,c(A(r.created_at)),1)]))),128))])]),n(u).length===0?(o(),a("div",X," No transactions available. ")):d("",!0),p.value?(o(),a("div",Y,[e("button",{onClick:x,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:n(i).loading},[n(i).loading?(o(),a("span",ee,s[4]||(s[4]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),w(" Loading... ")]))):(o(),a("span",te,[s[5]||(s[5]=w(" Load More ")),y(n(m),{icon:"chevron-down",class:"ml-2"})]))],8,Z)])):d("",!0)])]))}};export{ie as default};
