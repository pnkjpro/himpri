import{G as R,r as c,m as z,u as q,s as w,H as l}from"./index-BAF0bM2U.js";import{u as Q}from"./mainStore-DzRnelYl.js";const b=R("playQuiz",()=>{const a=c(!1),i=c(null),f=z(),v=q(),u=c([]),d=c({}),p=c({userPoints:{score:0},totalParticipants:0,topPlayers:[]}),m=Q(),{contest:g,variant:y}=w(m);async function M(){var o,r;try{a.value=!0;const e=await l.post("/play",{node_id:g.value.node_id,variant_id:y.value.id});return console.log(e.data.data),e.data.success&&(d.value={...e.data.data}),a.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return a.value=!1,console.error("Error Responses:",e),{success:!1,message:((r=(o=e.response)==null?void 0:o.data)==null?void 0:r.message)||"An unexpected error occurred"}}}async function _(o){var r,e,s,t;try{a.value=!0,i.value=null;const n=await l.post("/play/next",{node_id:g.value.node_id,question_id:d.value.id,answer_id:o});return(r=n.data.data)!=null&&r.flag&&((e=n.data.data)==null?void 0:e.is_nextQuestion)===!1?(v.success(n.data.data.message),f.push("/quiz/play/finished")):d.value={...n.data.data},a.value=!1,{success:n.data.success,message:n.data.message}}catch(n){return a.value=!1,console.error("Error Responses:",n),{success:!1,message:((t=(s=n.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function x(o=1){var r,e;try{a.value=!0;const s={page:o},t=await l.get("/quiz/responses/list",{params:s});return o===1?u.value=t.data.data.responses:u.value=[...u.value,...t.data.data.responses],a.value=!1,{success:t.data.success,message:t.data.message,pagination:t.data.data.totalCount>u.value.length}}catch(s){return a.value=!1,console.error("Error Responses:",s),{success:!1,message:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"An unexpected error occurred"}}}async function h(o){var r,e;try{a.value=!0;const s=await l.post("/quiz/leaderboard",{node_id:o});return p.value={...s.data.data},a.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return a.value=!1,console.error("Error Responses:",s),{success:!1,message:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"An unexpected error occurred"}}}return{playQuiz:M,nextQuestion:_,getUserResponses:x,getLeaderboard:h,leaderboard:p,responses:u,question:d,loading:a,error:i}});export{b as u};
