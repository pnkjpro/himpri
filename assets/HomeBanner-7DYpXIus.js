import{_ as B,u as w,H as h,r as I,c as u,b as t,f as p,v as k,p as f,z as D,i as b,t as S,w as U,o as c}from"./index-B7xBi81X.js";import{u as E}from"./mainStore-DQohqPse.js";const A={class:"banner-form-container p-4 max-w-2xl mx-auto"},C={class:"form-group"},T={class:"form-group"},F={class:"flex items-center space-x-2"},M={key:0,class:"flex items-center"},V={key:0,class:"mt-2"},j=["src"],q={class:"form-group"},H={class:"form-group"},N=["disabled"],P={__name:"HomeBanner",setup(R){const i=E(),r=w(),s=h({title:"",image:null,banner_id:""}),l=I(null),g=a=>{const e=a.target.files[0];if(e){s.image=e;const n=new FileReader;n.onload=o=>{l.value=o.target.result},n.readAsDataURL(e)}},m=()=>{s.image=null,l.value=null;const a=document.getElementById("bannerImage");a&&(a.value="")},v=()=>{s.title="",s.banner_id="",m()},_=async()=>{const a=new FormData;a.append("title",s.title),a.append("banner_id",s.banner_id),s.image&&a.append("banner_image",s.image);const e=await i.updateBanner(a);if(console.log("error messages: ",e.message),e.success)r.success(e.message),v();else{const n=e.message;typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.values(n).forEach((o,d)=>{o.forEach((x,y)=>{setTimeout(()=>r.error(x),(d+y)*300)})}):Array.isArray(n)?n.forEach((o,d)=>{setTimeout(()=>r.error(o),d*300)}):r.error(n);return}};return(a,e)=>(c(),u("div",A,[e[6]||(e[6]=t("h2",{class:"text-xl font-bold mb-4"},"Update Banner",-1)),t("form",{onSubmit:U(_,["prevent"]),class:"space-y-4"},[t("div",C,[e[2]||(e[2]=t("label",{for:"title",class:"block mb-2 font-medium"},"Banner Title",-1)),p(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=n=>s.title=n),type:"text",class:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter banner title",required:""},null,512),[[k,s.title]])]),t("div",T,[e[3]||(e[3]=t("label",{for:"bannerImage",class:"block mb-2 font-medium"},"Upload Banner Image",-1)),t("div",F,[t("input",{type:"file",id:"bannerImage",onChange:g,accept:"image/*",class:"border rounded p-2 w-full",required:""},null,32),s.image?(c(),u("div",M,[t("button",{onClick:m,type:"button",class:"p-1 text-red-500 hover:text-red-700"}," Clear ")])):f("",!0)]),l.value?(c(),u("div",V,[t("img",{src:l.value,alt:"Banner Preview",class:"h-32 object-cover rounded border"},null,8,j)])):f("",!0)]),t("div",q,[e[5]||(e[5]=t("label",{for:"bannerId",class:"block mb-2 font-medium"},"Banner ID",-1)),p(t("select",{id:"bannerId","onUpdate:modelValue":e[1]||(e[1]=n=>s.banner_id=n),class:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},e[4]||(e[4]=[t("option",{disabled:"",value:""},"Select a banner ID",-1),t("option",{value:"1"},"Banner 1",-1),t("option",{value:"2"},"Banner 2",-1),t("option",{value:"3"},"Banner 3",-1)]),512),[[D,s.banner_id]])]),t("div",H,[t("button",{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-700",disabled:b(i).loading},S(b(i).loading?"Updating...":"Update Banner"),9,N)])],32)]))}},O=B(P,[["__scopeId","data-v-9a86fa7a"]]);export{O as default};
