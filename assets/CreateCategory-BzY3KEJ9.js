import{_ as C,r as F,s as S,u as h,c as w,b as o,f as l,v as r,t as u,i as m,w as x,o as N}from"./index-B7doMWID.js";import{u as A}from"./adminStore-DjdmjCWm.js";import"./index.esm-DCVEIUvX.js";const U={class:"admin-form-container"},B={class:"form-group"},D={class:"form-group"},I={class:"form-group"},T={class:"file-field"},V={class:"file-name"},k={class:"form-group"},E={class:"color-picker"},O={class:"form-group"},j={class:"file-field"},J={class:"file-name"},M={class:"form-actions"},q=["disabled"],R={__name:"CreateCategory",setup(z){const p={name:"",description:"",icon:"",icon_color:"#007bff",banner_image:"",display_order:1},a=F({...p}),f=()=>{Object.assign(a.value,JSON.parse(JSON.stringify(p)))},t=A();S(t);const i=h(),v=n=>{const e=n.target.files[0];e&&(a.value.bannerFile=e,a.value.banner_image=e.name)},g=n=>{const e=n.target.files[0];e&&(a.value.iconFile=e,a.value.icon=e.name)},_=async()=>{const n=new FormData;n.append("name",a.value.name),n.append("description",a.value.description),n.append("icon_color",a.value.icon_color),a.value.iconFile&&n.append("icon",a.value.iconFile),a.value.bannerFile&&n.append("banner_image",a.value.bannerFile);const e=await t.createCategory(n);if(!e.success){const s=e.message;typeof s=="object"&&s!==null&&!Array.isArray(s)?Object.values(s).forEach((c,d)=>{c.forEach((b,y)=>{setTimeout(()=>i.error(b),(d+y)*300)})}):Array.isArray(s)?s.forEach((c,d)=>{setTimeout(()=>i.error(c),d*300)}):i.error(s);return}i.success(e.message),f()};return(n,e)=>(N(),w("div",U,[e[9]||(e[9]=o("h2",{class:"form-title"},"Add New Category",-1)),o("form",{onSubmit:x(_,["prevent"]),class:"category-form"},[o("div",B,[e[4]||(e[4]=o("label",{for:"name"},"Category Name",-1)),l(o("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.name=s),type:"text",class:"form-control",required:""},null,512),[[r,a.value.name]])]),o("div",D,[e[5]||(e[5]=o("label",{for:"description"},"Description",-1)),l(o("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.description=s),class:"form-control",rows:"3"},null,512),[[r,a.value.description]])]),o("div",I,[e[6]||(e[6]=o("label",{for:"icon"},"Icon",-1)),o("div",T,[o("input",{id:"icon",type:"file",onChange:g,class:"file-input",accept:"image/*"},null,32),o("span",V,u(a.value.icon||"No file chosen"),1)])]),o("div",k,[e[7]||(e[7]=o("label",{for:"icon_color"},"Icon Color",-1)),o("div",E,[l(o("input",{id:"icon_color","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.icon_color=s),type:"text",class:"form-control"},null,512),[[r,a.value.icon_color]]),l(o("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.icon_color=s),class:"color-input"},null,512),[[r,a.value.icon_color]])])]),o("div",O,[e[8]||(e[8]=o("label",{for:"banner_image"},"Banner Image",-1)),o("div",j,[o("input",{id:"banner_image",type:"file",onChange:v,class:"file-input",accept:"image/*"},null,32),o("span",J,u(a.value.banner_image||"No file chosen"),1)])]),o("div",M,[o("button",{type:"button",onClick:f,class:"btn-cancel"},"Cancel"),o("button",{type:"submit",class:"btn-save",disabled:m(t).loading},u(m(t).loading?"Saving...":"Save Category"),9,q)])],32)]))}},L=C(R,[["__scopeId","data-v-c6e13f49"]]);export{L as default};
