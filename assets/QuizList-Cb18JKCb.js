import{s as S,u as Q,r as x,B as M,y as T,c as a,b as t,f as B,C as V,F as f,d as h,i as r,k as p,t as o,h as A,p as N,o as n,m as j,x as D}from"./index-DT0ZotzI.js";import{u as H}from"./adminStore-C095Eduv.js";import{u as F}from"./mainStore-BuJvR_cs.js";import{u as _}from"./helperStore-CTBmhPjn.js";import"./en-US-ClfMaaVW.js";import"./differenceInCalendarDays-Kyai2brU.js";import"./normalizeDates-D28e74vf.js";const E={class:"container mx-auto px-4 py-8"},R={class:"bg-white rounded-lg shadow-md p-6"},U={class:"flex justify-between items-center mb-6"},$={class:"flex space-x-3"},P={class:"relative"},W=["value"],G={key:0,class:"flex justify-center items-center py-12"},J={key:1,class:"text-center py-12"},K={key:2},O={class:"overflow-x-auto"},X={class:"min-w-full bg-white"},Y={class:"divide-y divide-gray-200"},Z={class:"py-3 px-4 text-gray-800"},I={class:"py-3 px-4 text-gray-800"},q={class:"py-3 px-4 text-gray-800"},tt={class:"py-3 px-4 text-gray-800"},et={class:"py-3 px-4 text-gray-800"},st={class:"py-3 px-4 text-gray-800"},ot={class:"py-3 px-4 text-gray-800"},at={class:"py-3 px-4 text-gray-800"},nt={class:"py-3 px-4 text-gray-800"},lt={class:"py-3 px-4 text-gray-800"},it={class:"py-3 px-4 text-gray-800"},rt={class:"py-3 px-4 text-gray-800"},dt=["onClick"],ct={class:"mt-6 flex justify-between items-center"},ut={class:"text-sm text-gray-500"},pt={class:"font-medium"},mt={key:0,class:"mt-6 text-center"},xt=["disabled"],yt={key:0,class:"flex items-center justify-center"},gt={key:1,class:"flex items-center justify-center"},Lt={__name:"QuizList",setup(ft){const i=H(),y=F(),{categories:v}=S(y),b=Q(),w=j(),d=x(1),g=x(!0),m=x(""),c=M(()=>i.quizList||[]),u=async()=>{const l=await i.showQuizList(d.value,m.value);l.success?l.pagination?d.value=d.value+1:g.value=!1:b.error("Failed to get quizzes")},k=()=>{d.value=1,u()},C=()=>{u()};T(()=>{u(),y.fetchCategories()});const z=l=>{console.log(l),i.showUsersByQuiz(l),w.push(`/admin/quiz/show/${l}`)};return(l,e)=>{const L=D("font-awesome-icon");return n(),a("div",E,[t("div",R,[t("div",U,[e[3]||(e[3]=t("h1",{class:"text-2xl font-bold text-gray-800"},"Quiz Management",-1)),t("div",$,[t("div",P,[B(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),onChange:k,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},[e[1]||(e[1]=t("option",{value:""},"All Categories",-1)),(n(!0),a(f,null,h(r(v),s=>(n(),a("option",{key:s,value:s.id},o(s.name),9,W))),128))],544),[[V,m.value]])]),t("button",{onClick:C,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md flex items-center"},e[2]||(e[2]=[t("span",{class:"mr-2"},"Refresh",-1),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)]))])]),r(i).loading&&!c.value.length?(n(),a("div",G,e[4]||(e[4]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},null,-1)]))):c.value.length?(n(),a("div",K,[t("div",O,[t("table",X,[e[6]||(e[6]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Node ID"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Title"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Spot Limit"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Entry Fees"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Prize Money"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Start Time"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"End Time"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Category"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Timer"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Winners"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Total Questions"),t("th",{class:"py-3 px-4 text-left text-gray-600 font-medium"},"Action")])],-1)),t("tbody",Y,[(n(!0),a(f,null,h(c.value,s=>(n(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Z,o(s.node_id),1),t("td",I,o(s.title),1),t("td",q,o(s.spot_limit),1),t("td",tt,o(s.entry_fees),1),t("td",et,o(s.prize_money),1),t("td",st,o(r(_)().formatDate(s.start_time)),1),t("td",ot,o(r(_)().formatDate(s.end_time)),1),t("td",at,o(s.category.name),1),t("td",nt,o(s.quiz_timer),1),t("td",lt,o(s.winners),1),t("td",it,o(s.totalQuestion),1),t("td",rt,[t("button",{type:"button",onClick:ht=>z(s.node_id),class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"}," Show Quiz ",8,dt)])]))),128))])])]),t("div",ct,[t("div",ut,[e[7]||(e[7]=p(" Showing ")),t("span",pt,o(c.value.length),1),e[8]||(e[8]=p(" quizzes "))])]),g.value?(n(),a("div",mt,[t("button",{onClick:u,class:"px-8 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-full shadow-lg hover:from-blue-700 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:r(i).loading},[r(i).loading?(n(),a("span",yt,e[9]||(e[9]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),p(" Loading... ")]))):(n(),a("span",gt,[e[10]||(e[10]=p(" Load More ")),A(L,{icon:"chevron-down",class:"ml-2"})]))],8,xt)])):N("",!0)])):(n(),a("div",J,e[5]||(e[5]=[t("p",{class:"text-gray-500"},"No quizzes found",-1)])))])])}}};export{Lt as default};
