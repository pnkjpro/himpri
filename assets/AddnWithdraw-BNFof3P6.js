import{r as i,u as S,a as Q,s as A,y as q,B as W,c as o,b as e,h as U,i as d,n as V,f as b,v,k as h,p as k,t as H,o as l,m as $}from"./index-CoSsLQds.js";import{u as N}from"./transactionStore-DwoWcwxo.js";import{l as Y,F as P}from"./index.es-DBkU3Ad0.js";import{b as L,c as G,d as J,e as K}from"./index-BeD0zzHm.js";import"./mainStore-rpwOANk6.js";const O="/images/QRcode.jpeg",X={class:"flex flex-col min-h-screen bg-gray-100"},Z={class:"flex border-b border-gray-200 bg-white"},ee={key:0,class:"p-4 flex flex-col gap-6"},te={key:0,class:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4"},se={class:"flex items-center"},oe={class:"ml-3"},le={class:"mt-2"},ne={class:"mb-4"},ae=["disabled"],de={key:0,class:"flex items-center justify-center"},ie={key:1},re={key:1,class:"bg-white rounded-lg p-4 shadow-sm"},ue={class:"mb-4"},ce={class:"mb-4"},me={class:"bg-white rounded-lg p-4 shadow-sm flex flex-col items-center"},pe={class:"bg-gray-100 p-3 rounded-lg w-84 h-84 mb-3 flex items-center justify-center relative"},fe={class:"w-full mb-4"},ge={class:"flex w-full"},be=["disabled"],ve={key:0,class:"flex items-center justify-center"},we={key:1},ye={key:1,class:"p-4 flex flex-col gap-4"},xe={class:"bg-white rounded-lg p-4 shadow-sm"},he={class:"text-center mb-2"},ke={class:"text-2xl font-bold text-green-600"},Ie={key:0,class:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4"},Ce={class:"flex items-center"},_e={class:"ml-3"},Ue={class:"mt-2"},Pe={class:"mb-4"},De=["disabled"],Ae={key:0,class:"flex items-center justify-center"},Ve={key:1},ze={key:1,class:"bg-white rounded-lg p-4 shadow-sm"},Re={class:"mb-4"},Fe=["max"],Be={class:"mb-4"},Te={class:"flex items-center gap-2"},Me=["disabled"],je={key:0,class:"flex items-center justify-center"},Ee={key:1},Se=["disabled"],Qe={key:0,class:"flex items-center justify-center"},qe={key:1},Ge={__name:"AddnWithdraw",setup(We){Y.add(L,G,J,K);const m=i("deposit"),z=$(),n=S(),I=i(null),C=i(!1),p=N(),r=Q(),{user:w}=A(r),{fundAction:R}=A(p);q(()=>{R.value==="withdraw"&&(m.value="withdraw")});const f=i(""),y=i(""),u=i(""),g=i(w.value.upi_id||""),c=i(""),x=i(!1),_=W(()=>w.value.funds||0),F=async()=>{if(f.value>0){const s=await p.addFunds(f.value,y.value);s.success?n.success(s.message):n.error(s.message),f.value="",y.value=""}else n.error("Please enter an amount")},B=async()=>{if(u.value>50&&u.value<=_.value){const s=await p.withdrawFunds(u.value);s.success?n.success(s.message):n.error(s.message),u.value=""}else n.error("Please enter a valid amount")},D=async()=>{if(c.value.trim()){const s=await r.updateUpiId(c.value);s.success?(n.success(s.message),g.value=c.value):n.error(s.message),c.value=""}else n.error("Please enter a valid UPI ID")},T=async()=>{if(g.value.trim()){const s=await r.updateUpiId(g.value);s.success?n.success(s.message):n.error(s.message),x.value=!1}else n.error("Please enter a valid UPI ID")},M=()=>{z.back()},j=()=>{if(I.value){const s=document.createElement("a");s.download="payment_qr_code.jpeg",s.href=I.value.src,document.body.appendChild(s),s.click(),document.body.removeChild(s),n.success("QR Code downloaded successfully")}else n.error("Could not download QR Code")},E=()=>{navigator.clipboard.writeText("7985890675@okbizaxis").then(()=>{C.value=!0,n.success("UPI ID copied to clipboard"),setTimeout(()=>{C.value=!1},2e3)}).catch(()=>{n.error("Failed to copy UPI ID")})};return(s,t)=>(l(),o("div",X,[e("div",{onClick:t[0]||(t[0]=a=>M()),class:"bg-orange-500 text-white p-3 flex items-center"},[U(d(P),{icon:"arrow-left",class:"mr-2"}),t[10]||(t[10]=e("span",{class:"font-medium"},"Fund Management",-1))]),e("div",Z,[e("button",{onClick:t[1]||(t[1]=a=>m.value="deposit"),class:V(["flex-1 py-3 text-center font-medium",m.value==="deposit"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Add Fund ",2),e("button",{onClick:t[2]||(t[2]=a=>m.value="withdraw"),class:V(["flex-1 py-3 text-center font-medium",m.value==="withdraw"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Withdraw Fund ",2)]),m.value==="deposit"?(l(),o("div",ee,[d(w).upi_id?(l(),o("div",re,[t[16]||(t[16]=e("div",{class:"text-lg font-medium mb-2"},"Add Funds to Your Account",-1)),e("div",ue,[t[14]||(t[14]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"payment-amount"}," Payment Amount (₹) ",-1)),b(e("input",{type:"number",id:"payment-amount","onUpdate:modelValue":t[4]||(t[4]=a=>f.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter amount"},null,512),[[v,f.value]])]),e("div",ce,[t[15]||(t[15]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"transaction-id"}," Transaction ID: ",-1)),b(e("input",{type:"text",id:"transaction-id","onUpdate:modelValue":t[5]||(t[5]=a=>y.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter transaction id"},null,512),[[v,y.value]])])])):(l(),o("div",te,[e("div",se,[e("div",oe,[t[13]||(t[13]=e("p",{class:"text-yellow-700 font-medium"}," Please add your UPI ID to enable Add funds ",-1)),e("div",le,[e("div",ne,[t[11]||(t[11]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"upi-id"}," UPI ID ",-1)),b(e("input",{type:"text",id:"upi-id","onUpdate:modelValue":t[3]||(t[3]=a=>c.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter your UPI ID"},null,512),[[v,c.value]])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:D,disabled:d(r).loading},[d(r).loading?(l(),o("div",de,t[12]||(t[12]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),h(" Updating UPI ID... ")]))):(l(),o("span",ie,"Update UPI ID"))],8,ae)])])])])),e("div",me,[t[20]||(t[20]=e("div",{class:"font-medium text-center mb-3"},"Scan QR Code to Make Payment",-1)),e("div",pe,[e("img",{ref_key:"qrCodeImg",ref:I,class:"w-3/4",src:O,alt:"QR code"},null,512),e("button",{onClick:j,class:"absolute bottom-3 right-3 bg-white rounded-full p-2 shadow-md",title:"Download QR Code"},[U(d(P),{icon:"download",class:"text-gray-700"})])]),e("div",fe,[t[18]||(t[18]=e("div",{class:"text-sm font-medium text-gray-700 mb-1"},"UPI ID:",-1)),e("div",ge,[t[17]||(t[17]=e("div",{class:"flex-1 bg-gray-100 p-2 rounded-l-md truncate"}," 7985890675@okbizaxis ",-1)),e("button",{onClick:E,class:"bg-blue-500 text-white px-3 rounded-r-md flex items-center justify-center"},[U(d(P),{icon:C.value?"check":"copy",class:"text-white"},null,8,["icon"])])])]),t[21]||(t[21]=e("p",{class:"text-center text-gray-700 text-sm mb-4"}," Scan this QR to make payment and submit done button and your fund will be reflected in your account within 3 hours ",-1)),e("button",{class:"bg-green-500 text-white py-2 px-6 rounded-lg font-medium w-full disabled:bg-gray-400 disabled:cursor-not-allowed",onClick:F,disabled:d(p).loading||!y.value||!f.value},[d(p).loading?(l(),o("div",ve,t[19]||(t[19]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),h(" Requesting Add Funds ")]))):(l(),o("span",we,"Done"))],8,be)])])):k("",!0),m.value==="withdraw"?(l(),o("div",ye,[e("div",xe,[e("div",he,[t[22]||(t[22]=e("div",{class:"text-gray-600 text-sm"},"Your Available Balance",-1)),e("div",ke,"₹ "+H(d(w).funds),1)])]),d(w).upi_id?(l(),o("div",ze,[t[31]||(t[31]=e("div",{class:"text-lg font-medium mb-4"},"Withdraw Funds",-1)),e("div",Re,[t[26]||(t[26]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"withdraw-amount"}," Withdrawal Amount (₹) ",-1)),b(e("input",{type:"number",id:"withdraw-amount","onUpdate:modelValue":t[7]||(t[7]=a=>u.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter amount to withdraw",max:_.value},null,8,Fe),[[v,u.value]]),t[27]||(t[27]=e("span",{style:{"font-size":"13px",color:"darkcyan"}},"Minimum Rs 50 can be withdrawn",-1))]),e("div",Be,[t[29]||(t[29]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"account-number"}," To UPI ID: ",-1)),e("div",Te,[b(e("input",{type:"text",id:"account-number","onUpdate:modelValue":t[8]||(t[8]=a=>g.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:!x.value},null,8,Me),[[v,g.value]]),x.value?k("",!0):(l(),o("button",{key:0,class:"text-blue-500 underline",onClick:t[9]||(t[9]=a=>x.value=!0)}," Edit ")),x.value?(l(),o("button",{key:1,class:"bg-green-500 text-white px-4 py-1 rounded",onClick:T},[d(r).loading?(l(),o("div",je,t[28]||(t[28]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),h(" Saving... ")]))):(l(),o("span",Ee,"Save"))])):k("",!0)])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full disabled:bg-gray-400 disabled:cursor-not-allowed",onClick:B,disabled:u.value<50||u.value>_.value||!g.value||d(p).loading},[d(p).loading?(l(),o("div",Qe,t[30]||(t[30]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),h(" Requesting Withdrawal... ")]))):(l(),o("span",qe,"Request Withdrawal"))],8,Se)])):(l(),o("div",Ie,[e("div",Ce,[e("div",_e,[t[25]||(t[25]=e("p",{class:"text-yellow-700 font-medium"}," Please add your UPI ID to enable withdrawals ",-1)),e("div",Ue,[e("div",Pe,[t[23]||(t[23]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"upi-id"}," UPI ID ",-1)),b(e("input",{type:"text",id:"upi-id","onUpdate:modelValue":t[6]||(t[6]=a=>c.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter your UPI ID"},null,512),[[v,c.value]])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:D,disabled:d(r).loading},[d(r).loading?(l(),o("div",Ae,t[24]||(t[24]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),h(" Updating UPI ID... ")]))):(l(),o("span",Ve,"Update UPI ID"))],8,De)])])])]))])):k("",!0)]))}};export{Ge as default};
