import{G as w,r as t,s as h,a as y,H as n}from"./index-lwxLPvsS.js";import{u as M}from"./mainStore-CL-8IoQC.js";const S=w("transaction",()=>{const o=t(!1),c=t([]);t(null);const i=t(""),d=M(),{contest:l}=h(d),g=y();async function m(r){var a,s;try{if(o.value=!0,!r||isNaN(r)||r<=0)throw new Error("Invalid amount. Please enter a valid positive number.");const e=await n.post("/funds/transaction",{action:"deposit",amount:r});return o.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return o.value=!1,console.error("Error Adding Fund:",e),{success:!1,message:((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function p(r){var a,s;try{if(o.value=!0,!r||isNaN(r)||r<=0)throw new Error("Invalid amount. Please enter a valid positive number.");const e=await n.post("/funds/transaction",{action:"withdraw",amount:r});return o.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return o.value=!1,console.error("Error Withdrawing Fund:",e),{success:!1,message:((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function f(r){var a,s;try{const e=await n.post("/play/quiz/join",{node_id:l.value.node_id,variant_id:r});return g.fetchUser(),o.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return o.value=!1,console.error("Error Joining Game:",e),{success:!1,message:((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function v(){var r,a;try{const s=await n.get("/funds/transaction/list");return c.value=s.data.data,console.log("pinia: ",c.value),o.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return o.value=!1,console.error("Error Joining Game:",s),{success:!1,message:((a=(r=s.response)==null?void 0:r.data)==null?void 0:a.message)||"An unexpected error occurred"}}}return{fundAction:i,addFunds:m,withdrawFunds:p,joinGame:f,getTransactions:v,transactions:c}});export{S as u};
