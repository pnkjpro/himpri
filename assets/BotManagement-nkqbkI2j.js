import{G as U,r as x,m as A,u as E,H as v,s as F,J as S,y as T,c as n,b as e,f,v as _,i as m,F as B,d as q,p as C,t as p,C as V,k as h,o as i}from"./index-zZldDs9Q.js";const $=U("botManagement",()=>{const l=x(!1);A(),E();const g=x([]),c=x([]);return{createBot:async u=>{var d,r;try{l.value=!0;const s=await v.post("/bot/create",u);return l.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return l.value=!1,console.error("Error Responses:",s),{success:!1,message:((r=(d=s.response)==null?void 0:d.data)==null?void 0:r.message)||"An unexpected error occurred"}}},createBotActions:async u=>{var d,r;try{l.value=!0;const s=await v.post("/bot/action/create",u);return l.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return l.value=!1,console.error("Error Responses:",s),{success:!1,message:((r=(d=s.response)==null?void 0:d.data)==null?void 0:r.message)||"An unexpected error occurred"}}},fetchQuizzes:async()=>{var u,d;try{l.value=!0;const r=await v.get("/bot/quizzes");return g.value=r.data.data,l.value=!1,{success:r.data.success,message:r.data.message}}catch(r){return l.value=!1,console.error("Error Responses:",r),{success:!1,message:((d=(u=r.response)==null?void 0:u.data)==null?void 0:d.message)||"An unexpected error occurred"}}},fetchBots:async()=>{var u,d;try{l.value=!0;const r=await v.get("/bot/list");return c.value=r.data.data,l.value=!1,{success:r.data.success,message:r.data.message}}catch(r){return l.value=!1,console.error("Error Responses:",r),{success:!1,message:((d=(u=r.response)==null?void 0:u.data)==null?void 0:d.message)||"An unexpected error occurred"}}},quizzes:g,bots:c,loading:l}}),j={class:"container mx-auto py-12 px-6 max-w-7xl"},L={key:0},G={class:"bg-white rounded-xl shadow-lg p-8"},H={class:"mb-6"},I={class:"flex justify-end"},J=["disabled"],P={key:0},K={key:1},O={class:"mt-10 bg-white rounded-xl shadow-lg p-8"},W={key:0,class:"text-center py-6 text-gray-600"},X={key:1,class:"text-center py-6 text-gray-500"},Y={key:2,class:"overflow-x-auto"},Z={class:"min-w-full divide-y divide-gray-200"},ee={class:"divide-y divide-gray-200"},te={class:"px-6 py-4 text-sm text-gray-900"},se={class:"px-6 py-4 text-sm text-gray-900"},oe={class:"px-6 py-4 text-sm text-gray-900"},re={class:"px-6 py-4 text-sm text-gray-900"},ae={class:"px-6 py-4"},ne=["onClick"],ie={key:1},le={class:"bg-white rounded-xl shadow-lg p-8 max-w-3xl mx-auto"},de={key:0,class:"text-center py-12 text-gray-500 text-lg"},ce={key:1},ue={class:"text-2xl font-bold text-gray-900 mb-6"},ge={class:"mb-6"},me=["value"],pe={class:"mb-6"},xe=["disabled"],fe=["value"],be={key:0,class:"mt-2 text-sm text-gray-500"},ye={class:"mb-6 relative"},ve={class:"mb-8 relative"},_e={class:"mb-6 relative"},he={class:"flex justify-end space-x-4"},ke=["disabled"],we={key:0},ze={key:1},Ce={__name:"BotManagement",setup(l){A();const g=E(),c=$(),{quizzes:k,bots:w}=F(c),b=x("create"),y=x([]),u=x(null),d=x({}),r=S({name:""}),s=S({user_id:"",quiz_id:"",variant_id:"",rank:1,duration:60,question_attempts:5}),z=async()=>{if(!r.name){g.error("Bot name is required");return}const a=await c.createBot({name:r.name});a.success?(g.success(a.message),r.name="",M()):g.error(a.message)},M=async()=>{const a=await c.fetchBots();if(!a.success){g.error(a.message);return}},R=async()=>{const a=await c.fetchQuizzes();if(!a.success){g.error(a.message);return}},D=async a=>{if(!s.quiz_id){y.value=[];return}d.value=await k.value.find(t=>t.id===a),y.value=d.value.quiz_variants},N=a=>{u.value=a,s.user_id=a.id,b.value="actions"},Q=async()=>{const a=await c.createBotActions(s);if(a.success)g.success(a.message),s.quiz_id="",s.variant_id="",s.rank=1,s.duration=60,s.question_attempts=5,y.value=[];else{g.error(a.message);return}};return T(()=>{M(),R()}),(a,t)=>(i(),n("div",j,[b.value==="create"?(i(),n("div",L,[e("div",G,[t[9]||(t[9]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Create New Bot",-1)),e("div",H,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bot Name",-1)),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.name=o),type:"text",class:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Enter bot name"},null,512),[[_,r.name]])]),e("div",I,[e("button",{onClick:z,disabled:m(c).loading,class:"bg-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors disabled:bg-indigo-300 disabled:cursor-not-allowed"},[m(c).loading?(i(),n("span",P,"Creating...")):(i(),n("span",K,"Create Bot"))],8,J)])]),e("div",O,[t[11]||(t[11]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Existing Bots",-1)),m(c).loading?(i(),n("div",W," Loading bots... ")):m(w).length===0?(i(),n("div",X," No bots created yet ")):(i(),n("div",Y,[e("table",Z,[t[10]||(t[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Name"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Email"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Funds"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ee,[(i(!0),n(B,null,q(m(w),o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50 transition-colors"},[e("td",te,p(o.id),1),e("td",se,p(o.name),1),e("td",oe,p(o.email),1),e("td",re,p(o.funds),1),e("td",ae,[e("button",{onClick:Be=>N(o),class:"bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-600 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors"}," Select ",8,ne)])]))),128))])])]))])])):C("",!0),b.value==="actions"?(i(),n("div",ie,[e("div",le,[u.value?(i(),n("div",ce,[e("h2",ue," Define Actions for "+p(u.value.name),1),e("div",ge,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Quiz",-1)),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.quiz_id=o),onChange:t[2]||(t[2]=o=>D(s.quiz_id)),class:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors bg-gray-50"},[t[12]||(t[12]=e("option",{value:""},"Select a quiz",-1)),(i(!0),n(B,null,q(m(k),o=>(i(),n("option",{key:o.id,value:o.id},p(o.title),9,me))),128))],544),[[V,s.quiz_id]])]),e("div",pe,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Variant",-1)),f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.variant_id=o),class:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors bg-gray-50",disabled:!s.quiz_id},[t[14]||(t[14]=e("option",{value:""},"Select a variant",-1)),(i(!0),n(B,null,q(y.value,o=>(i(),n("option",{key:o.id,value:o.id}," Variant Rs "+p(o.entry_fee),9,fe))),128))],8,xe),[[V,s.variant_id]]),s.quiz_id?C("",!0):(i(),n("p",be," Select a quiz to enable variant selection "))]),e("div",ye,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[h(" Rank "),e("span",{class:"inline-block ml-1 text-gray-400 cursor-help",title:"Rank is determined based on score and duration"}," ⓘ ")],-1)),f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.rank=o),type:"number",min:"1",class:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors bg-gray-50",placeholder:"Enter rank"},null,512),[[_,s.rank,void 0,{number:!0}]]),t[17]||(t[17]=e("p",{class:"mt-2 text-sm text-gray-500"}," Rank is calculated using score and duration. ",-1))]),e("div",ve,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[h(" Question Attempts "),e("span",{class:"inline-block ml-1 text-gray-400 cursor-help",title:"Score cannot exceed the total number of questions in the quiz"}," ⓘ ")],-1)),f(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.question_attempts=o),type:"number",min:"1",class:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors bg-gray-50",placeholder:"Enter number of question attempts"},null,512),[[_,s.question_attempts,void 0,{number:!0}]]),t[19]||(t[19]=e("p",{class:"mt-2 text-sm text-gray-500"}," Score cannot be greater than the total questions in the quiz. ",-1))]),e("div",_e,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[h(" Duration (seconds) "),e("span",{class:"inline-block ml-1 text-gray-400 cursor-help",title:"Duration must be at least equal to the total score attempted"}," ⓘ ")],-1)),f(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.duration=o),type:"number",min:"1",class:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors bg-gray-50",placeholder:"Enter duration in seconds"},null,512),[[_,s.duration,void 0,{number:!0}]]),t[21]||(t[21]=e("p",{class:"mt-2 text-sm text-gray-500"}," Duration cannot be less than the total score attempted. ",-1))]),e("div",he,[e("button",{onClick:t[7]||(t[7]=o=>b.value="create"),class:"bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-300 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors"}," Back to Create Bot "),e("button",{onClick:Q,disabled:m(c).loading,class:"bg-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors disabled:bg-indigo-300 disabled:cursor-not-allowed"},[m(c).loading?(i(),n("span",we,t[22]||(t[22]=[e("svg",{class:"animate-spin inline-block w-5 h-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})],-1),h(" Creating... ")]))):(i(),n("span",ze,"Define Bot Actions"))],8,ke)])])):(i(),n("div",de," Please select a bot to define actions "))])])):C("",!0)]))}};export{Ce as default};
