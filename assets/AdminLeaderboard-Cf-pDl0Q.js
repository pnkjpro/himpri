import{u as z}from"./adminStore-CGERiWG5.js";import{_ as C,s as N,u as A,r as c,y as M,c as t,b as e,i,F as k,d as g,k as w,h as T,p as V,t as n,o,x as B}from"./index-DNqjwM3C.js";const S={class:"admin-leaderboard-container"},q={key:0,class:"leaderboard-list-section"},D={key:0,class:"loading-indicator"},Q={key:1,class:"empty-state"},R={key:2,class:"leaderboard-grid"},$=["onClick"],j={class:"quiz-title"},E={class:"card-meta"},F={class:"top-rank-value"},H={key:3,class:"mt-6 text-center"},G=["disabled"],J={key:0,class:"flex items-center justify-center"},K={key:1,class:"flex items-center justify-center"},O={key:1,class:"leaderboard-detail-section"},P={class:"section-header"},U={key:0,class:"loading-indicator"},W={key:1,class:"empty-state"},X={key:2,class:"leaderboard-table-container"},Y={class:"leaderboard-table"},Z={class:"rank-cell"},I={__name:"AdminLeaderboard",setup(ee){const r=z(),{leaderboards:u,currentLeaderboard:m}=N(r),p=A(),v=c(1),f=c(!0),b=c(null),_=c(""),h=async()=>{const l=await r.listAdminLeaderboards(v.value);l.success?l.pagination?v.value=v.value+1:f.value=!1:p.error(l.message)},y=async l=>{b.value=l;const s=u.value.find(a=>a.quiz_id===l);_.value=s?s.title:"Quiz Leaderboard";const d=await r.showAdminLeaderboard({quiz_id:l});d.success||p.error(d.message)},L=()=>{b.value=null,m.value=[],_.value=""},x=l=>{if(!l)return"0s";const s=Math.floor(l/60),d=l%60;return s>0?`${s}m ${d}s`:`${d}s`};return M(()=>{h()}),(l,s)=>{const d=B("font-awesome-icon");return o(),t("div",S,[s[10]||(s[10]=e("h2",{class:"page-title"},"Quiz Leaderboards",-1)),b.value?(o(),t("div",O,[e("div",P,[e("button",{class:"back-btn",onClick:L}," ← Back to List "),e("h3",null,n(_.value),1)]),i(r).loading?(o(),t("div",U,s[7]||(s[7]=[e("p",null,"Loading leaderboard details...",-1)]))):i(m).length===0?(o(),t("div",W,s[8]||(s[8]=[e("p",null,"No participants in this leaderboard yet.",-1)]))):(o(),t("div",X,[e("table",Y,[s[9]||(s[9]=e("thead",null,[e("tr",null,[e("th",null,"Rank"),e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Mobile"),e("th",null,"Score"),e("th",null,"Duration"),e("th",null,"Reward")])],-1)),e("tbody",null,[(o(!0),t(k,null,g(i(m),a=>(o(),t("tr",{key:a.rank},[e("td",Z,n(a.rank),1),e("td",null,n(a.user.name),1),e("td",null,n(a.user.email),1),e("td",null,n(a.user.mobile),1),e("td",null,n(a.score),1),e("td",null,n(x(a.duration)),1),e("td",null,n(a.reward||"None"),1)]))),128))])])]))])):(o(),t("div",q,[s[6]||(s[6]=e("div",{class:"section-header"},[e("h3",null,"Available Leaderboards")],-1)),i(r).loading&&!i(u).length?(o(),t("div",D,s[0]||(s[0]=[e("p",null,"Loading leaderboards...",-1)]))):i(u).length===0?(o(),t("div",Q,s[1]||(s[1]=[e("p",null,"No leaderboards available.",-1)]))):(o(),t("div",R,[(o(!0),t(k,null,g(i(u),a=>(o(),t("div",{key:a.quiz_id,class:"leaderboard-card",onClick:se=>y(a.quiz_id)},[e("h4",j,n(a.title),1),e("div",E,[s[2]||(s[2]=e("span",{class:"top-rank-label"},"Top Rank",-1)),e("span",F,n(a.top_user_name),1)]),s[3]||(s[3]=e("button",{class:"view-btn"},"View Details",-1))],8,$))),128))])),f.value?(o(),t("div",H,[e("button",{onClick:h,class:"px-8 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-full shadow-lg hover:from-blue-700 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:i(r).loading},[i(r).loading?(o(),t("span",J,s[4]||(s[4]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),w(" Loading... ")]))):(o(),t("span",K,[s[5]||(s[5]=w(" Load More ")),T(d,{icon:"chevron-down",class:"ml-2"})]))],8,G)])):V("",!0)]))])}}},ae=C(I,[["__scopeId","data-v-4201235f"]]);export{ae as default};
