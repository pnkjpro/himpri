import{D as h,r as t,s as y,a as M,E as n}from"./index-B7xBi81X.js";import{u as A}from"./mainStore-DQohqPse.js";const x=h("transaction",()=>{const a=t(!1),c=t([]),i=t(null),l=t(""),d=A(),{contest:g}=y(d),m=M();async function p(r){var o,s;try{if(a.value=!0,!r||isNaN(r)||r<=0)throw new Error("Invalid amount. Please enter a valid positive number.");const e=await n.post("/funds/transaction",{action:"deposit",amount:r});return a.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return a.value=!1,console.error("Error Adding Fund:",e),{success:!1,message:((s=(o=e.response)==null?void 0:o.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function f(r){var o,s;try{if(a.value=!0,!r||isNaN(r)||r<=0)throw new Error("Invalid amount. Please enter a valid positive number.");const e=await n.post("/funds/transaction",{action:"withdraw",amount:r});return a.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return a.value=!1,console.error("Error Withdrawing Fund:",e),{success:!1,message:((s=(o=e.response)==null?void 0:o.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function v(r){var o,s;try{a.value=!0;const e=await n.post("/play/quiz/join",{node_id:g.value.node_id,variant_id:r});return m.fetchUser(),a.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return a.value=!1,console.error("Error Joining Game:",e),{success:!1,message:((s=(o=e.response)==null?void 0:o.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function w(){var r,o;try{const s=await n.get("/funds/transaction/list");return c.value=s.data.data,console.log("pinia: ",c.value),a.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return a.value=!1,console.error("Error Joining Game:",s),{success:!1,message:((o=(r=s.response)==null?void 0:r.data)==null?void 0:o.message)||"An unexpected error occurred"}}}return{fundAction:l,addFunds:p,loading:a,error:i,withdrawFunds:f,joinGame:v,getTransactions:w,transactions:c}});export{x as u};
