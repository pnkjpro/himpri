import{u as w}from"./adminStore-B9zOg_2S.js";import{_ as k,u as C,r as _,s as A,y as j,c as s,b as t,i as c,p as i,F as z,d as N,k as u,h as T,o as r,n as f,t as a,x as M}from"./index-BSeqajGY.js";const S={class:"max-w-7xl mx-auto p-5 font-sans"},V={class:"bg-white rounded-lg shadow-lg overflow-hidden"},B={class:"overflow-x-auto"},D={class:"w-full border-collapse"},F={key:0},I={class:"px-4 py-3 capitalize border-b border-gray-200"},L={class:"px-4 py-3 border-b border-gray-200"},R={class:"px-4 py-3 border-b border-gray-200"},P={class:"px-4 py-3 border-b border-gray-200"},E={class:"px-4 py-3 capitalize border-b border-gray-200"},$={class:"px-4 py-3 border-b border-gray-200"},H={class:"px-4 py-3 border-b border-gray-200"},U={class:"px-4 py-3 border-b border-gray-200"},G={key:0,class:"px-4 py-3 border-b border-gray-200"},J={class:"px-4 py-3 border-b border-gray-200"},K={class:"flex gap-2"},O=["onClick"],Q=["onClick"],W={key:0,class:"mt-6 text-center"},X=["disabled"],Y={key:0,class:"flex items-center justify-center"},Z={key:1,class:"flex items-center justify-center"},q={__name:"FundApproval",setup(tt){const p=C(),y=_(!0),b=_(1),d=w(),{allTransactions:g}=A(d);j(()=>{x()});const x=async()=>{const n=await d.fetchTransactions(b.value);n.success?(console.log("pagination: ",n.pagination),n.pagination?b.value=b.value+1:y.value=!1):p.error("failed to fetch transactions")},m=async(n,o)=>{const l=await d.statusApproval(n,o);l.success||p.error(l.message),p.success(l.message)};return(n,o)=>{const l=M("font-awesome-icon");return r(),s("div",S,[o[4]||(o[4]=t("div",{class:"flex justify-between items-center mb-6"},[t("h2",{class:"text-2xl font-semibold text-gray-800 m-0"},"Customer Payment Requests")],-1)),t("div",V,[t("div",B,[t("table",D,[o[1]||(o[1]=t("thead",null,[t("tr",{class:"bg-gray-50"},[t("th",{class:"px-4 py-3 text-left font-semibold text-gray-600 border-b border-gray-200"},"Name"),t("th",{class:"px-4 py-3 text-left font-semibold text-gray-600 border-b border-gray-200"},"Email"),t("th",{class:"px-4 py-3 text-left font-semibold text-gray-600 border-b border-gray-200"},"Mobile"),t("th",{class:"px-4 py-3 text-left font-semibold text-gray-600 border-b border-gray-200"},"UPI ID"),t("th",{class:"px-4 py-3 text-left font-semibold text-gray-600 border-b border-gray-200"},"Action"),t("th",{class:"px-4 py-3 text-left font-semibold text-gray-600 border-b border-gray-200"},"Amount"),t("th",{class:"px-4 py-3 text-left font-semibold text-gray-600 border-b border-gray-200"},"RazorPay ID"),t("th",{class:"px-4 py-3 text-left font-semibold text-gray-600 border-b border-gray-200"},"Description"),t("th",{class:"px-4 py-3 text-left font-semibold text-gray-600 border-b border-gray-200"},"Status")])],-1)),t("tbody",null,[c(g).length===0?(r(),s("tr",F,o[0]||(o[0]=[t("td",{colspan:"10",class:"px-4 py-6 text-center text-gray-500 border-b border-gray-200"}," No requests found matching your filters. ",-1)]))):i("",!0),(r(!0),s(z,null,N(c(g),(e,h)=>(r(),s("tr",{key:h,class:f([{"bg-red-50":e.approved_status==="rejected","bg-green-50":e.approved_status==="approved","bg-white":e.approved_status==="pending"},"hover:bg-gray-50 transition-colors"])},[t("td",I,a(e.name),1),t("td",L,a(e.email),1),t("td",R,a(e.mobile),1),t("td",P,a(e.upi_id),1),t("td",E,a(e.action),1),t("td",$,"â‚¹"+a(e.amount),1),t("td",H,a(e.razorpay_order_id),1),t("td",U,a(e.description),1),e.approved_status!="pending"?(r(),s("td",G,[t("span",{class:f([{"bg-yellow-100 text-yellow-800":e.approved_status==="pending","bg-green-100 text-green-800":e.approved_status==="approved","bg-red-100 text-red-800":e.approved_status==="rejected"},"inline-block px-2 py-1 rounded text-xs font-medium"])},a(e.approved_status),3)])):i("",!0),t("td",J,[t("div",K,[e.approved_status==="pending"?(r(),s("button",{key:0,onClick:v=>m(e,"approved"),class:"px-3 py-1.5 bg-green-500 text-white text-sm font-medium rounded hover:bg-green-600 transition-colors cursor-pointer border-none"}," Approve ",8,O)):i("",!0),e.approved_status==="pending"?(r(),s("button",{key:1,onClick:v=>m(e,"rejected"),class:"px-3 py-1.5 bg-red-500 text-white text-sm font-medium rounded hover:bg-red-600 transition-colors cursor-pointer border-none"}," Reject ",8,Q)):i("",!0)])])],2))),128))])])]),y.value?(r(),s("div",W,[t("button",{onClick:x,class:"px-8 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-full shadow-lg hover:from-blue-700 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:c(d).loading},[c(d).loading?(r(),s("span",Y,o[2]||(o[2]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Loading... ")]))):(r(),s("span",Z,[o[3]||(o[3]=u(" Load More ")),T(l,{icon:"chevron-down",class:"ml-2"})]))],8,X)])):i("",!0)])])}}},st=k(q,[["__scopeId","data-v-d46b6563"]]);export{st as default};
