import{m as F,ag as E,V as M,ah as A,ai as S,W as I,aj as C,a9 as L,v as P,s as Y,r as x,ak as N,o as R,c as d,b as e,g as y,u as c,F as q,d as B,t as r,y as $,z as p,A as g,h as V,j as u,D as v,f as z}from"./index-LZ7Ng8Fw.js";import{u as K}from"./mainStore-ItKn7B0_.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"min-h-screen bg-gray-50"},H={class:"p-6"},J={key:0,class:"text-center py-12"},O={class:"bg-gray-100 rounded-full p-6 w-24 h-24 mx-auto mb-4"},Q={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},X={class:"relative"},Z=["src","alt"],ee={class:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center"},te={class:"bg-red-600 rounded-full p-3"},oe={class:"absolute top-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded"},se={class:"absolute top-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded font-medium"},le={class:"p-4"},re={class:"text-lg font-bold text-gray-900 mb-2 line-clamp-2"},ae={class:"text-sm text-gray-600 mb-3 line-clamp-2"},ie={class:"flex items-center justify-between text-xs text-gray-500 mb-4"},de={class:"mb-4"},ue=["href"],ne={class:"flex space-x-2"},ce=["onClick"],be={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},me={class:"bg-white rounded-xl max-w-2xl w-full max-h-90vh overflow-y-auto"},fe={class:"flex justify-between items-center p-6 border-b border-gray-200"},pe={class:"text-xl font-bold text-gray-900"},ge={class:"form-group"},xe={class:"form-group"},ye={class:"form-group"},ve={class:"form-group"},he={class:"form-group"},we={key:0,class:"form-group"},_e=["src"],Ve={class:"flex space-x-3 pt-4"},Ue=["disabled"],ke={__name:"FeaturedVideo",setup(Te){F.add(E,M,A,S,I,C,L);const b=P(),m=K();Y(m);const i=x([]),w=x(!1),a=x(!1),f=x(-1),o=N({title:"",description:"",youtubeUrl:"",duration:"",views:"",thumbnail:""}),U=()=>{if(!o.youtubeUrl)return;const l=_(o.youtubeUrl);l&&(o.thumbnail=`https://img.youtube.com/vi/${l}/maxresdefault.jpg`)},_=l=>{const t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,s=l.match(t);return s&&s[7].length===11?s[7]:null},k=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),T=()=>{o.title="",o.description="",o.youtubeUrl="",o.duration="",o.views="",o.thumbnail=""},h=()=>{w.value=!1,a.value=!1,f.value=-1,T()},j=(l,t)=>{f.value=t,o.title=l.title,o.description=l.description,o.youtubeUrl=l.youtubeUrl,o.duration=l.duration,o.views=l.views,o.thumbnail=l.thumbnail,a.value=!0},D=async()=>{if(!a.value&&i.value.length>=7){b.error("Maximum 7 videos allowed");return}const l=_(o.youtubeUrl);if(!l){b.error("Please enter a valid YouTube URL");return}o.thumbnail||(o.thumbnail=`https://img.youtube.com/vi/${l}/maxresdefault.jpg`);const t={title:o.title,description:o.description,youtubeUrl:o.youtubeUrl,duration:o.duration,views:o.views,thumbnail:o.thumbnail,createdAt:a.value?i.value[f.value].createdAt:new Date};try{let s;if(a.value){const n={...t,id:i.value[f.value].id};s=await m.updateFeaturedVideo(n),s.success&&(i.value[f.value]=n,b.success("Video updated successfully"))}if(!s.success){b.error(s.message);return}h()}catch(s){console.error("Error saving video:",s),b.error("Failed to save video. Please try again.")}};return R(async()=>{const l=await m.fetchFeaturedVideos();l.success&&(i.value=l.data||[])}),(l,t)=>(u(),d("div",G,[t[16]||(t[16]=e("div",{class:"bg-white shadow-sm border-b border-gray-200 p-6"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Featured YouTube Videos"),e("p",{class:"text-sm text-gray-600 mt-1"},"Manage homepage featured video content (Maximum 7 videos)")])])],-1)),e("div",H,[i.value.length===0?(u(),d("div",J,[e("div",O,[y(c(v),{icon:"video",class:"text-gray-400 text-4xl"})]),t[5]||(t[5]=e("h3",{class:"text-xl font-bold text-gray-700 mb-2"},"No Videos Added",-1)),t[6]||(t[6]=e("p",{class:"text-gray-500 mb-4"},"Add your first featured video to get started",-1))])):(u(),d("div",Q,[(u(!0),d(q,null,B(i.value,(s,n)=>(u(),d("div",{key:s.id||n,class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow"},[e("div",X,[e("img",{src:s.thumbnail,alt:s.title,class:"w-full h-48 object-cover"},null,8,Z),e("div",ee,[e("div",te,[y(c(v),{icon:"play",class:"text-white text-xl"})])]),e("div",oe,r(s.duration),1),e("div",se," #"+r(n+1),1)]),e("div",le,[e("h3",re,r(s.title),1),e("p",ae,r(s.description),1),e("div",ie,[e("span",null,r(s.views)+" views",1),e("span",null,r(k(s.created_at)),1)]),e("div",de,[t[7]||(t[7]=e("p",{class:"text-xs text-gray-500 mb-1"},"YouTube URL:",-1)),e("a",{href:s.youtubeUrl,target:"_blank",class:"text-blue-600 hover:text-blue-800 text-sm break-all"},r(s.youtubeUrl),9,ue)]),e("div",ne,[e("button",{onClick:je=>j(s,n),class:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium"},[y(c(v),{icon:"edit",class:"mr-2"}),t[8]||(t[8]=z(" Edit "))],8,ce)])])]))),128))]))]),w.value||a.value?(u(),d("div",be,[e("div",me,[e("div",fe,[e("h3",pe,r(a.value?"Edit Video":"Add Featured Video"),1),e("button",{onClick:h,class:"text-gray-400 hover:text-gray-600"},[y(c(v),{icon:"times",class:"text-xl"})])]),e("form",{onSubmit:$(D,["prevent"]),class:"p-6 space-y-4"},[e("div",ge,[t[9]||(t[9]=e("label",{for:"youtubeUrl",class:"block mb-2 font-medium text-gray-700"},"YouTube URL *",-1)),p(e("input",{id:"youtubeUrl","onUpdate:modelValue":t[0]||(t[0]=s=>o.youtubeUrl=s),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://www.youtube.com/watch?v=...",required:"",onBlur:U},null,544),[[g,o.youtubeUrl]]),t[10]||(t[10]=e("p",{class:"text-xs text-gray-500 mt-1"},"Paste the YouTube video URL to auto-generate thumbnail",-1))]),e("div",xe,[t[11]||(t[11]=e("label",{for:"title",class:"block mb-2 font-medium text-gray-700"},"Video Title *",-1)),p(e("input",{id:"title","onUpdate:modelValue":t[1]||(t[1]=s=>o.title=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter video title",required:""},null,512),[[g,o.title]])]),e("div",ye,[t[12]||(t[12]=e("label",{for:"description",class:"block mb-2 font-medium text-gray-700"},"Description",-1)),p(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=s=>o.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter video description"},null,512),[[g,o.description]])]),e("div",ve,[t[13]||(t[13]=e("label",{for:"duration",class:"block mb-2 font-medium text-gray-700"},"Duration *",-1)),p(e("input",{id:"duration","onUpdate:modelValue":t[3]||(t[3]=s=>o.duration=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 12:45",required:""},null,512),[[g,o.duration]])]),e("div",he,[t[14]||(t[14]=e("label",{for:"views",class:"block mb-2 font-medium text-gray-700"},"Views *",-1)),p(e("input",{id:"views","onUpdate:modelValue":t[4]||(t[4]=s=>o.views=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 125K",required:""},null,512),[[g,o.views]])]),o.thumbnail?(u(),d("div",we,[t[15]||(t[15]=e("label",{class:"block mb-2 font-medium text-gray-700"},"Thumbnail Preview",-1)),e("img",{src:o.thumbnail,alt:"Video Thumbnail",class:"h-32 object-cover rounded-lg border"},null,8,_e)])):V("",!0),e("div",Ve,[e("button",{type:"button",onClick:h,class:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:c(m).loading,class:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-colors disabled:opacity-50"},r(c(m).loading?"Saving...":a.value?"Update Video":"Add Video"),9,Ue)])],32)])])):V("",!0)]))}},Me=W(ke,[["__scopeId","data-v-11e54b0a"]]);export{Me as default};
