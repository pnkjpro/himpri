import{l as R,F as k}from"./index.es-BFQvhjLA.js";import{b as D}from"./index-DHaoE_mB.js";import{u as I,r as m,a as K,s as w,y as q,A as $,c as a,b as t,h as C,i as n,p as y,F as E,d as F,k as _,o as i,t as d,n as j,m as U}from"./index-DPnwqptS.js";import{u as H}from"./quizStore-fyu-yhPI.js";import{u as Q}from"./mainStore-CkFnAuxP.js";import{f as h,a as O}from"./fromUnixTime-Bu3IzSon.js";import"./normalizeDates-MJlMPps6.js";import"./en-US-ClfMaaVW.js";import"./differenceInSeconds-C3I0pIaR.js";const P={class:"flex flex-col min-h-screen bg-gray-100"},G={class:"w-full overflow-x-auto rounded-lg shadow-sm"},J={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},X={key:0,class:"hover:bg-gray-50"},Y={class:"hover:bg-gray-50"},Z={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},tt={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},et=["onClick","disabled"],st={class:"px-4 py-4 whitespace-nowrap"},ot={class:"mb-2"},at=["onClick"],it=["onClick"],rt={key:2,class:"text-blue-500 font-medium"},nt={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},lt={key:0,class:"py-8 text-center text-gray-500"},ct={key:1,class:"my-4 text-center"},dt=["disabled"],ut={key:0,class:"flex items-center justify-center"},mt={key:1,class:"flex items-center justify-center"},kt={__name:"MyContests",setup(xt){R.add(D);const u=U(),g=I(),x=m(1),v=m(!0),L=m(!1),r=H(),S=K(),f=Q();w(S);const{responses:z,loading:ft}=w(r);w(f),q(()=>{b()});const b=async()=>{const o=await r.getUserResponses(x.value);o.success?o.pagination?x.value=x.value+1:v.value=!1:g.error("failed to fetch my constests")},A=m(new Date);q(()=>{const o=setInterval(()=>{A.value=new Date},6e4);$(()=>{clearInterval(o)})});function l(o,s,e){const p=new Date,c=h(Number(o));h(Number(s));const B=h(Number(e));return p>=B?(L.value=!0,{isLive:!1,text:"Show Result"}):p>=c?{isLive:!0,text:"LIVE"}:{isLive:!1,text:O(c)+" left"}}const N=async(o,s)=>{await f.fetchCurrentContest(o),f.getPrizeContents(s),u.push("/quiz/variant/details")},T=o=>{r.getLeaderboard(o),u.push("/quiz/leaderboard")},M=async o=>{(await r.showAnswerKey(o)).success?u.push("/dashboard/answer-key"):g.error("Error loading answer key")},V=()=>{u.back()};return(o,s)=>(i(),a("div",P,[t("div",{onClick:s[0]||(s[0]=e=>V()),class:"bg-orange-500 text-white p-3 flex items-center"},[C(n(k),{icon:"arrow-left",class:"mr-2"}),s[1]||(s[1]=t("span",{class:"font-medium"},"My Contests",-1))]),t("div",G,[t("table",J,[s[4]||(s[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Node ID"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quiz Name"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Answer Key"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Score")])],-1)),t("tbody",W,[n(r).loading?(i(),a("tr",X,s[2]||(s[2]=[t("td",{colspan:"4",class:"px-4 py-8 text-center"},[t("div",{class:"flex justify-center items-center space-x-2"},[t("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("span",{class:"text-sm text-gray-600"},"Loading quiz responses...")])],-1)]))):y("",!0),(i(!0),a(E,null,F(n(z),(e,p)=>(i(),a("tr",Y,[t("td",Z,d(e.node_id),1),t("td",tt,d(e.quiz.title),1),t("td",{onClick:c=>M(e.node_id),class:j(["px-4 py-4 whitespace-nowrap",l(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text==="Show Result"?"text-blue-500 font-medium":"text-gray-500 font-medium"]),disabled:l(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text!=="Show Result"}," Answer Key ",10,et),t("td",st,[t("div",ot,[l(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).isLive?(i(),a("p",{key:0,onClick:c=>N(e.node_id,e.quiz_variant_id),class:"text-red-500 font-bold flex items-center"},s[3]||(s[3]=[t("span",{class:"inline-block h-2 w-2 rounded-full bg-red-500 mr-2"},null,-1),_(" LIVE ")]),8,at)):l(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text==="Show Result"?(i(),a("p",{key:1,onClick:c=>T(e.node_id),class:"text-blue-500 font-medium"},d(l(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text),9,it)):(i(),a("p",rt,d(l(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text),1))])]),t("td",nt,d(e.score),1)]))),256))])]),n(z).length===0?(i(),a("div",lt," No data available. ")):y("",!0),v.value?(i(),a("div",ct,[t("button",{onClick:b,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:n(r).loading},[n(r).loading?(i(),a("span",ut,s[5]||(s[5]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),_(" Loading... ")]))):(i(),a("span",mt,[s[6]||(s[6]=_(" Load More ")),C(n(k),{icon:"chevron-down",class:"ml-2"})]))],8,dt)])):y("",!0)])]))}};export{kt as default};
