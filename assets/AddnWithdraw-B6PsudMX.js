import{_ as R,r as u,u as E,a as $,s as P,y as q,B as N,c as s,b as e,h as j,i as r,n as U,w as H,f as x,v as h,F as L,d as O,k,p,t as _,o,m as Y}from"./index-TC_BJqEW.js";import{u as Q}from"./transactionStore-BCYsZjv5.js";import{l as G,F as J}from"./index.es-BLIuorgg.js";import{b as K,c as X,d as Z,e as ee}from"./index-DHaoE_mB.js";import"./mainStore-yRi8RT7p.js";const te={class:"flex flex-col min-h-screen bg-gray-100"},se={class:"flex border-b border-gray-200 bg-white"},oe={key:0,class:"p-4 flex flex-col gap-6"},ae={class:"payment-container bg-white rounded-lg p-4 shadow-sm"},le={class:"mb-4"},ne={class:"mb-4"},re={class:"flex flex-wrap gap-2"},ie=["onClick"],de=["disabled"],ue={key:0,class:"flex items-center justify-center"},ce={key:1},me={key:1,class:"payment-success text-center p-6"},pe={class:"mb-4 text-gray-600"},ve={key:2,class:"mt-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded"},be={key:1,class:"p-4 flex flex-col gap-4"},fe={class:"bg-white rounded-lg p-4 shadow-sm"},ge={class:"text-center mb-2"},we={class:"text-2xl font-bold text-green-600"},ye={key:0,class:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4"},xe={class:"flex items-center"},he={class:"ml-3"},ke={class:"mt-2"},_e={class:"mb-4"},Ce=["disabled"],Ie={key:0,class:"flex items-center justify-center"},Pe={key:1},Ue={key:1,class:"bg-white rounded-lg p-4 shadow-sm"},Ae={class:"mb-4"},De=["max"],Me={class:"mb-4"},Se={class:"flex items-center gap-2"},Ve=["disabled"],ze={key:0,class:"flex items-center justify-center"},Be={key:1},Fe=["disabled"],We={key:0,class:"flex items-center justify-center"},Te={key:1},Re={__name:"AddnWithdraw",setup(Ee){G.add(K,X,Z,ee);const c=u("deposit"),A=Y(),n=E(),i=Q(),v=$(),{user:w}=P(v),{fundAction:D}=P(i);q(()=>{D.value==="withdraw"&&(c.value="withdraw")});const m=u(100),y=u(""),C=u(""),M=[50,100,200,500,1e3,2e3],S=async()=>{if(m.value<1){n.error("Amount should not be less than Rs 100");return}y.value="";const a=await i.payWithRazorpay(m.value);a.success?(C.value=a.order_id,n.success("Payment is successfully processed")):n.error(a.message)},V=()=>{i.showPaymentSuccess=!1,m.value=100,y.value="",C.value=""},d=u(""),b=u(w.value.upi_id||""),f=u(""),g=u(!1),I=N(()=>w.value.funds||0),z=async()=>{if(d.value>=50&&d.value<=I.value){const a=await i.withdrawFunds(d.value);a.success?n.success(a.message):n.error(a.message),d.value=""}else n.error("Please enter a valid amount")},B=async()=>{if(f.value.trim()){const a=await v.updateUpiId(f.value);a.success?(n.success(a.message),b.value=f.value):n.error(a.message),f.value=""}else n.error("Please enter a valid UPI ID")},F=async()=>{if(b.value.trim()){const a=await v.updateUpiId(b.value);a.success?n.success(a.message):n.error(a.message),g.value=!1}else n.error("Please enter a valid UPI ID")},W=()=>{A.back()};return(a,t)=>(o(),s("div",te,[e("div",{onClick:t[0]||(t[0]=l=>W()),class:"bg-orange-500 text-white p-3 flex items-center"},[j(r(J),{icon:"arrow-left",class:"mr-2"}),t[8]||(t[8]=e("span",{class:"font-medium"},"Fund Management",-1))]),e("div",se,[e("button",{onClick:t[1]||(t[1]=l=>c.value="deposit"),class:U(["flex-1 py-3 text-center font-medium",c.value==="deposit"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Add Fund ",2),e("button",{onClick:t[2]||(t[2]=l=>c.value="withdraw"),class:U(["flex-1 py-3 text-center font-medium",c.value==="withdraw"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Withdraw Fund ",2)]),c.value==="deposit"?(o(),s("div",oe,[e("div",ae,[t[16]||(t[16]=e("div",{class:"text-lg font-medium mb-4"},"Make Payment",-1)),r(i).showPaymentSuccess?p("",!0):(o(),s("form",{key:0,onSubmit:H(S,["prevent"])},[e("div",le,[t[9]||(t[9]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"amount"}," Amount (₹) ",-1)),x(e("input",{type:"number",id:"amount","onUpdate:modelValue":t[3]||(t[3]=l=>m.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",min:"1",placeholder:"Enter amount",required:""},null,512),[[h,m.value]]),t[10]||(t[10]=e("span",{class:"text-xs text-gray-500 mt-1 block"},"Minimum amount: ₹100",-1))]),e("div",ne,[t[11]||(t[11]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"}," Quick Options: ",-1)),e("div",re,[(o(),s(L,null,O(M,(l,T)=>e("button",{type:"button",key:T,onClick:$e=>m.value=l,class:"px-4 py-2 border border-gray-300 rounded-md hover:bg-orange-100 hover:border-orange-300 transition-colors"}," ₹"+_(l),9,ie)),64))])]),e("button",{type:"submit",class:"bg-blue-500 text-white py-2 px-6 rounded-lg font-medium w-full disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:r(i).loading||m.value<1},[r(i).loading?(o(),s("div",ue,t[12]||(t[12]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),k(" Processing... ")]))):(o(),s("span",ce,"Pay Now"))],8,de)],32)),r(i).showPaymentSuccess?(o(),s("div",me,[t[13]||(t[13]=e("div",{class:"success-icon mb-4 text-5xl text-green-500"},"✓",-1)),t[14]||(t[14]=e("h3",{class:"text-xl font-bold mb-2"},"Payment Successful!",-1)),t[15]||(t[15]=e("p",{class:"mb-2"},"Your payment has been processed successfully.",-1)),e("p",pe,"Payment ID: "+_(C.value),1),e("button",{class:"bg-blue-500 text-white py-2 px-6 rounded-lg font-medium",onClick:V}," Make Another Payment ")])):p("",!0),y.value?(o(),s("div",ve,_(y.value),1)):p("",!0)])])):p("",!0),c.value==="withdraw"?(o(),s("div",be,[e("div",fe,[e("div",ge,[t[17]||(t[17]=e("div",{class:"text-gray-600 text-sm"},"Your Available Balance",-1)),e("div",we,"₹ "+_(r(w).funds),1)])]),r(w).upi_id?(o(),s("div",Ue,[t[26]||(t[26]=e("div",{class:"text-lg font-medium mb-4"},"Withdraw Funds",-1)),e("div",Ae,[t[21]||(t[21]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"withdraw-amount"}," Withdrawal Amount (₹) ",-1)),x(e("input",{type:"number",id:"withdraw-amount","onUpdate:modelValue":t[5]||(t[5]=l=>d.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter amount to withdraw",max:I.value},null,8,De),[[h,d.value]]),t[22]||(t[22]=e("span",{style:{"font-size":"13px",color:"darkcyan"}},"Minimum Rs 50 can be withdrawn",-1))]),e("div",Me,[t[24]||(t[24]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"account-number"}," To UPI ID: ",-1)),e("div",Se,[x(e("input",{type:"text",id:"account-number","onUpdate:modelValue":t[6]||(t[6]=l=>b.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:!g.value},null,8,Ve),[[h,b.value]]),g.value?p("",!0):(o(),s("button",{key:0,class:"text-blue-500 underline",onClick:t[7]||(t[7]=l=>g.value=!0)}," Edit ")),g.value?(o(),s("button",{key:1,class:"bg-green-500 text-white px-4 py-1 rounded",onClick:F},[r(v).loading?(o(),s("div",ze,t[23]||(t[23]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),k(" Saving... ")]))):(o(),s("span",Be,"Save"))])):p("",!0)])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full disabled:bg-gray-400 disabled:cursor-not-allowed",onClick:z,disabled:d.value<50||d.value>I.value||!b.value||r(i).loading},[r(i).loading?(o(),s("div",We,t[25]||(t[25]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),k(" Requesting Withdrawal... ")]))):(o(),s("span",Te,"Request Withdrawal"))],8,Fe)])):(o(),s("div",ye,[e("div",xe,[e("div",he,[t[20]||(t[20]=e("p",{class:"text-yellow-700 font-medium"}," Please add your UPI ID to enable withdrawals ",-1)),e("div",ke,[e("div",_e,[t[18]||(t[18]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"upi-id"}," UPI ID ",-1)),x(e("input",{type:"text",id:"upi-id","onUpdate:modelValue":t[4]||(t[4]=l=>f.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter your UPI ID"},null,512),[[h,f.value]])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:B,disabled:r(v).loading},[r(v).loading?(o(),s("div",Ie,t[19]||(t[19]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),k(" Updating UPI ID... ")]))):(o(),s("span",Pe,"Update UPI ID"))],8,Ce)])])])]))])):p("",!0)]))}},Oe=R(Re,[["__scopeId","data-v-42f9d0a3"]]);export{Oe as default};
