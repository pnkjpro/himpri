import{a4 as z,r as o,l as A,v as k,x as w,s as E,a5 as c}from"./index-6Xq51A_u.js";import{u as Q}from"./quizStore-vmakwzAd.js";const T=z("lifeline",()=>{const a=o(!1),f=o(null),d=A(),m=k(),g=o([]),h=o(!0),y=o(!0),_=o(!0),u=o([]),x=w(),L=Q(),{question:p}=E(L);async function q(n){var r,s,i,t,l,v;try{a.value=!0,f.value=null;const e=await c.post("/lifeline/use",n);if(e.data.data.lifeline_type=="skip_question")(r=e.data.data)!=null&&r.flag&&((s=e.data.data)==null?void 0:s.is_nextQuestion)===!1?(console.log("hit inside skip lifeline"),m.success(e.data.data.message),d.push("/quiz/play/finished")):p.value={...e.data.data};else if(e.data.data.lifeline_type=="revive_game"){if((i=e.data.data)!=null&&i.flag&&((t=e.data.data)==null?void 0:t.is_nextQuestion)===!1)return console.log("hit inside revive"),d.push("/quiz/play/finished"),{success:!1,message:e.data.data.message};p.value={...e.data.data}}else u.value=e.data.data.options_to_remove,console.log("fiftyFifty: ",u.value);return a.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return a.value=!1,console.error("Error using Lifeline:",e),{success:!1,message:((v=(l=e.response)==null?void 0:l.data)==null?void 0:v.message)||"An unexpected error occurred"}}}async function M(n,r){var s,i;try{a.value=!0;const t=await c.post("/lifeline/purchase",{lifeline_id:n,quantity:r});return x.fetchUser(),a.value=!1,{success:t.data.success,message:t.data.message}}catch(t){return a.value=!1,console.error("Error Purchasing Lifeline:",t),{success:!1,message:((i=(s=t.response)==null?void 0:s.data)==null?void 0:i.message)||"An unexpected error occurred"}}}async function S(){var n,r;try{const s=await c.get("/lifeline/list");return g.value=s.data.data,a.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return a.value=!1,console.error("Error Purchasing Lifeline:",s),{success:!1,message:((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||"An unexpected error occurred"}}}return{useLifeline:q,fetchLifeline:S,purchaseLifeline:M,error:f,loading:a,lifelineDetails:g,removedOption:u,skip:h,revive:y,fiftyFifty:_}});export{T as u};
