import{_ as B,u as w,J as h,r as I,c as u,b as t,f as p,v as k,p as b,C as S,e as D,i as f,t as U,w as C,o as c}from"./index-Dn8lwy8m.js";import{u as E}from"./mainStore-CCFhSTe5.js";const A={class:"banner-form-container p-4 max-w-2xl mx-auto"},T={class:"form-group"},V={class:"form-group"},F={class:"flex items-center space-x-2"},M={key:0,class:"flex items-center"},j={key:0,class:"mt-2"},q=["src"],N={class:"form-group"},H={class:"form-group"},P=["disabled"],R={__name:"HomeBanner",setup(J){const i=E(),r=w(),o=h({title:"",image:null,banner_id:""}),l=I(null),g=a=>{const e=a.target.files[0];if(e){o.image=e;const n=new FileReader;n.onload=s=>{l.value=s.target.result},n.readAsDataURL(e)}},m=()=>{o.image=null,l.value=null;const a=document.getElementById("bannerImage");a&&(a.value="")},v=()=>{o.title="",o.banner_id="",m()},_=async()=>{const a=new FormData;a.append("title",o.title),a.append("banner_id",o.banner_id),o.image&&a.append("banner_image",o.image);const e=await i.updateBanner(a);if(console.log("error messages: ",e.message),e.success)r.success(e.message),v();else{const n=e.message;typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.values(n).forEach((s,d)=>{s.forEach((x,y)=>{setTimeout(()=>r.error(x),(d+y)*300)})}):Array.isArray(n)?n.forEach((s,d)=>{setTimeout(()=>r.error(s),d*300)}):r.error(n);return}};return(a,e)=>(c(),u("div",A,[e[6]||(e[6]=t("h2",{class:"text-xl font-bold mb-4"},"Update Banner",-1)),t("form",{onSubmit:C(_,["prevent"]),class:"space-y-4"},[t("div",T,[e[2]||(e[2]=t("label",{for:"title",class:"block mb-2 font-medium"},"Banner Title",-1)),p(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=n=>o.title=n),type:"text",class:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter banner title",required:""},null,512),[[k,o.title]])]),t("div",V,[e[3]||(e[3]=t("label",{for:"bannerImage",class:"block mb-2 font-medium"},"Upload Banner Image",-1)),t("div",F,[t("input",{type:"file",id:"bannerImage",onChange:g,accept:"image/*",class:"border rounded p-2 w-full",required:""},null,32),o.image?(c(),u("div",M,[t("button",{onClick:m,type:"button",class:"p-1 text-red-500 hover:text-red-700"}," Clear ")])):b("",!0)]),l.value?(c(),u("div",j,[t("img",{src:l.value,alt:"Banner Preview",class:"h-32 object-cover rounded border"},null,8,q)])):b("",!0)]),t("div",N,[e[5]||(e[5]=t("label",{for:"bannerId",class:"block mb-2 font-medium"},"Banner ID",-1)),p(t("select",{id:"bannerId","onUpdate:modelValue":e[1]||(e[1]=n=>o.banner_id=n),class:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},e[4]||(e[4]=[D('<option disabled value="" data-v-1b651c4d>Select a banner ID</option><option value="1" data-v-1b651c4d>Banner 1</option><option value="2" data-v-1b651c4d>Banner 2</option><option value="3" data-v-1b651c4d>Banner 3</option><option value="4" data-v-1b651c4d>Banner 4</option><option value="5" data-v-1b651c4d>Banner 5</option>',6)]),512),[[S,o.banner_id]])]),t("div",H,[t("button",{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-700",disabled:f(i).loading},U(f(i).loading?"Updating...":"Update Banner"),9,P)])],32)]))}},z=B(R,[["__scopeId","data-v-1b651c4d"]]);export{z as default};
