import{G as h,r as u,l as _,u as L,a as S,s as q,H as l}from"./index-lwxLPvsS.js";import{u as x}from"./quizStore-CTguNrOA.js";const w=h("lifeline",()=>{const a=u(!1),c=u(null),f=_(),d=L(),i=u([]),p=S(),g=x(),{question:m}=q(g);async function v(o){var n,t,r,s;console.log("Lifeline Pinia Data: ",o);try{a.value=!0,c.value=null;const e=await l.post("/lifeline/use",o);return console.log("lifeline_type pinia: ",e.data.data.lifeline_type),e.data.data.lifeline_type=="skip_question"||e.data.data.lifeline_type=="revive_game"?(n=e.data.data)!=null&&n.flag&&((t=e.data.data)==null?void 0:t.is_nextQuestion)===!1?(d.success(e.data.data.message),f.push("/quiz/play/finished")):m.value={...e.data.data}:(i.value=e.data.data.options_to_remove,console.log("fiftyFifty: ",i.value)),a.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return a.value=!1,console.error("Error using Lifeline:",e),{success:!1,message:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function y(o,n){var t,r;try{a.value=!0;const s=await l.post("/lifeline/purchase",{lifeline_id:o,quantity:n});return p.fetchUser(),a.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return a.value=!1,console.error("Error Purchasing Lifeline:",s),{success:!1,message:((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"An unexpected error occurred"}}}return{useLifeline:v,removedOption:i,purchaseLifeline:y}});export{w as u};
