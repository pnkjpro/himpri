import{L as S,r as n,A as q,l as Q,u as b,a as E,s as f,I as L}from"./index-COP7dxsn.js";import{u as P}from"./mainStore-CGZk5-4i.js";const k=S("playQuiz",()=>{const s=n(!1),i=n(null),v=q("config"),m=Q(),y=b(),d=n([]),c=n({}),p=n({userPoints:{score:0},totalParticipants:0,topPlayers:[]}),h=P(),_=E(),{token:x}=f(_),{contests:U,contest:g,variant:M}=f(h),u=L.create({baseURL:v.API_URL,withCredentials:!0,headers:{Authorization:`Bearer ${x.value}`}});async function R(){var t,a;try{const e=await u.post("/play",{node_id:g.value.node_id,variant_id:M.value.id});return console.log(e.data.data),e.data.success&&(c.value={...e.data.data}),{success:e.data.success,message:e.data.message}}catch(e){return s.value=!1,console.error("Error Responses:",e),{success:!1,message:((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"An unexpected error occurred"}}}async function A(t){var a,e,r,l;try{s.value=!0,i.value=null;const o=await u.post("/play/next",{node_id:g.value.node_id,question_id:c.value.id,answer_id:t});return(a=o.data.data)!=null&&a.flag&&((e=o.data.data)==null?void 0:e.is_nextQuestion)===!1?(y.success(o.data.data.message),m.push("/quiz/play/finished")):c.value={...o.data.data},s.value=!1,{success:o.data.success,message:o.data.message}}catch(o){return s.value=!1,console.error("Error Responses:",o),{success:!1,message:((l=(r=o.response)==null?void 0:r.data)==null?void 0:l.message)||"An unexpected error occurred"}}}async function z(){var t,a;try{s.value=!0;const e=await u.get("/quiz/responses/list");return d.value=e.data.data,console.log("pinia: ",d.value),s.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return s.value=!1,console.error("Error Responses:",e),{success:!1,message:((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"An unexpected error occurred"}}}async function w(t){var a,e;try{s.value=!0;const r=await u.post("/quiz/leaderboard",{node_id:t});return p.value={...r.data.data},s.value=!1,{success:r.data.success,message:r.data.message}}catch(r){return s.value=!1,console.error("Error Responses:",r),{success:!1,message:((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"An unexpected error occurred"}}}return{playQuiz:R,nextQuestion:A,getUserResponses:z,getLeaderboard:w,leaderboard:p,responses:d,question:c,loading:s,error:i}});export{k as u};
