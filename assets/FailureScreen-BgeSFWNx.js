import{u as _}from"./lifelineStore-D5GdN6lk.js";import{u as R}from"./quizStore-vmakwzAd.js";import{u as z}from"./mainStore-CqMG1ygd.js";import{r as a,v as j,s as u,M as C,o as M,a as T,c as d,b as t,u as l,t as c,h as B,n as q,f as I,j as m,l as L,S as $}from"./index-6Xq51A_u.js";const H={class:"min-h-screen bg-gradient-to-b from-rose-300 to-rose-600 p-4 flex flex-col items-center"},N={class:"bg-white rounded-3xl p-6 w-full max-w-md shadow-lg text-center"},Q={class:"mb-8"},V={key:0,class:"flex items-center justify-center mb-2"},A={class:"text-xl font-bold text-purple-600"},E=["disabled"],F=120,O={__name:"FailureScreen",setup(U){const r=a(!1),f=L(),v=j(),p=$("lifeline"),g=R(),s=_(),x=z(),{question:w}=u(g),{contest:b}=u(x),o=a(F);let i=null;const h=C(()=>{const n=o.value%60;return`${Math.floor(o.value/60).toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`});M(()=>{i=setInterval(()=>{o.value>0?o.value--:(r.value=!0,clearInterval(i))},1e3)}),T(()=>{clearInterval(i)});const y=async n=>{const e=await s.useLifeline({lifeline_id:n,node_id:b.value.node_id,question_id:w.value.id});e.success?f.push("/quiz/play"):v.error(e.message)},k=()=>{window.location.href="/home"};return(n,e)=>(m(),d("div",H,[t("div",N,[e[4]||(e[4]=t("div",{class:"text-red-500 mb-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-24 w-24 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e[5]||(e[5]=t("h1",{class:"text-3xl font-bold text-gray-800 mb-4"},"Quiz Failed!",-1)),t("div",Q,[l(s).loading?B("",!0):(m(),d("div",V,[e[2]||(e[2]=t("div",{class:"font-bold text-xl text-purple-600 mr-2"},"Revival Available:",-1)),t("div",A,c(h.value),1)])),t("button",{class:q(["w-full py-4 px-6 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full text-white font-bold text-xl hover:from-purple-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-purple-300 flex items-center justify-center",{"opacity-50 cursor-not-allowed":o.value<=0}]),disabled:r.value||l(s).loading,onClick:e[0]||(e[0]=S=>y(l(p).revive.id))},[e[3]||(e[3]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),I(" "+c(l(s).loading?"Reviving...":"Use Revival Lifeline"),1)],10,E)]),t("button",{class:"w-full py-3 px-6 bg-gray-200 hover:bg-gray-300 rounded-full text-gray-700 font-bold text-lg focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:e[1]||(e[1]=S=>k())}," End Quiz ")])]))}};export{O as default};
