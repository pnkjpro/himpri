import{u as x}from"./adminStore-2csNTwoO.js";import{_ as w,u as C,r as v,s as A,x as N,c as e,b as t,i,p as d,F as T,d as j,k as g,h as z,o as a,n as y,t as c,G as S}from"./index-CHPCHxS5.js";const V={class:"approval-dashboard"},B={class:"table-container"},F={class:"requests-table"},L={key:0},M={style:{"text-transform":"capitalize"}},I={style:{"text-transform":"capitalize"}},R={class:"action-buttons"},D=["onClick"],P=["onClick"],$={key:0,class:"mt-6 text-center"},E=["disabled"],G={key:0,class:"flex items-center justify-center"},H={key:1,class:"flex items-center justify-center"},U={__name:"FundApproval",setup(J){const u=C(),m=v(!0),p=v(1),l=x(),{allTransactions:_}=A(l);N(()=>{f()});const f=async()=>{const n=await l.fetchTransactions(p.value);n.success?(console.log("pagination: ",n.pagination),n.pagination?p.value=p.value+1:m.value=!1):u.error("failed to fetch transactions")},h=async(n,s)=>{const r=await l.statusApproval(n,s);r.success||u.error(r.message),u.success(r.message)};return(n,s)=>{const r=S("font-awesome-icon");return a(),e("div",V,[s[4]||(s[4]=t("div",{class:"dashboard-header"},[t("h2",null,"Customer Payment Requests")],-1)),t("div",B,[t("table",F,[s[1]||(s[1]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"UPI ID"),t("th",null,"Action"),t("th",null,"Amount"),t("th",null,"Status"),t("th",null,"Actions")])],-1)),t("tbody",null,[i(_).length===0?(a(),e("tr",L,s[0]||(s[0]=[t("td",{colspan:"6",class:"no-results"}," No requests found matching your filters. ",-1)]))):d("",!0),(a(!0),e(T,null,j(i(_),(o,b)=>(a(),e("tr",{key:b,class:y("status-"+o.approved_status)},[t("td",M,c(o.name),1),t("td",null,c(o.upi_id),1),t("td",I,c(o.action),1),t("td",null,"â‚¹"+c(o.amount),1),t("td",null,[t("span",{class:y(["status-badge","status-"+o.approved_status])},c(o.approved_status),3)]),t("td",R,[o.approved_status==="pending"?(a(),e("button",{key:0,onClick:k=>h(o,"approved"),class:"btn-approve"}," Approve ",8,D)):d("",!0),o.approved_status==="pending"?(a(),e("button",{key:1,onClick:k=>h(o,"rejected"),class:"btn-reject"}," Reject ",8,P)):d("",!0)])],2))),128))])]),m.value?(a(),e("div",$,[t("button",{onClick:f,class:"px-8 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-full shadow-lg hover:from-blue-700 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:i(l).loading},[i(l).loading?(a(),e("span",G,s[2]||(s[2]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Loading... ")]))):(a(),e("span",H,[s[3]||(s[3]=g(" Load More ")),z(r,{icon:"chevron-down",class:"ml-2"})]))],8,E)])):d("",!0)])])}}},Q=w(U,[["__scopeId","data-v-c80d2a52"]]);export{Q as default};
