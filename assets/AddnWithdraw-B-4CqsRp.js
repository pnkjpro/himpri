import{r as p,u as T,a as E,s as D,x as Q,y as q,c as o,b as e,h as _,i as d,n as V,f as v,v as w,k as b,p as y,t as W,o as l,m as H}from"./index-D2_x7L79.js";import{u as $}from"./transactionStore-IuSMuAlm.js";import{l as N,F as U}from"./index.es-kyS7yixc.js";import{b as Y,c as L,d as G,e as J}from"./index-BeD0zzHm.js";import"./mainStore-BScmQdNT.js";const K="/images/QRcode.jpeg",O={class:"flex flex-col min-h-screen bg-gray-100"},X={class:"flex border-b border-gray-200 bg-white"},Z={key:0,class:"p-4 flex flex-col gap-6"},ee={key:0,class:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4"},te={class:"flex items-center"},se={class:"ml-3"},oe={class:"mt-2"},le={class:"mb-4"},ne=["disabled"],ae={key:0,class:"flex items-center justify-center"},de={key:1},ie={key:1,class:"bg-white rounded-lg p-4 shadow-sm"},re={class:"mb-4"},ue={class:"mb-4"},ce={class:"flex items-center gap-2"},me=["disabled"],pe={key:0,class:"flex items-center justify-center"},fe={key:1},ge={class:"bg-white rounded-lg p-4 shadow-sm flex flex-col items-center"},ve={class:"bg-gray-100 p-3 rounded-lg w-84 h-84 mb-3 flex items-center justify-center relative"},we={class:"w-full mb-4"},be={class:"flex w-full"},ye=["disabled"],xe={key:0,class:"flex items-center justify-center"},he={key:1},ke={key:1,class:"p-4 flex flex-col gap-4"},Ce={class:"bg-white rounded-lg p-4 shadow-sm"},Ie={class:"text-center mb-2"},_e={class:"text-2xl font-bold text-green-600"},Ue={key:0,class:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4"},Pe={class:"flex items-center"},Ae={class:"ml-3"},De={class:"mt-2"},Ve={class:"mb-4"},ze=["disabled"],Fe={key:0,class:"flex items-center justify-center"},Re={key:1},Be={key:1,class:"bg-white rounded-lg p-4 shadow-sm"},Me={class:"mb-4"},Se=["max"],je={class:"mb-4"},Te={class:"flex items-center gap-2"},Ee=["disabled"],Qe={key:0,class:"flex items-center justify-center"},qe={key:1},We=["disabled"],He={key:0,class:"flex items-center justify-center"},$e={key:1},Oe={__name:"AddnWithdraw",setup(Ne){N.add(Y,L,G,J);const f=p("deposit"),z=H(),n=T(),k=p(null),C=p(!1),g=$(),i=E(),{user:x}=D(i),{fundAction:F}=D(g);Q(()=>{F.value==="withdraw"&&(f.value="withdraw")});const h=p(""),u=p(""),c=p(x.value.upi_id||""),m=p(""),r=p(!1),I=q(()=>x.value.funds||0),R=async()=>{if(h.value>0){const s=await g.addFunds(h.value);s.success?n.success(s.message):n.error(s.message),h.value=""}else n.error("Please enter an amount")},B=async()=>{if(u.value>50&&u.value<=I.value){const s=await g.withdrawFunds(u.value);s.success?n.success(s.message):n.error(s.message),u.value=""}else n.error("Please enter a valid amount")},P=async()=>{if(m.value.trim()){const s=await i.updateUpiId(m.value);s.success?(n.success(s.message),c.value=m.value):n.error(s.message),m.value=""}else n.error("Please enter a valid UPI ID")},A=async()=>{if(c.value.trim()){const s=await i.updateUpiId(c.value);s.success?n.success(s.message):n.error(s.message),r.value=!1}else n.error("Please enter a valid UPI ID")},M=()=>{z.back()},S=()=>{if(k.value){const s=document.createElement("a");s.download="payment_qr_code.jpeg",s.href=k.value.src,document.body.appendChild(s),s.click(),document.body.removeChild(s),n.success("QR Code downloaded successfully")}else n.error("Could not download QR Code")},j=()=>{navigator.clipboard.writeText("dprasadpandey0@okhdfcbank").then(()=>{C.value=!0,n.success("UPI ID copied to clipboard"),setTimeout(()=>{C.value=!1},2e3)}).catch(()=>{n.error("Failed to copy UPI ID")})};return(s,t)=>(l(),o("div",O,[e("div",{onClick:t[0]||(t[0]=a=>M()),class:"bg-orange-500 text-white p-3 flex items-center"},[_(d(U),{icon:"arrow-left",class:"mr-2"}),t[11]||(t[11]=e("span",{class:"font-medium"},"Fund Management",-1))]),e("div",X,[e("button",{onClick:t[1]||(t[1]=a=>f.value="deposit"),class:V(["flex-1 py-3 text-center font-medium",f.value==="deposit"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Add Fund ",2),e("button",{onClick:t[2]||(t[2]=a=>f.value="withdraw"),class:V(["flex-1 py-3 text-center font-medium",f.value==="withdraw"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Withdraw Fund ",2)]),f.value==="deposit"?(l(),o("div",Z,[d(x).upi_id?(l(),o("div",ie,[t[18]||(t[18]=e("div",{class:"text-lg font-medium mb-2"},"Add Funds to Your Account",-1)),e("div",re,[t[15]||(t[15]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"payment-amount"}," Payment Amount (₹) ",-1)),v(e("input",{type:"number",id:"payment-amount","onUpdate:modelValue":t[4]||(t[4]=a=>h.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter amount"},null,512),[[w,h.value]])]),e("div",ue,[t[17]||(t[17]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"account-number"}," From UPI ID: ",-1)),e("div",ce,[v(e("input",{type:"text",id:"account-number","onUpdate:modelValue":t[5]||(t[5]=a=>c.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:!r.value},null,8,me),[[w,c.value]]),r.value?y("",!0):(l(),o("button",{key:0,class:"text-blue-500 underline",onClick:t[6]||(t[6]=a=>r.value=!0)}," Edit ")),r.value?(l(),o("button",{key:1,class:"bg-green-500 text-white px-4 py-1 rounded",onClick:A},[d(i).loading?(l(),o("div",pe,t[16]||(t[16]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Saving... ")]))):(l(),o("span",fe,"Save"))])):y("",!0)])])])):(l(),o("div",ee,[e("div",te,[e("div",se,[t[14]||(t[14]=e("p",{class:"text-yellow-700 font-medium"}," Please add your UPI ID to enable Add funds ",-1)),e("div",oe,[e("div",le,[t[12]||(t[12]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"upi-id"}," UPI ID ",-1)),v(e("input",{type:"text",id:"upi-id","onUpdate:modelValue":t[3]||(t[3]=a=>m.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter your UPI ID"},null,512),[[w,m.value]])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:P,disabled:d(i).loading},[d(i).loading?(l(),o("div",ae,t[13]||(t[13]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Updating UPI ID... ")]))):(l(),o("span",de,"Update UPI ID"))],8,ne)])])])])),e("div",ge,[t[22]||(t[22]=e("div",{class:"font-medium text-center mb-3"},"Scan QR Code to Make Payment",-1)),e("div",ve,[e("img",{ref_key:"qrCodeImg",ref:k,class:"w-3/4",src:K,alt:"QR code"},null,512),e("button",{onClick:S,class:"absolute bottom-3 right-3 bg-white rounded-full p-2 shadow-md",title:"Download QR Code"},[_(d(U),{icon:"download",class:"text-gray-700"})])]),e("div",we,[t[20]||(t[20]=e("div",{class:"text-sm font-medium text-gray-700 mb-1"},"UPI ID:",-1)),e("div",be,[t[19]||(t[19]=e("div",{class:"flex-1 bg-gray-100 p-2 rounded-l-md truncate"}," dprasadpandey0@okhdfcbank ",-1)),e("button",{onClick:j,class:"bg-blue-500 text-white px-3 rounded-r-md flex items-center justify-center"},[_(d(U),{icon:C.value?"check":"copy",class:"text-white"},null,8,["icon"])])])]),t[23]||(t[23]=e("p",{class:"text-center text-gray-700 text-sm mb-4"}," Scan this QR to make payment and submit done button and your fund will be reflected in your account within 3 hours ",-1)),e("button",{class:"bg-green-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:R,disabled:d(g).loading},[d(g).loading?(l(),o("div",xe,t[21]||(t[21]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Requesting Add Funds ")]))):(l(),o("span",he,"Done"))],8,ye)])])):y("",!0),f.value==="withdraw"?(l(),o("div",ke,[e("div",Ce,[e("div",Ie,[t[24]||(t[24]=e("div",{class:"text-gray-600 text-sm"},"Your Available Balance",-1)),e("div",_e,"₹ "+W(d(x).funds),1)])]),d(x).upi_id?(l(),o("div",Be,[t[33]||(t[33]=e("div",{class:"text-lg font-medium mb-4"},"Withdraw Funds",-1)),e("div",Me,[t[28]||(t[28]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"withdraw-amount"}," Withdrawal Amount (₹) ",-1)),v(e("input",{type:"number",id:"withdraw-amount","onUpdate:modelValue":t[8]||(t[8]=a=>u.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter amount to withdraw",max:I.value},null,8,Se),[[w,u.value]]),t[29]||(t[29]=e("span",{style:{"font-size":"13px",color:"darkcyan"}},"Minimum Rs 50 can be withdrawn",-1))]),e("div",je,[t[31]||(t[31]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"account-number"}," To UPI ID: ",-1)),e("div",Te,[v(e("input",{type:"text",id:"account-number","onUpdate:modelValue":t[9]||(t[9]=a=>c.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:!r.value},null,8,Ee),[[w,c.value]]),r.value?y("",!0):(l(),o("button",{key:0,class:"text-blue-500 underline",onClick:t[10]||(t[10]=a=>r.value=!0)}," Edit ")),r.value?(l(),o("button",{key:1,class:"bg-green-500 text-white px-4 py-1 rounded",onClick:A},[d(i).loading?(l(),o("div",Qe,t[30]||(t[30]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Saving... ")]))):(l(),o("span",qe,"Save"))])):y("",!0)])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full disabled:bg-gray-400 disabled:cursor-not-allowed",onClick:B,disabled:u.value<50||u.value>I.value||!c.value||d(g).loading},[d(g).loading?(l(),o("div",He,t[32]||(t[32]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Requesting Withdrawal... ")]))):(l(),o("span",$e,"Request Withdrawal"))],8,We)])):(l(),o("div",Ue,[e("div",Pe,[e("div",Ae,[t[27]||(t[27]=e("p",{class:"text-yellow-700 font-medium"}," Please add your UPI ID to enable withdrawals ",-1)),e("div",De,[e("div",Ve,[t[25]||(t[25]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"upi-id"}," UPI ID ",-1)),v(e("input",{type:"text",id:"upi-id","onUpdate:modelValue":t[7]||(t[7]=a=>m.value=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter your UPI ID"},null,512),[[w,m.value]])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:P,disabled:d(i).loading},[d(i).loading?(l(),o("div",Fe,t[26]||(t[26]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Updating UPI ID... ")]))):(l(),o("span",Re,"Update UPI ID"))],8,ze)])])])]))])):y("",!0)]))}};export{Oe as default};
