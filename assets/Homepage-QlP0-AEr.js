import{_ as ee,u as te,r as m,a as se,s as L,B as oe,y as M,A as B,c as n,b as e,k as u,h as i,i as s,t as f,K as re,T as ne,F as p,d as v,p as y,o as l,l as le,n as ae,m as ie,D as de}from"./index-DDcDCMWo.js";import{l as ce,F as d}from"./index.es-8WPwLK2W.js";import{u as ue}from"./mainStore-C7UBCgh3.js";import{u as fe}from"./transactionStore-C53QusNc.js";import{m as me,p as he,q as ge,r as xe,s as pe,t as ve,u as be,v as _e,w as we,x as ye,y as ke,z as Ce,n as je,j as Le,A as Te,B as ze,C as Se,D as Ae,E as De,F as $e}from"./index-DHaoE_mB.js";import{f as Ie,a as Me}from"./fromUnixTime-DJExpFBG.js";import"./normalizeDates-D28e74vf.js";import"./en-US-ClfMaaVW.js";import"./differenceInSeconds-DCCrcfcw.js";const Be={key:0,class:"fixed inset-0 bg-gradient-to-r from-red-700 to-orange-600 flex justify-center items-center z-50"},He=["src"],Ve={key:1,class:"min-h-screen bg-gradient-to-b from-orange-50 via-red-50 to-orange-50"},Fe={class:"flex justify-between items-center p-4 bg-gradient-to-r from-orange-600 to-red-600 text-white shadow-lg"},Ee={class:"flex items-center"},Ne={class:"relative"},Ue=["src"],Re={class:"ml-4"},qe={class:"text-lg font-bold text-white"},Pe={key:0,class:"fixed top-0 left-0 w-3/4 h-full bg-gradient-to-b from-red-700 to-orange-800 p-6 z-50 shadow-lg"},We={class:"flex justify-between items-center mb-8"},Oe={class:"flex items-center"},Qe=["src"],Ge={class:"ml-4 text-white"},Je={class:"text-lg font-bold"},Ke={class:"bg-gradient-to-r from-orange-500 to-red-500 rounded-xl shadow-md text-white mb-6 overflow-hidden"},Ye={class:"p-4"},Xe={class:"flex items-center font-bold"},Ze={class:"ml-auto text-yellow-300 text-lg"},et={class:"grid grid-cols-2 gap-2 p-4 bg-red-600 bg-opacity-30"},tt={class:"text-white space-y-2 mb-8"},st=["onClick"],ot=["disabled"],rt={key:0},nt={key:1},lt={class:"p-4"},at={class:"text-xl font-bold text-red-900 mb-3 flex items-center"},it={class:"flex overflow-x-auto p-1 space-x-4 no-scrollbar"},dt=["onClick"],ct=["src","alt"],ut={class:"text-center font-bold text-sm mt-2 max-w-24 text-black-800"},ft={key:0,class:"px-4 mb-4"},mt={class:"bg-yellow-100 border-l-4 border-yellow-500 p-4 rounded-md"},ht={class:"text-red-900 font-semibold"},gt={class:"px-4 mb-6"},xt={class:"text-xl font-bold text-red-900 mb-3 flex items-center"},pt={class:"overflow-x-auto flex space-x-4 no-scrollbar"},vt={class:"relative w-full h-full group"},bt=["src","alt"],_t={class:"flex justify-center space-x-2 mt-4"},wt={class:"p-4 bg-white rounded-t-3xl shadow-inner"},yt={class:"flex justify-between items-center mb-4"},kt={class:"text-2xl font-bold text-red-900 flex items-center"},Ct={class:"space-y-4"},jt=["onClick"],Lt={class:"w-full pl-1 flex flex-col h-full"},Tt={class:"flex-shrink-0"},zt={class:"mb-2"},St={class:"text-sm font-bold text-gray-900 line-clamp-2 leading-tight hover:text-blue-600 transition-colors duration-200"},At={class:"mb-1.5 flex items-center justify-between"},Dt={class:"flex items-center"},$t={key:0,class:"text-white font-bold flex items-center bg-gradient-to-r from-red-500 to-red-600 px-3 py-1.5 rounded-full shadow-lg text-xs border-2 border-red-300"},It={key:1,class:"text-orange-600 flex items-center text-sm font-bold bg-orange-50 px-3 py-1.5 rounded-lg border border-orange-200"},Mt={class:"flex items-center space-x-3"},Bt={class:"flex items-center bg-gradient-to-r from-yellow-300 via-yellow-400 to-amber-400 px-3 py-1.5 rounded-xl shadow-lg border-2 border-yellow-200 transform hover:scale-105 transition-all duration-200"},Ht={class:"relative mr-2"},Vt={class:"text-amber-900 font-bold text-base tracking-wide"},Ft={key:0,class:"text-white font-bold px-3 py-1.5 bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 rounded-full shadow-lg text-xs border-2 border-green-300 transform hover:scale-105 transition-all duration-200 animate-pulse"},Et={class:"flex-grow flex flex-col justify-center space-y-3"},Nt={class:"flex items-center justify-between bg-gradient-to-r from-gray-50 to-gray-100 p-1.5 rounded-xl border border-gray-200 shadow-sm"},Ut={class:"flex items-center"},Rt={class:"bg-gray-200 p-2 rounded-full mr-3"},qt={class:"text-xs text-gray-800 font-bold"},Pt={class:"ml-2"},Wt=["onClick"],Ot={key:0,class:"mt-6 text-center"},Qt=["disabled"],Gt={key:0,class:"flex items-center justify-center"},Jt={key:1,class:"flex items-center justify-center"},Kt={__name:"Homepage",setup(Yt){ce.add(me,he,ge,xe,pe,ve,be,_e,we,ye,ke,Ce,je,Le,Te,ze,Se,Ae,De,$e);const h=ie(),H=te();de("config");const b=m(!1);m(0);const c=ue(),_=se(),V=fe(),{contests:k,categories:F,banners:E,loading:Xt,official_notice:N,official_notice_status:U,totalCount:R,hasShownVideo:T}=L(c),{user:g}=L(_),{fundAction:z}=L(V),q=oe(()=>R.value>k.value.length),C=m(!1),P=m("/videos/himpri_intro.mp4"),x=m(null),W=()=>{T.value||(C.value=!0,x.value=setTimeout(()=>{S()},3e3))},S=()=>{C.value=!1,T.value=!0,x.value&&clearTimeout(x.value)},O=()=>{S()},A=r=>{z.value=r,console.log(r),console.log(z.value),h.push("/dashboard/funds")},Q=r=>(typeof r=="string"?new Date(r):new Date(r*1e3)).toLocaleDateString("en-IN",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit",hour12:!0}),D=async r=>{await c.fetchCurrentContest(r),h.push("/quiz/variants")},G=async r=>{c.fetchQuizzesByCategory(r),h.push("/category/quiz/list")},J=()=>{c.fetchMoreContests()};M(()=>{W(),!(k.value.length>0)&&(c.fetchContests(),c.fetchCategories(),c.fetchHomeBanners(),c.fetchHowVideos())}),B(()=>{x.value&&clearTimeout(x.value)});const K=m([{text:"Refer & Earn",icon:"user",url:"dashboard/refernearn"},{text:"My Lifelines",icon:"phone",url:"dashboard/lifeline"},{text:"My Transactions",icon:"cash-register",url:"dashboard/transactions"},{text:"My Contests",icon:"gamepad",url:"dashboard/my-contests"},{text:"Lifeline History",icon:"history",url:"dashboard/lifeline-history"},{text:"Help & FAQs",icon:"question-circle",url:"faqs"},{text:"About Us",icon:"file-alt",url:"aboutus"},{text:"How to Play",icon:"gamepad",url:"how-to-play"},{text:"Terms & Conditions",icon:"file-alt",url:"terms"}]),Y=r=>{h.push(`/${r}`),b.value=!1},X=async()=>{const r=await _.logout();r.success?h.push("/auth/login"):H.error(r.message)},$=()=>b.value=!b.value,w=r=>{let t="/images/fallbackImage.png";return r&&(t=`https://api.himpri.com/storage/${r}`),t},Z=m(new Date);M(()=>{const r=setInterval(()=>{Z.value=new Date},6e4);B(()=>{clearInterval(r)})});function I(r){const t=Ie(Number(r));if(Date.now()>=t.getTime())return{isLive:!0,text:"LIVE"};{let a=Me(t,{addSuffix:!1});return a=a.replace(/^about\s/,""),{isLive:!1,text:`${a} left`}}}return(r,t)=>(l(),n("div",null,[C.value?(l(),n("div",Be,[e("video",{ref:"preloaderVideo",autoplay:"",muted:"",onEnded:O,class:"max-w-full max-h-full"},[e("source",{src:P.value,type:"video/mp4"},null,8,He),t[2]||(t[2]=u(" Your browser does not support the video tag. "))],544)])):(l(),n("div",Ve,[e("header",Fe,[e("button",{onClick:$,class:"p-3 rounded-full bg-red-500 hover:bg-red-400 transition-colors shadow-md"},[i(s(d),{icon:"bars",class:"text-2xl text-white"})]),e("div",Ee,[e("div",Ne,[e("img",{src:w(s(g).avatar),alt:"User Avatar",class:"w-16 h-16 rounded-full object-cover border-4 border-orange-300"},null,8,Ue),t[3]||(t[3]=e("div",{class:"absolute -bottom-1 -right-1 bg-green-400 w-4 h-4 rounded-full border-2 border-white"},null,-1))]),e("div",Re,[t[4]||(t[4]=e("p",{class:"text-orange-200 text-sm"},"Welcome back!",-1)),e("h1",qe,f(s(g).name),1)])])]),i(ne,{name:"slide-fade"},{default:re(()=>[b.value?(l(),n("aside",Pe,[e("div",We,[e("div",Oe,[e("img",{src:w(s(g).avatar),alt:"User Avatar",class:"w-12 h-12 rounded-full object-cover border-2 border-orange-300"},null,8,Qe),e("div",Ge,[e("h2",Je,f(s(g).name),1)])]),e("button",{onClick:$,class:"text-white hover:text-orange-200 bg-red-600 p-2 rounded-full"},[i(s(d),{icon:"times",class:"text-xl"})])]),e("div",Ke,[e("div",Ye,[e("p",Xe,[i(s(d),{icon:"wallet",class:"mr-2 text-yellow-300"}),t[5]||(t[5]=u(" My Balance ")),e("span",Ze,"â‚¹ "+f(s(g).funds||0),1)])]),e("div",et,[e("button",{onClick:t[0]||(t[0]=o=>A("withdraw")),class:"py-2 bg-red-700 hover:bg-red-600 text-white rounded-lg font-medium text-sm transition-colors flex items-center justify-center shadow-md"},[i(s(d),{icon:"arrow-up",class:"mr-2 text-red-300"}),t[6]||(t[6]=u(" WITHDRAW "))]),e("button",{onClick:t[1]||(t[1]=o=>A("deposit")),class:"py-2 bg-gradient-to-r from-yellow-500 to-yellow-400 hover:from-yellow-400 hover:to-yellow-300 text-red-900 rounded-lg font-medium text-sm transition-colors flex items-center justify-center shadow-md"},[i(s(d),{icon:"plus",class:"mr-2"}),t[7]||(t[7]=u(" ADD CASH "))])])]),e("ul",tt,[(l(!0),n(p,null,v(K.value,(o,a)=>(l(),n("li",{key:a,onClick:j=>Y(o.url),class:"flex items-center cursor-pointer p-3 rounded-lg hover:bg-red-600 transition-colors"},[i(s(d),{icon:o.icon,class:"mr-3 text-orange-300"},null,8,["icon"]),e("span",null,f(o.text),1)],8,st))),128))]),e("button",{onClick:X,disabled:s(_).loading,class:"w-full py-3 mt-auto rounded-lg bg-gradient-to-r from-red-600 to-orange-500 text-white font-bold flex items-center justify-center hover:from-red-700 hover:to-orange-600 transition-colors shadow-md"},[i(s(d),{icon:"sign-out-alt",class:"mr-3"}),s(_).loading?(l(),n("span",rt,"Logging out...")):(l(),n("span",nt,"Logout"))],8,ot)])):y("",!0)]),_:1}),e("div",lt,[e("h2",at,[i(s(d),{icon:"layer-group",class:"mr-2 text-orange-600"}),t[8]||(t[8]=u(" Categories "))]),e("div",it,[(l(!0),n(p,null,v(s(F),(o,a)=>(l(),n("div",{key:a,class:"flex flex-col items-center"},[e("div",{onClick:j=>G(o.id),class:"w-24 h-24 rounded-full overflow-hidden flex-shrink-0 border-4 border-white shadow-lg hover:shadow-xl transition-transform hover:scale-105",style:le(`box-shadow: 0 10px 15px -3px rgba(${220+a*5%35}, ${(80+a*10)%120}, 50, 0.4)`)},[e("img",{src:w(o.icon),alt:o.name,class:"w-full h-full object-cover"},null,8,ct)],12,dt),e("p",ut,f(o.name),1)]))),128))])]),s(U)?(l(),n("div",ft,[e("div",mt,[e("p",ht,f(s(N)),1)])])):y("",!0),e("div",gt,[e("h2",xt,[i(s(d),{icon:"star",class:"mr-2 text-yellow-500"}),t[9]||(t[9]=u(" Featured "))]),e("div",pt,[(l(!0),n(p,null,v(s(E),(o,a)=>(l(),n("div",{key:a,class:"flex-shrink-0 w-64 h-32 rounded-xl overflow-hidden shadow-lg"},[e("div",vt,[e("img",{src:w(o.banner_path),alt:o.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"},null,8,bt),t[10]||(t[10]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-red-900 via-transparent to-transparent opacity-60"},null,-1))])]))),128))]),e("div",_t,[(l(),n(p,null,v(3,(o,a)=>e("div",{key:a,class:ae(["h-2 rounded-full transition-all",a===1?"w-8 bg-orange-500":"w-2 bg-red-200"])},null,2)),64))])]),e("div",wt,[e("div",yt,[e("h2",kt,[i(s(d),{icon:"trophy",class:"mr-2 text-yellow-500"}),t[11]||(t[11]=u(" Upcoming Contests "))])]),e("div",Ct,[(l(!0),n(p,null,v(s(k),(o,a)=>(l(),n("div",{key:a,class:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl overflow-hidden shadow-md border border-orange-100 hover:shadow-lg transition-shadow"},[e("div",{onClick:j=>D(o.node_id),class:"flex p-4"},[e("div",Lt,[e("div",Tt,[e("div",zt,[e("h3",St,f(o.title),1)]),e("div",At,[e("div",Dt,[I(o.start_time).isLive?(l(),n("p",$t,t[12]||(t[12]=[e("span",{class:"inline-block h-2 w-2 rounded-full bg-white mr-2 animate-ping"},null,-1),e("span",{class:"relative z-10"},"LIVE",-1)]))):(l(),n("p",It,[i(s(d),{icon:"clock",class:"mr-2 text-sm animate-pulse"}),u(" "+f(I(o.start_time).text),1)]))]),e("div",Mt,[e("div",Bt,[e("div",Ht,[i(s(d),{icon:"medal",class:"text-amber-800 text-base drop-shadow-sm"}),t[13]||(t[13]=e("span",{class:"absolute inset-0 flex items-center justify-center text-white font-black text-xs",style:{"font-size":"8px",top:"1px"}},"1",-1))]),e("span",Vt,"â‚¹"+f(o.prize_money),1)]),o.entry_fees==0?(l(),n("span",Ft," FREE ")):y("",!0)])])]),e("div",Et,[e("div",Nt,[e("div",Ut,[e("div",Rt,[i(s(d),{icon:"lock",class:"text-gray-600 text-sm animate-pulse"})]),e("div",null,[t[14]||(t[14]=e("div",{class:"text-xs text-gray-500 font-medium"},"Closes at",-1)),e("div",qt,f(Q(o.end_time)),1)])]),e("div",Pt,[e("button",{class:"bg-gradient-to-r from-blue-500 via-purple-500 to-purple-600 text-white font-bold py-2 px-4 rounded-xl shadow-lg hover:from-blue-600 hover:via-purple-600 hover:to-purple-700 transform hover:scale-105 transition-all duration-300 text-xs border-2 border-blue-300 relative overflow-hidden group",onClick:j=>D(o.node_id)},[t[15]||(t[15]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-0 group-hover:opacity-20 group-hover:animate-pulse"},null,-1)),i(s(d),{icon:"play",class:"mr-2 animate-bounce"}),t[16]||(t[16]=e("span",{class:"relative z-10 tracking-wide"},"JOIN NOW",-1))],8,Wt)])])])])],8,jt)]))),128)),q.value?(l(),n("div",Ot,[e("button",{onClick:J,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:s(c).loading},[s(c).loading?(l(),n("span",Gt,t[17]||(t[17]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Loading... ")]))):(l(),n("span",Jt,[t[18]||(t[18]=u(" Load More ")),i(s(d),{icon:"chevron-down",class:"ml-2"})]))],8,Qt)])):y("",!0)])])]))]))}},is=ee(Kt,[["__scopeId","data-v-0af1cd6a"]]);export{is as default};
