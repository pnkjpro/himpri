import{u as z}from"./adminStore-5Ct7rppz.js";import{_ as C,s as N,u as A,r as u,y as T,c as t,b as e,i as l,F as k,d as g,k as y,h as V,p as B,t as i,o,x as M}from"./index-ChV2lZDu.js";const S={class:"admin-leaderboard-container"},q={key:0,class:"leaderboard-list-section"},D={key:0,class:"loading-indicator"},Q={key:1,class:"empty-state"},R={key:2,class:"leaderboard-grid"},$=["onClick"],j={class:"quiz-title"},F={class:"card-meta"},E={class:"top-rank-value"},H={key:3,class:"mt-6 text-center"},G=["disabled"],J={key:0,class:"flex items-center justify-center"},K={key:1,class:"flex items-center justify-center"},O={key:1,class:"leaderboard-detail-section"},P={class:"section-header"},U={key:0,class:"loading-indicator"},W={key:1,class:"empty-state"},X={key:2,class:"leaderboard-table-container"},Y={class:"leaderboard-table"},Z={class:"rank-cell"},I={__name:"AdminLeaderboard",setup(ee){const r=z(),{leaderboards:c,currentLeaderboard:m}=N(r),p=A(),v=u(1),f=u(!0),_=u(null),b=u(""),h=async()=>{const n=await r.listAdminLeaderboards(v.value);n.success?n.pagination?v.value=v.value+1:f.value=!1:p.error(n.message)},w=async n=>{_.value=n;const s=c.value.find(a=>a.quiz_id===n);b.value=s?s.title:"Quiz Leaderboard";const d=await r.showAdminLeaderboard({quiz_id:n});d.success||p.error(d.message)},L=()=>{_.value=null,m.value=[],b.value=""},x=n=>{if(!n)return"0s";const s=Math.floor(n/60),d=n%60;return s>0?`${s}m ${d}s`:`${d}s`};return T(()=>{h()}),(n,s)=>{const d=M("font-awesome-icon");return o(),t("div",S,[s[10]||(s[10]=e("h2",{class:"page-title"},"Quiz Leaderboards",-1)),_.value?(o(),t("div",O,[e("div",P,[e("button",{class:"back-btn",onClick:L}," â† Back to List "),e("h3",null,i(b.value),1)]),l(r).loading?(o(),t("div",U,s[7]||(s[7]=[e("p",null,"Loading leaderboard details...",-1)]))):l(m).length===0?(o(),t("div",W,s[8]||(s[8]=[e("p",null,"No participants in this leaderboard yet.",-1)]))):(o(),t("div",X,[e("table",Y,[s[9]||(s[9]=e("thead",null,[e("tr",null,[e("th",null,"Rank"),e("th",null,"Name"),e("th",null,"Score"),e("th",null,"Duration"),e("th",null,"Reward")])],-1)),e("tbody",null,[(o(!0),t(k,null,g(l(m),a=>(o(),t("tr",{key:a.rank},[e("td",Z,i(a.rank),1),e("td",null,i(a.name),1),e("td",null,i(a.score),1),e("td",null,i(x(a.duration)),1),e("td",null,i(a.reward||"None"),1)]))),128))])])]))])):(o(),t("div",q,[s[6]||(s[6]=e("div",{class:"section-header"},[e("h3",null,"Available Leaderboards")],-1)),l(r).loading&&!l(c).length?(o(),t("div",D,s[0]||(s[0]=[e("p",null,"Loading leaderboards...",-1)]))):l(c).length===0?(o(),t("div",Q,s[1]||(s[1]=[e("p",null,"No leaderboards available.",-1)]))):(o(),t("div",R,[(o(!0),t(k,null,g(l(c),a=>(o(),t("div",{key:a.quiz_id,class:"leaderboard-card",onClick:se=>w(a.quiz_id)},[e("h4",j,i(a.title),1),e("div",F,[s[2]||(s[2]=e("span",{class:"top-rank-label"},"Top Rank",-1)),e("span",E,i(a.top_user_name),1)]),s[3]||(s[3]=e("button",{class:"view-btn"},"View Details",-1))],8,$))),128))])),f.value?(o(),t("div",H,[e("button",{onClick:h,class:"px-8 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-full shadow-lg hover:from-blue-700 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:l(r).loading},[l(r).loading?(o(),t("span",J,s[4]||(s[4]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Loading... ")]))):(o(),t("span",K,[s[5]||(s[5]=y(" Load More ")),V(d,{icon:"chevron-down",class:"ml-2"})]))],8,G)])):B("",!0)]))])}}},ae=C(I,[["__scopeId","data-v-5c97dc2c"]]);export{ae as default};
