import{u as z}from"./mainStore-4WKHfxwP.js";import{u as R,a as T,s as p,y as x,c as s,b as t,h as A,i as o,t as i,F as $,d as j,o as n,m as B}from"./index-Cct8gG3X.js";import{l as C,F}from"./index.es-BiR9M0Ku.js";import{b as G}from"./index-Dj4gJ788.js";import{u as J}from"./transactionStore-BOwy7GUn.js";const q={class:"flex flex-col min-h-screen bg-gray-100"},I={class:"m-4"},N={class:"bg-white rounded-xl p-4 shadow-sm"},V={class:"text-3xl font-bold my-1"},D={class:"flex justify-between text-xs"},L={class:"text-gray-500"},O={class:"mx-4 my-2"},P={key:1,disabled:"",class:"w-full bg-stone-400 text-white py-3 rounded-lg font-medium"},E={key:2,disabled:"",class:"w-full bg-stone-400 text-white py-3 rounded-lg font-medium"},M={key:3,disabled:"",class:"w-full bg-stone-400 text-white py-3 rounded-lg font-medium"},Q=["disabled"],U={class:"overflow-y-auto flex-1"},W={class:"w-full"},H={class:"text-left py-3 px-6"},K={class:"text-right py-3 px-6 text-gray-700"},ot={__name:"GameDetail",setup(X){C.add(G);const u=B(),f=R(),v=z(),y=T(),c=J(),{contest:_,prizeContents:b,variant:a}=p(v),{user:h}=p(y),w=async r=>{const e=await c.joinGame(a.value.id);e.success?(f.success(e.message),u.push("/quiz/instruction")):f.error(e.message)},m=x(()=>h.value.user_responses.find(r=>r.node_id==_.value.node_id)||null),l=x(()=>m.value?m.value.quiz_variant_id===a.value.id?m.value.status:"disabled":"pending"),k=()=>{u.back()},S=r=>{u.push(r)};return console.log(b.value),(r,e)=>(n(),s("div",q,[t("div",{onClick:e[0]||(e[0]=d=>k()),class:"bg-orange-500 text-white p-3 flex items-center"},[A(o(F),{icon:"arrow-left",class:"mr-2"})]),t("div",I,[t("div",N,[e[4]||(e[4]=t("div",{class:"text-gray-500 text-sm"},"Prize Pool",-1)),t("div",V,"₹ "+i(o(a).prize),1),e[5]||(e[5]=t("div",{class:"h-1 bg-red-500 w-full my-1"},null,-1)),t("div",D,[e[3]||(e[3]=t("div",{class:"text-red-500"},"5 spot left",-1)),t("div",L,"Total Spot : "+i(o(a).slot_limit),1)])])]),t("div",O,[l.value=="joined"?(n(),s("button",{key:0,onClick:e[1]||(e[1]=d=>S("/quiz/instruction")),class:"w-full bg-green-500 text-white py-3 rounded-lg font-medium"}," Start Quiz ")):l.value=="disabled"?(n(),s("button",P," Joined Other Variant! ")):l.value=="initiated"?(n(),s("button",E," Game Already Started! ")):l.value=="completed"?(n(),s("button",M," Under Review! ")):(n(),s("button",{key:4,onClick:e[2]||(e[2]=d=>w(o(a).id)),class:"w-full bg-green-500 text-white py-3 rounded-lg font-medium",disabled:o(c).loading},i(o(c).loading?"Joining...":`JOIN ₹ ${o(a).entry_fee}`),9,Q))]),e[7]||(e[7]=t("div",{class:"flex border-b border-gray-200 mt-2"},[t("div",{class:"flex-1 text-center py-3 text-red-700 font-medium border-b-2 border-red-700"}," Winning ")],-1)),t("div",U,[t("table",W,[e[6]||(e[6]=t("thead",null,[t("tr",{class:"border-b border-gray-200"},[t("th",{class:"text-left py-4 px-6 text-red-700 font-medium"},"Rank"),t("th",{class:"text-right py-4 px-6 text-red-700 font-medium"},"Amount")])],-1)),t("tbody",null,[(n(!0),s($,null,j(o(b),(d,g)=>(n(),s("tr",{key:g,class:"border-b border-gray-100"},[t("td",H,"Rank "+i(g),1),t("td",K,"₹ "+i(d),1)]))),128))])])])]))}};export{ot as default};
