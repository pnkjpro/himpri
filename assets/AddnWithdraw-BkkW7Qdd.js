import{r as c,u as S,a as E,s as k,p as T,q as V,c as n,b as t,h as B,i as y,z as I,f as w,v as f,e as W,m as v,t as R,o as i,l as N}from"./index-C0AflpkF.js";import{u as $}from"./transactionStore-Dvx4bz0h.js";import{l as M,n as Q,F as q}from"./index-CUIeKds_.js";import"./mainStore-R-IA8lOE.js";const z={class:"flex flex-col min-h-screen bg-gray-100"},L={class:"flex border-b border-gray-200 bg-white"},Y={key:0,class:"p-4 flex flex-col gap-6"},j={class:"bg-white rounded-lg p-4 shadow-sm"},H={class:"mb-4"},O={key:1,class:"p-4 flex flex-col gap-4"},G={class:"bg-white rounded-lg p-4 shadow-sm"},J={class:"text-center mb-2"},K={class:"text-2xl font-bold text-green-600"},X={key:0,class:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4"},Z={class:"flex items-center"},ee={class:"ml-3"},te={class:"mt-2"},se={class:"mb-4"},oe={key:1,class:"bg-white rounded-lg p-4 shadow-sm"},re={class:"mb-4"},ae=["max"],le={class:"mb-4"},ne={class:"flex items-center gap-2"},ie=["disabled"],de=["disabled"],we={__name:"AddnWithdraw",setup(ue){M.add(Q);const l=c("deposit"),U=N(),o=S(),x=$(),b=E(),{user:h}=k(b),{fundAction:A}=k(x);T(()=>{A.value==="withdraw"&&(l.value="withdraw")});const m=c(""),a=c(""),d=c(h.value.upi_id||""),u=c(""),g=c(!1),p=V(()=>h.value.funds||0),_=async()=>{if(m.value){const s=await x.addFunds(m.value);s.success?o.success(s.message):o.error(s.message),m.value=""}else o.error("Please enter an amount")},P=async()=>{if(a.value>0&&a.value<=p.value){const s=await x.withdrawFunds(a.value);s.success?o.success(s.message):o.error(s.message),a.value=""}else o.error("Please enter an amount")},C=async()=>{if(u.value.trim()){const s=await b.updateUpiId(u.value);s.success?(o.success(s.message),d.value=u.value):o.error(s.message),u.value=""}else o.error("Please enter a valid UPI ID")},D=async()=>{if(d.value.trim()){const s=await b.updateUpiId(d.value);s.success?o.success(s.message):o.error(s.message),g.value=!1}else o.error("Please enter a valid UPI ID")},F=()=>{U.back()};return(s,e)=>(i(),n("div",z,[t("div",{onClick:e[0]||(e[0]=r=>F()),class:"bg-orange-500 text-white p-3 flex items-center"},[B(y(q),{icon:"arrow-left",class:"mr-2"}),e[8]||(e[8]=t("span",{class:"font-medium"},"Fund Management",-1))]),t("div",L,[t("button",{onClick:e[1]||(e[1]=r=>l.value="deposit"),class:I(["flex-1 py-3 text-center font-medium",l.value==="deposit"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Add Fund ",2),t("button",{onClick:e[2]||(e[2]=r=>l.value="withdraw"),class:I(["flex-1 py-3 text-center font-medium",l.value==="withdraw"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Withdraw Fund ",2)]),l.value==="deposit"?(i(),n("div",Y,[t("div",j,[e[10]||(e[10]=t("div",{class:"text-lg font-medium mb-2"},"Add Funds to Your Account",-1)),t("div",H,[e[9]||(e[9]=t("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"payment-amount"}," Payment Amount (₹) ",-1)),w(t("input",{type:"number",id:"payment-amount","onUpdate:modelValue":e[3]||(e[3]=r=>m.value=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter amount"},null,512),[[f,m.value]])])]),t("div",{class:"bg-white rounded-lg p-4 shadow-sm flex flex-col items-center"},[e[11]||(e[11]=W('<div class="font-medium text-center mb-3">Scan QR Code to Make Payment</div><div class="bg-gray-100 p-3 rounded-lg w-56 h-56 mb-3 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="w-full h-full"><rect x="0" y="0" width="200" height="200" fill="#fff"></rect><g fill="#000"><rect x="20" y="20" width="30" height="30"></rect><rect x="150" y="20" width="30" height="30"></rect><rect x="20" y="150" width="30" height="30"></rect><rect x="60" y="60" width="80" height="80"></rect><rect x="60" y="20" width="10" height="10"></rect><rect x="80" y="20" width="10" height="10"></rect><rect x="110" y="20" width="10" height="10"></rect><rect x="130" y="20" width="10" height="10"></rect><rect x="20" y="60" width="10" height="10"></rect><rect x="20" y="80" width="10" height="10"></rect><rect x="20" y="110" width="10" height="10"></rect><rect x="20" y="130" width="10" height="10"></rect><rect x="150" y="60" width="10" height="10"></rect><rect x="150" y="80" width="10" height="10"></rect><rect x="150" y="110" width="10" height="10"></rect><rect x="150" y="130" width="10" height="10"></rect><rect x="60" y="150" width="10" height="10"></rect><rect x="80" y="150" width="10" height="10"></rect><rect x="110" y="150" width="10" height="10"></rect><rect x="130" y="150" width="10" height="10"></rect></g></svg></div><p class="text-center text-gray-700 text-sm mb-4"> Scan this QR to make payment and submit done button and your fund will be reflected in your account within 3 hours </p>',3)),t("button",{class:"bg-green-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:_}," DONE ")])])):v("",!0),l.value==="withdraw"?(i(),n("div",O,[t("div",G,[t("div",J,[e[12]||(e[12]=t("div",{class:"text-gray-600 text-sm"},"Your Available Balance",-1)),t("div",K,"₹ "+R(y(h).funds),1)])]),y(h).upi_id?(i(),n("div",oe,[e[17]||(e[17]=t("div",{class:"text-lg font-medium mb-4"},"Withdraw Funds",-1)),t("div",re,[e[15]||(e[15]=t("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"withdraw-amount"}," Withdrawal Amount (₹) ",-1)),w(t("input",{type:"number",id:"withdraw-amount","onUpdate:modelValue":e[5]||(e[5]=r=>a.value=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter amount to withdraw",max:p.value},null,8,ae),[[f,a.value]])]),t("div",le,[e[16]||(e[16]=t("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"account-number"}," Account ID: ",-1)),t("div",ne,[w(t("input",{type:"text",id:"account-number","onUpdate:modelValue":e[6]||(e[6]=r=>d.value=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:!g.value},null,8,ie),[[f,d.value]]),g.value?v("",!0):(i(),n("button",{key:0,class:"text-blue-500 underline",onClick:e[7]||(e[7]=r=>g.value=!0)}," Edit ")),g.value?(i(),n("button",{key:1,class:"bg-green-500 text-white px-4 py-1 rounded",onClick:D}," Save ")):v("",!0)])]),t("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:P,disabled:a.value<=0||a.value>p.value||!d.value}," REQUEST WITHDRAWAL ",8,de)])):(i(),n("div",X,[t("div",Z,[t("div",ee,[e[14]||(e[14]=t("p",{class:"text-yellow-700 font-medium"}," Please add your UPI ID to enable withdrawals ",-1)),t("div",te,[t("div",se,[e[13]||(e[13]=t("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"upi-id"}," UPI ID ",-1)),w(t("input",{type:"text",id:"upi-id","onUpdate:modelValue":e[4]||(e[4]=r=>u.value=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter your UPI ID"},null,512),[[f,u.value]])]),t("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:C}," Update UPI ID ")])])])]))])):v("",!0)]))}};export{we as default};
