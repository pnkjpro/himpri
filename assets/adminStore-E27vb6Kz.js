import{G as S,r as u,H as n}from"./index-BAF0bM2U.js";const U=S("admin",()=>{const o=u(!1),f=u(null),d=u([]),i=u([]),g=u([]),p=u([]),v=u([]),m=u([]),l=u([]);async function h(r){var a,t;try{o.value=!0;const e=await n.post("/admin/category/create",r);return{success:e.data.success,message:e.data.message}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"An unexpected error occurred"}}finally{o.value=!1}}async function w(r){var a,t;try{o.value=!0;const e=await n.post("/admin/quiz/create",r);return o.value=!0,{success:e.data.success,message:e.data.message}}catch(e){return o.value=!0,console.error("Error using Lifeline:",e),{success:!1,message:((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function z(r=1){var a,t;try{o.value=!0;const e={page:r},s=await n.get("/admin/transaction/list/all",{params:e});return r===1?l.value=[...s.data.data.transactions]:l.value=[...l.value,...s.data.data.transactions],console.log(s.data.data.totalCount>l.value.length),{success:s.data.success,message:s.data.message,pagination:s.data.data.totalCount>l.value.length}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"An unexpected error occurred"}}finally{o.value=!1}}async function M(r,a){var t,e;try{console.log(r),o.value=!0;const s=await n.post("/admin/transaction/approval",{uid:r.user_id,approval_id:r.id,change_approval:a});if(s.data.success){const c={...r,approved_status:a},y=l.value.findIndex(Q=>Q.id===r.id);y!==-1&&(l.value[y]=c)}return{success:s.data.success,message:s.data.message}}catch(s){return console.error("Error using Lifeline:",s),{success:!1,message:((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"An unexpected error occurred"}}finally{o.value=!1}}const L=async(r=1)=>{var a,t;o.value=!0,f.value=null;try{const e={page:r},s=await n.get("/admin/list/leaderboards",{params:e});return r===1?d.value=s.data.data.leaderboards:d.value=[...d.value,...s.data.data.leaderboards],{success:s.data.success,message:s.data.message,pagination:s.data.data.totalCount>d.value.length}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"An unexpected error occurred"}}finally{o.value=!1}},A=async r=>{var a,t;o.value=!0,f.value=null;try{const e=await n.post("/admin/show/leaderboard",r);return m.value=e.data.data,{success:e.data.success,message:e.data.message}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"An unexpected error occurred"}}finally{o.value=!1}};async function x(r){try{o.value=!0;const a=await n.post("/admin/lifeline/update",r);return{success:a.data.success,message:a.data.message}}catch(a){return console.error("Error using Lifeline:",a),{success:!1,message:"Error updating Lifeline"}}finally{o.value=!1}}const E=()=>{d.value=[],m.value=[],f.value=null},b=async r=>{var a,t;o.value=!0;try{const e=await n.post("/admin/categories/update-order",{categories:r});return o.value=!1,e.data}catch(e){return o.value=!1,console.error("Error updating categories order:",e),{success:!1,message:((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to update category order"}}};async function C(r){var a,t;try{o.value=!0,console.log("pinia node id: ",r);const e=await n.get(`/admin/show/quiz/users?node_id=${r}`);return v.value=e.data.data,o.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return o.value=!1,console.error("Error showing users of quiz:",e),{success:!1,message:((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function q(r){var a,t;try{o.value=!0;const e=await n.get("/admin/show/user/quizzes",{user_id:r});return p.value=e.data.data,o.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return o.value=!1,console.error("Error showing quizzes by user:",e),{success:!1,message:((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function _(r=1){var a,t;try{o.value=!0;const e={page:r},s=await n.get("/admin/user/list",{params:e});return r===1?i.value=[...s.data.data.users]:i.value=[...i.value,...s.data.data.users],o.value=!1,{success:s.data.success,message:s.data.message,pagination:s.data.data.totalCount>i.value.length}}catch(e){return o.value=!1,console.error("Error showing user list:",e),{success:!1,message:((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function B(r=1,a=""){var t,e;try{o.value=!0;const s={page:r};a&&(s.category=a);const c=await n.get("/admin/quiz/list",{params:s});return r===1?g.value=c.data.data.quizzes:g.value=[...g.value,...c.data.data.quizzes],o.value=!1,{success:c.data.success,message:c.data.message,pagination:c.data.data.totalCount>g.value.length}}catch(s){return o.value=!1,console.error("Error showing user list:",s),{success:!1,message:((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"An unexpected error occurred"}}}return{createCategory:h,createQuiz:w,fetchTransactions:z,statusApproval:M,listAdminLeaderboards:L,showAdminLeaderboard:A,resetLeaderboardState:E,updateLifelineCost:x,updateCategorySorting:b,showUsersByQuiz:C,showQuizzesByUser:q,showUserList:_,showQuizList:B,quizzesByuser:p,usersByquiz:v,userList:i,quizList:g,allTransactions:l,leaderboards:d,currentLeaderboard:m,loading:o}});export{U as u};
