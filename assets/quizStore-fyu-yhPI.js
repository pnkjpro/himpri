import{G as z,r as u,m as q,u as A,s as E,H as d}from"./index-DPnwqptS.js";import{u as Q}from"./mainStore-CkFnAuxP.js";const K=z("playQuiz",()=>{const a=u(!1),i=u(null),v=q(),m=A(),c=u([]),l=u({}),p=u({userPoints:{score:0},totalParticipants:0,topPlayers:[]}),g=u([]),y=Q(),{contest:f,variant:M}=E(y);async function _(){var t,r;try{a.value=!0;const s=await d.post("/play",{node_id:f.value.node_id,variant_id:M.value.id});return console.log(s.data.data),s.data.success&&(l.value={...s.data.data}),a.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return a.value=!1,console.error("Error Responses:",s),{success:!1,message:((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"An unexpected error occurred"}}}async function h(t){var r,s,e,o;try{a.value=!0,i.value=null;const n=await d.post("/play/next",{node_id:f.value.node_id,question_id:l.value.id,answer_id:t});return(r=n.data.data)!=null&&r.flag&&((s=n.data.data)==null?void 0:s.is_nextQuestion)===!1?(m.success(n.data.data.message),v.push("/quiz/play/finished")):l.value={...n.data.data},a.value=!1,{success:n.data.success,message:n.data.message}}catch(n){return a.value=!1,console.error("Error Responses:",n),{success:!1,message:((o=(e=n.response)==null?void 0:e.data)==null?void 0:o.message)||"An unexpected error occurred"}}}async function w(t=1){var r,s;try{a.value=!0;const e={page:t},o=await d.get("/quiz/responses/list",{params:e});return t===1?c.value=o.data.data.responses:c.value=[...c.value,...o.data.data.responses],a.value=!1,{success:o.data.success,message:o.data.message,pagination:o.data.data.totalCount>c.value.length}}catch(e){return a.value=!1,console.error("Error Responses:",e),{success:!1,message:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function x(t){var r,s;try{a.value=!0;const e=await d.post("/quiz/leaderboard",{node_id:t});return p.value={...e.data.data},a.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return a.value=!1,console.error("Error Responses:",e),{success:!1,message:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function R(t){var r,s;try{a.value=!0;const e=await d.post("/quiz/user/answerKey",{node_id:t});return g.value={...e.data.data},a.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return a.value=!1,console.error("Error Responses:",e),{success:!1,message:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"An unexpected error occurred"}}}return{playQuiz:_,nextQuestion:h,getUserResponses:w,getLeaderboard:x,showAnswerKey:R,results:g,leaderboard:p,responses:c,question:l,loading:a,error:i}});export{K as u};
