import{_ as $,r,u as q,a as N,s as A,y as j,B as H,c as o,b as e,h as L,i as d,n as z,w as O,f as k,v as _,F as Y,d as Q,k as C,p,t as P,o as a,m as G}from"./index-BAF0bM2U.js";import{u as J}from"./transactionStore-CaBOn38b.js";import{l as K,F as X}from"./index.es-rBZ-VbIS.js";import{b as Z,c as ee,d as te,e as se}from"./index-BeD0zzHm.js";import"./mainStore-DzRnelYl.js";const oe={class:"flex flex-col min-h-screen bg-gray-100"},ae={class:"flex border-b border-gray-200 bg-white"},le={key:0,class:"p-4 flex flex-col gap-6"},ne={class:"payment-container bg-white rounded-lg p-4 shadow-sm"},re={class:"mb-4"},ie={class:"mb-4"},de={class:"flex flex-wrap gap-2"},ue=["onClick"],ce=["disabled"],me={key:0,class:"flex items-center justify-center"},pe={key:1},ve={key:1,class:"payment-success text-center p-6"},be={class:"mb-4 text-gray-600"},fe={key:2,class:"mt-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded"},ye={key:1,class:"p-4 flex flex-col gap-4"},ge={class:"bg-white rounded-lg p-4 shadow-sm"},we={class:"text-center mb-2"},xe={class:"text-2xl font-bold text-green-600"},he={key:0,class:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4"},ke={class:"flex items-center"},_e={class:"ml-3"},Ce={class:"mt-2"},Pe={class:"mb-4"},Ie=["disabled"],Ue={key:0,class:"flex items-center justify-center"},Ae={key:1},ze={key:1,class:"bg-white rounded-lg p-4 shadow-sm"},De={class:"mb-4"},Me=["max"],Ve={class:"mb-4"},Be={class:"flex items-center gap-2"},Se=["disabled"],Fe={key:0,class:"flex items-center justify-center"},We={key:1},Te=["disabled"],Re={key:0,class:"flex items-center justify-center"},Ee={key:1},$e={__name:"AddnWithdraw",setup(qe){K.add(Z,ee,te,se);const u=r("deposit"),D=G(),n=q(),y=J(),v=N(),{user:w}=A(v),{fundAction:M}=A(y);j(()=>{M.value==="withdraw"&&(u.value="withdraw")});const c=r(100),x=r(!1),m=r(""),h=r(!1),I=r({}),V=[50,100,200,500,1e3,2e3],B=async()=>{if(c.value<1){n.error("Amount should not be less than Rs 100");return}x.value=!0,m.value="";try{const s=await y.payWithRazorpay(c.value);s.success?(I.value={razorpay_payment_id:"pay_"+Math.random().toString(36).substr(2,9),...s.data},h.value=!0,n.success("Payment is successfully processed")):(m.value=s.message,n.error(s.message))}catch(s){m.value=s.message||"Payment failed. Please try again.",n.error(m.value)}finally{x.value=!1}},S=()=>{h.value=!1,I.value={},c.value=100,m.value=""},i=r(""),b=r(w.value.upi_id||""),f=r(""),g=r(!1),U=H(()=>w.value.funds||0),F=async()=>{if(i.value>=50&&i.value<=U.value){const s=await y.withdrawFunds(i.value);s.success?n.success(s.message):n.error(s.message),i.value=""}else n.error("Please enter a valid amount")},W=async()=>{if(f.value.trim()){const s=await v.updateUpiId(f.value);s.success?(n.success(s.message),b.value=f.value):n.error(s.message),f.value=""}else n.error("Please enter a valid UPI ID")},T=async()=>{if(b.value.trim()){const s=await v.updateUpiId(b.value);s.success?n.success(s.message):n.error(s.message),g.value=!1}else n.error("Please enter a valid UPI ID")},R=()=>{D.back()};return(s,t)=>(a(),o("div",oe,[e("div",{onClick:t[0]||(t[0]=l=>R()),class:"bg-orange-500 text-white p-3 flex items-center"},[L(d(X),{icon:"arrow-left",class:"mr-2"}),t[8]||(t[8]=e("span",{class:"font-medium"},"Fund Management",-1))]),e("div",ae,[e("button",{onClick:t[1]||(t[1]=l=>u.value="deposit"),class:z(["flex-1 py-3 text-center font-medium",u.value==="deposit"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Add Fund ",2),e("button",{onClick:t[2]||(t[2]=l=>u.value="withdraw"),class:z(["flex-1 py-3 text-center font-medium",u.value==="withdraw"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Withdraw Fund ",2)]),u.value==="deposit"?(a(),o("div",le,[e("div",ne,[t[16]||(t[16]=e("div",{class:"text-lg font-medium mb-4"},"Make Payment",-1)),h.value?p("",!0):(a(),o("form",{key:0,onSubmit:O(B,["prevent"])},[e("div",re,[t[9]||(t[9]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"amount"}," Amount (₹) ",-1)),k(e("input",{type:"number",id:"amount","onUpdate:modelValue":t[3]||(t[3]=l=>c.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",min:"1",placeholder:"Enter amount",required:""},null,512),[[_,c.value]]),t[10]||(t[10]=e("span",{class:"text-xs text-gray-500 mt-1 block"},"Minimum amount: ₹100",-1))]),e("div",ie,[t[11]||(t[11]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"}," Quick Options: ",-1)),e("div",de,[(a(),o(Y,null,Q(V,(l,E)=>e("button",{type:"button",key:E,onClick:Ne=>c.value=l,class:"px-4 py-2 border border-gray-300 rounded-md hover:bg-orange-100 hover:border-orange-300 transition-colors"}," ₹"+P(l),9,ue)),64))])]),e("button",{type:"submit",class:"bg-blue-500 text-white py-2 px-6 rounded-lg font-medium w-full disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:x.value||c.value<1},[x.value?(a(),o("div",me,t[12]||(t[12]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Processing... ")]))):(a(),o("span",pe,"Pay Now"))],8,ce)],32)),h.value?(a(),o("div",ve,[t[13]||(t[13]=e("div",{class:"success-icon mb-4 text-5xl text-green-500"},"✓",-1)),t[14]||(t[14]=e("h3",{class:"text-xl font-bold mb-2"},"Payment Successful!",-1)),t[15]||(t[15]=e("p",{class:"mb-2"},"Your payment has been processed successfully.",-1)),e("p",be,"Payment ID: "+P(I.value.razorpay_payment_id),1),e("button",{class:"bg-blue-500 text-white py-2 px-6 rounded-lg font-medium",onClick:S}," Make Another Payment ")])):p("",!0),m.value?(a(),o("div",fe,P(m.value),1)):p("",!0)])])):p("",!0),u.value==="withdraw"?(a(),o("div",ye,[e("div",ge,[e("div",we,[t[17]||(t[17]=e("div",{class:"text-gray-600 text-sm"},"Your Available Balance",-1)),e("div",xe,"₹ "+P(d(w).funds),1)])]),d(w).upi_id?(a(),o("div",ze,[t[26]||(t[26]=e("div",{class:"text-lg font-medium mb-4"},"Withdraw Funds",-1)),e("div",De,[t[21]||(t[21]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"withdraw-amount"}," Withdrawal Amount (₹) ",-1)),k(e("input",{type:"number",id:"withdraw-amount","onUpdate:modelValue":t[5]||(t[5]=l=>i.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter amount to withdraw",max:U.value},null,8,Me),[[_,i.value]]),t[22]||(t[22]=e("span",{style:{"font-size":"13px",color:"darkcyan"}},"Minimum Rs 50 can be withdrawn",-1))]),e("div",Ve,[t[24]||(t[24]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"account-number"}," To UPI ID: ",-1)),e("div",Be,[k(e("input",{type:"text",id:"account-number","onUpdate:modelValue":t[6]||(t[6]=l=>b.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:!g.value},null,8,Se),[[_,b.value]]),g.value?p("",!0):(a(),o("button",{key:0,class:"text-blue-500 underline",onClick:t[7]||(t[7]=l=>g.value=!0)}," Edit ")),g.value?(a(),o("button",{key:1,class:"bg-green-500 text-white px-4 py-1 rounded",onClick:T},[d(v).loading?(a(),o("div",Fe,t[23]||(t[23]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Saving... ")]))):(a(),o("span",We,"Save"))])):p("",!0)])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full disabled:bg-gray-400 disabled:cursor-not-allowed",onClick:F,disabled:i.value<50||i.value>U.value||!b.value||d(y).loading},[d(y).loading?(a(),o("div",Re,t[25]||(t[25]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Requesting Withdrawal... ")]))):(a(),o("span",Ee,"Request Withdrawal"))],8,Te)])):(a(),o("div",he,[e("div",ke,[e("div",_e,[t[20]||(t[20]=e("p",{class:"text-yellow-700 font-medium"}," Please add your UPI ID to enable withdrawals ",-1)),e("div",Ce,[e("div",Pe,[t[18]||(t[18]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"upi-id"}," UPI ID ",-1)),k(e("input",{type:"text",id:"upi-id","onUpdate:modelValue":t[4]||(t[4]=l=>f.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter your UPI ID"},null,512),[[_,f.value]])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:W,disabled:d(v).loading},[d(v).loading?(a(),o("div",Ue,t[19]||(t[19]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Updating UPI ID... ")]))):(a(),o("span",Ae,"Update UPI ID"))],8,Ie)])])])]))])):p("",!0)]))}},Qe=$($e,[["__scopeId","data-v-a3bc42e3"]]);export{Qe as default};
