import{u as q}from"./lifelineStore-BhJvP0rv.js";import{u as Q}from"./mainStore-IH74FEJm.js";import{u as F}from"./quizStore-DtHkJQK_.js";import{u as I,s as v,r as k,q as L,B as T,p as V,x as A,c as m,b as e,k as M,t as o,i as s,n as H,z as p,F as N,d as P,o as x,l as $,A as R}from"./index-Bx--kkJH.js";const D={class:"min-h-screen bg-gradient-to-b from-rose-300 to-rose-600 p-4 flex flex-col items-center"},E={class:"w-full max-w-md mb-8 mt-24"},O={class:"flex justify-between mb-2"},U={class:"bg-amber-400 flex items-center justify-center px-4 py-2 rounded-full"},G={class:"text-black font-bold flex items-center"},J={class:"bg-gray-300 rounded-full h-4"},K={class:"w-full max-w-md mb-4 flex justify-center space-x-4"},W=["disabled"],X={class:"text-sm"},Y=["disabled"],Z={class:"text-sm ml-1"},ee={class:"bg-white rounded-3xl p-6 w-full max-w-md shadow-lg"},te={class:"flex justify-between items-center mb-4"},se={class:"text-gray-800 text-xl font-bold"},oe={class:"flex items-center text-purple-600"},le={class:"text-xl font-bold"},ne={class:"text-4xl font-bold text-gray-800 mb-8"},ie={class:"space-y-4"},ae=["disabled","onClick"],me={__name:"PlayPage",setup(re){const h=$(),w=I(),c=F(),b=q(),j=Q(),{question:l}=v(c),{contest:g}=v(j),{removedOption:a}=v(b),n=R("lifeline"),r=k(30);let i=null;const _=k(g.value.totalQuestion),C=L(()=>l.value.id/_.value*100),f=()=>{clearInterval(i),r.value=30,i=setInterval(()=>{r.value>0?r.value--:(clearInterval(i),B())},1e3)},B=async()=>{await c.nextQuestion(null),h.push("/quiz/play/failed")},S=async d=>{clearInterval(i),a.value=[];const t=await c.nextQuestion(d);t.success||(w.error(t.message),h.push("/quiz/play/failed")),f()};T(l,()=>{f()},{deep:!0});const y=async d=>{a.value=[];const t=await b.useLifeline({lifeline_id:d,node_id:g.value.node_id,question_id:l.value.id});t.success||w.error(t.message)};return V(()=>{f()}),A(()=>{clearInterval(i)}),(d,t)=>(x(),m("div",D,[e("div",E,[e("div",O,[e("div",U,[e("span",G,[t[2]||(t[2]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5 3a2 2 0 012-2h6a2 2 0 012 2v1h2a2 2 0 012 2v11a2 2 0 01-2 2H3a2 2 0 01-2-2V6a2 2 0 012-2h2V3zm6 0H9v1h2V3z","clip-rule":"evenodd"})],-1)),M(" "+o(s(l).id)+" / "+o(_.value),1)])]),t[3]||(t[3]=e("div",{class:"bg-rose-500 flex items-center justify-center px-4 py-2 rounded-full"},[e("span",{class:"text-white font-bold flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})]),M(" 100 ")])],-1))]),e("div",J,[e("div",{class:"bg-white rounded-full h-4",style:H({width:C.value+"%"})},null,4)])]),e("div",K,[e("button",{class:p(["bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full flex items-center justify-center",{"opacity-50 cursor-not-allowed":!s(n).fiftyFifty}]),onClick:t[0]||(t[0]=u=>y(s(n).fiftyFifty.id)),disabled:!s(n).fiftyFifty},[e("span",X,o(s(n).fiftyFifty.alias),1)],10,W),e("button",{class:p(["bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full flex items-center justify-center",{"opacity-50 cursor-not-allowed":!s(n).skip}]),onClick:t[1]||(t[1]=u=>y(s(n).skip.id)),disabled:!s(n).skip},[t[4]||(t[4]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})],-1)),e("span",Z,o(s(n).skip.alias),1)],10,Y)]),e("div",ee,[e("div",te,[e("h2",se,"Question "+o(s(l).id)+" of 100",1),e("div",oe,[t[5]||(t[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",le,o(r.value),1)])]),e("h1",ne,o(s(l).id)+". "+o(s(l).question),1),(x(!0),m(N,null,P(s(l).options,(u,z)=>(x(),m("div",ie,[e("button",{class:p(["w-full py-4 px-6 border-2 border-rose-400 rounded-full text-rose-500 font-bold text-2xl hover:bg-rose-50 focus:outline-none focus:ring-2 focus:ring-rose-300",{"opacity-50 cursor-not-allowed":s(a)[z]!==void 0}]),disabled:s(a)[z]!==void 0,onClick:de=>S(u.id)},o(u.option),11,ae)]))),256))])]))}};export{me as default};
