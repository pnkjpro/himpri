import{u as F}from"./transactionStore-B1HXWJqB.js";import{l as N,F as w}from"./index.es-DCU6LWrN.js";import{b as H}from"./index-BeD0zzHm.js";import{r as p,u as I,a as P,s as L,y as R,c as s,b as t,h as v,i as n,n as u,p as c,F as A,d as D,k as x,o as a,t as l,m as $}from"./index-DzABwe1e.js";import"./mainStore-DtoOjFCa.js";const U={class:"flex flex-col min-h-screen bg-gray-100"},E={class:"flex border-b border-gray-200 bg-white"},W={key:0,class:"w-full overflow-x-auto rounded-lg shadow-sm"},q={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},J={key:0,class:"hover:bg-gray-50"},K={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},O={class:"px-4 py-4 whitespace-nowrap"},Q={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},X={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},Y={class:"px-4 py-4 whitespace-nowrap"},Z={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},tt={key:0,class:"py-8 text-center text-gray-500"},et={key:1,class:"my-4 text-center"},st=["disabled"],at={key:0,class:"flex items-center justify-center"},ot={key:1,class:"flex items-center justify-center"},rt={key:1,class:"w-full overflow-x-auto rounded-lg shadow-sm"},nt={class:"min-w-full divide-y divide-gray-200"},lt={class:"bg-white divide-y divide-gray-200"},it={key:0,class:"hover:bg-gray-50"},ct={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},dt={class:"px-4 py-4 whitespace-nowrap"},pt={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},ut={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},xt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},gt={key:0,class:"py-8 text-center text-gray-500"},ft={key:1,class:"my-4 text-center"},mt=["disabled"],yt={key:0,class:"flex items-center justify-center"},ht={key:1,class:"flex items-center justify-center"},Tt={__name:"MyTransactions",setup(wt){N.add(H);const d=p("fund_transactions"),M=$(),_=I(),g=p(1),f=p(1),m=p(!0),S=p(!0),i=F(),j=P();L(j);const{transactions:b,lifeline_transactions:y}=L(i);R(()=>{k()});const k=async()=>{const r=await i.getTransactions(g.value);r.success?r.pagination?g.value=g.value+1:m.value=!1:_.error("failed to fetch transactions")},z=r=>{switch(r){case"pending":return"Pending";case"approved":return"Approved";case"rejected":return"Rejected";default:return r.charAt(0).toUpperCase()+r.slice(1)}},B=r=>{switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=async()=>{d.value="lifeline_transactions";const r=await i.getLifelineTransactions(f.value);r.success?r.pagination?f.value=f.value+1:S.value=!1:_.error("failed to fetch transactions")},V=()=>{M.back()};return(r,e)=>(a(),s("div",U,[t("div",{onClick:e[0]||(e[0]=o=>V()),class:"bg-orange-500 text-white p-3 flex items-center"},[v(n(w),{icon:"arrow-left",class:"mr-2"}),e[2]||(e[2]=t("span",{class:"font-medium"},"Fund Transactions",-1))]),t("div",E,[t("button",{onClick:e[1]||(e[1]=o=>d.value="fund_transactions"),class:u(["flex-1 py-3 text-center font-medium",d.value==="deposit"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Fund Transactions ",2),t("button",{onClick:T,class:u(["flex-1 py-3 text-center font-medium",d.value==="withdraw"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Lifeline Transactions ",2)]),d.value==="fund_transactions"?(a(),s("div",W,[t("table",q,[e[4]||(e[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transaction Type"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),t("tbody",G,[n(i).loading?(a(),s("tr",J,e[3]||(e[3]=[t("td",{colspan:"4",class:"px-4 py-8 text-center"},[t("div",{class:"flex justify-center items-center space-x-2"},[t("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("span",{class:"text-sm text-gray-600"},"Loading transactions...")])],-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1)]))):c("",!0),(a(!0),s(A,null,D(n(b),(o,h)=>(a(),s("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",K,l(h+1),1),t("td",O,[t("span",{class:u(o.action==="deposit"?"text-green-600 font-medium":"text-red-600 font-medium")},l(o.action==="deposit"?"Deposit":"Withdrawal"),3)]),t("td",Q,l(o.amount),1),t("td",X,l(o.description||""),1),t("td",Y,[t("span",{class:u(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",B(o.approved_status)])},l(z(o.approved_status)),3)]),t("td",Z,l(C(o.created_at)),1)]))),128))])]),n(b).length===0?(a(),s("div",tt," No transactions available. ")):c("",!0),m.value?(a(),s("div",et,[t("button",{onClick:k,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:n(i).loading},[n(i).loading?(a(),s("span",at,e[5]||(e[5]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Loading... ")]))):(a(),s("span",ot,[e[6]||(e[6]=x(" Load More ")),v(n(w),{icon:"chevron-down",class:"ml-2"})]))],8,st)])):c("",!0)])):c("",!0),d.value==="lifeline_transactions"?(a(),s("div",rt,[t("table",nt,[e[8]||(e[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transaction Type"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),t("tbody",lt,[n(i).loading?(a(),s("tr",it,e[7]||(e[7]=[t("td",{colspan:"4",class:"px-4 py-8 text-center"},[t("div",{class:"flex justify-center items-center space-x-2"},[t("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("span",{class:"text-sm text-gray-600"},"Loading transactions...")])],-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1)]))):c("",!0),(a(!0),s(A,null,D(n(y),(o,h)=>(a(),s("tr",{key:n(y).id,class:"hover:bg-gray-50"},[t("td",ct,l(h+1),1),t("td",dt,[t("span",{class:u(o.type==="lifeline_purchase"?"text-green-600 font-medium":"text-red-600 font-medium")},l(o.type==="lifeline_purchase"?"Lifeline Purchased":""),3)]),t("td",pt,l(o.amount),1),t("td",ut,l(o.description||""),1),t("td",xt,l(C(o.created_at)),1)]))),128))])]),n(y).length===0?(a(),s("div",gt," No transactions available. ")):c("",!0),m.value?(a(),s("div",ft,[t("button",{onClick:T,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:n(i).loading},[n(i).loading?(a(),s("span",yt,e[9]||(e[9]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Loading... ")]))):(a(),s("span",ht,[e[10]||(e[10]=x(" Load More ")),v(n(w),{icon:"chevron-down",class:"ml-2"})]))],8,mt)])):c("",!0)])):c("",!0)]))}};export{Tt as default};
