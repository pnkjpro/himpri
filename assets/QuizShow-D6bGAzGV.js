import{u as B}from"./adminStore-C1u0r_DG.js";import{s as L,r as _,B as w,c as l,i as r,b as t,t as o,F as x,d as p,k,p as g,o as d,n as m,q as T,m as M}from"./index-D00MEL__.js";import{u as f}from"./helperStore-BVyT_Z3y.js";import"./en-US-ClfMaaVW.js";import"./differenceInCalendarDays-BuUWmaRV.js";import"./normalizeDates-MJlMPps6.js";const P={class:"container mx-auto px-4 py-8"},U={key:0,class:"flex justify-center items-center h-64"},R={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},$={key:2},I={class:"bg-white shadow rounded-lg p-6 mb-6"},N={class:"flex flex-col md:flex-row justify-between items-start md:items-center"},V={class:"text-2xl font-bold text-gray-800"},E={class:"text-gray-600 mt-1"},F={class:"mt-4 md:mt-0"},O={class:"bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full"},H={class:"bg-blue-100 text-blue-800 text-sm font-medium ml-2 px-3 py-1 rounded-full"},W={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},G={class:"bg-white shadow rounded-lg p-6"},J={class:"grid grid-cols-2 gap-4"},K={class:"text-gray-900"},X={class:"text-gray-900"},Y={class:"text-gray-900"},Z={class:"text-gray-900"},tt={class:"text-gray-900"},et={class:"text-gray-900"},st={class:"bg-white shadow rounded-lg p-6"},ot={class:"space-y-3"},it={class:"text-gray-900"},nt={class:"text-gray-900"},rt={class:"text-gray-900"},lt={class:"text-gray-900"},dt={class:"bg-white shadow rounded-lg p-6"},at={class:"space-y-3"},ut={class:"text-gray-900"},ct={class:"text-gray-900"},mt={class:"text-gray-900"},xt={class:"bg-white shadow rounded-lg p-6 mb-6"},pt={class:"flex justify-between items-start"},gt={class:"text-lg font-medium"},_t={class:"bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded"},ft={class:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},yt={class:"flex items-center"},vt={key:0,class:"ml-2 text-xs text-green-600 font-medium"},bt={class:"bg-white shadow rounded-lg p-6"},ht={class:"overflow-x-auto"},wt={class:"min-w-full divide-y divide-gray-200"},kt={class:"bg-white divide-y divide-gray-200"},zt={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"text-sm font-medium text-gray-900"},Qt={class:"text-sm text-gray-500"},qt={class:"px-6 py-4 whitespace-nowrap"},At={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"text-sm text-gray-900"},St={key:0,class:"text-xs text-gray-500"},jt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Bt={key:0},Lt={key:1},Tt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Mt=["onClick","disabled"],Pt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},Ut={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto"},Rt={class:"p-6 border-b"},$t={class:"flex justify-between items-center"},It={class:"text-xl font-semibold text-gray-900"},Nt={class:"p-6"},Vt={class:"mb-4"},Et={class:"mb-4"},Ft={key:0,class:"space-y-4"},Ot={class:"flex items-start justify-between"},Ht={class:"font-medium"},Wt={class:"mt-2"},Gt={key:0,class:"mt-1 text-red-600"},Jt={key:0,class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},Kt={key:1,class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},Xt={key:1,class:"text-center p-6 text-gray-500"},ne={__name:"QuizShow",setup(Yt){const y=B(),{usersByquiz:i}=L(y);_(!0);const v=_(null);T();const z=M(),c=_(null),C=w(()=>{var n;return((n=i.value.user_responses)==null?void 0:n.filter(e=>e.status==="completed").length)||0});w(()=>{if(!i.value.user_responses||i.value.user_responses.length===0)return 0;const n=i.value.user_responses.filter(s=>s.status==="completed");return n.length===0?0:n.reduce((s,a)=>s+a.score,0)/n.length});function b(n,e){if(!n||!e||n===0||e===0)return"--";const s=e-n,a=Math.floor(s/60),u=s%60;return`${a}m ${u}s`}function Q(n){if(!n||n===0)return"--";const e=Math.floor(n/60),s=n%60;return`${e}m ${s}s`}function h(n,e){return e?Math.round(n/e*100):0}function q(n){n.status==="completed"&&(c.value=n)}function A(n){const e=i.value.quizContents.find(s=>s.id===n);return e?e.question:"Unknown question"}function D(n,e){const s=i.value.quizContents.find(u=>u.id===n);if(!s)return"Unknown option";const a=s.options.find(u=>u.id===e);return a?a.option:"Unknown option"}function S(n){const e=i.value.quizContents.find(a=>a.id===n);if(!e)return"Unknown";const s=e.options.find(a=>a.id===e.correctAnswerId);return s?s.option:"Unknown"}const j=()=>{z.back()};return(n,e)=>(d(),l("div",P,[r(y).loading?(d(),l("div",U,e[2]||(e[2]=[t("div",{class:"text-center"},[t("div",{class:"spinner-border text-primary mb-3",role:"status"}),t("p",null,"Loading quiz data...")],-1)]))):v.value?(d(),l("div",R,[t("p",null,o(v.value),1)])):(d(),l("div",$,[t("header",I,[t("button",{onClick:e[0]||(e[0]=s=>j()),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 mb-4 py-2 rounded-md flex items-center"},e[3]||(e[3]=[t("span",{class:"mr-2"},"Back To Quiz List",-1)])),t("div",N,[t("div",null,[t("h1",V,o(r(i).title),1),t("p",E,o(r(i).description),1)]),t("div",F,[t("span",O,o(r(i).is_active==1?"Active":"Inactive"),1),t("span",H," Node ID: "+o(r(i).node_id),1)])])]),t("div",W,[t("div",G,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quiz Information",-1)),t("div",J,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-500"},"Entry Fee",-1)),t("p",K,"₹"+o(r(i).entry_fees),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-500"},"Prize Money",-1)),t("p",X,"₹"+o(r(i).prize_money),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-500"},"Questions",-1)),t("p",Y,o(r(i).totalQuestion),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-500"},"Time Per Question",-1)),t("p",Z,o(r(i).quiz_timer)+" seconds",1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-500"},"Participant Limit",-1)),t("p",tt,o(r(i).spot_limit),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-500"},"Winners",-1)),t("p",et,o(r(i).winners),1)])])]),t("div",st,[e[15]||(e[15]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quiz Timing",-1)),t("div",ot,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-500"},"Start Time",-1)),t("p",it,o(r(f)().formatDate(r(i).start_time)),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-500"},"End Time",-1)),t("p",nt,o(r(f)().formatDate(r(i).end_time)),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-500"},"Quiz Over At",-1)),t("p",rt,o(r(f)().formatDate(r(i).quiz_over_at)),1)]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-500"},"Duration",-1)),t("p",lt,o(Q(r(i).totalQuestion*r(i).quiz_timer)),1)])])]),t("div",dt,[e[19]||(e[19]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quiz Statistics",-1)),t("div",at,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Participants",-1)),t("p",ut,o(r(i).user_responses.length),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm font-medium text-gray-500"},"Completed Attempts",-1)),t("p",ct,o(C.value),1)]),t("div",null,[e[18]||(e[18]=t("p",{class:"text-sm font-medium text-gray-500"},"Prize Distribution",-1)),t("p",mt,o(r(i).is_prize_distributed==1?"Completed":"Pending"),1)])])])]),t("div",xt,[e[20]||(e[20]=t("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Quiz Questions",-1)),(d(!0),l(x,null,p(r(i).quizContents,(s,a)=>(d(),l("div",{key:a,class:"mb-6 p-4 border rounded-lg"},[t("div",pt,[t("h3",gt,o(a+1)+". "+o(s.question),1),t("span",_t," ID: "+o(s.id),1)]),t("div",ft,[(d(!0),l(x,null,p(s.options,u=>(d(),l("div",{key:u.id,class:m(["p-2 rounded border",u.id===s.correctAnswerId?"bg-green-50 border-green-200":""])},[t("div",yt,[t("span",{class:m(["h-5 w-5 flex items-center justify-center rounded-full border mr-2",u.id===s.correctAnswerId?"bg-green-500 text-white border-green-500":""])},o(u.id),3),t("span",null,o(u.option),1),u.id===s.correctAnswerId?(d(),l("span",vt," (Correct Answer) ")):g("",!0)])],2))),128))])]))),128))]),t("div",bt,[e[22]||(e[22]=t("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Participant Results",-1)),t("div",ht,[t("table",wt,[e[21]||(e[21]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Score "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Duration ")])],-1)),t("tbody",kt,[(d(!0),l(x,null,p(r(i).user_responses,(s,a)=>(d(),l("tr",{key:a},[t("td",zt,[t("div",null,[t("div",Ct,o(s.user.name),1),t("div",Qt,o(s.user.email),1)])]),t("td",qt,[t("span",{class:m(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.status==="completed","bg-yellow-100 text-yellow-800":s.status==="joined"}])},o(s.status),3)]),t("td",At,[t("div",Dt,o(s.score)+" / "+o(r(i).totalQuestion),1),s.status==="completed"?(d(),l("div",St,o(h(s.score,r(i).totalQuestion))+"% ",1)):g("",!0)]),t("td",jt,[s.started_at>0?(d(),l("div",Bt,o(b(s.started_at,s.ended_at)),1)):(d(),l("div",Lt,"--"))]),t("td",Tt,[t("button",{onClick:u=>q(s),disabled:s.status!=="completed",class:"text-indigo-600 hover:text-indigo-900 disabled:text-gray-400"}," View Answers ",8,Mt)])]))),128))])])])]),c.value?(d(),l("div",Pt,[t("div",Ut,[t("div",Rt,[t("div",$t,[t("h3",It,o(c.value.user.name)+"'s Responses ",1),t("button",{onClick:e[1]||(e[1]=s=>c.value=null),class:"text-gray-400 hover:text-gray-500"},e[23]||(e[23]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),t("div",Nt,[t("div",Vt,[e[24]||(e[24]=t("span",{class:"font-medium"},"Score:",-1)),k(" "+o(c.value.score)+" / "+o(r(i).totalQuestion)+" ("+o(h(c.value.score,r(i).totalQuestion))+"%) ",1)]),t("div",Et,[e[25]||(e[25]=t("span",{class:"font-medium"},"Time Taken:",-1)),k(" "+o(b(c.value.started_at,c.value.ended_at)),1)]),c.value.responseContents?(d(),l("div",Ft,[(d(!0),l(x,null,p(c.value.responseContents,(s,a)=>(d(),l("div",{key:a,class:m(["p-4 border rounded-lg",{"bg-green-50":s.is_correct,"bg-red-50":!s.is_correct}])},[t("div",Ot,[t("div",null,[t("h4",Ht," Question "+o(s.question_id)+": "+o(A(s.question_id)),1),t("p",Wt," Selected Answer: "+o(D(s.question_id,s.answer_id)),1),s.is_correct?g("",!0):(d(),l("p",Gt," Correct Answer: "+o(S(s.question_id)),1))]),t("span",{class:m(["inline-flex items-center justify-center h-8 w-8 rounded-full",{"bg-green-100 text-green-800":s.is_correct,"bg-red-100 text-red-800":!s.is_correct}])},[s.is_correct?(d(),l("svg",Jt,e[26]||(e[26]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(d(),l("svg",Kt,e[27]||(e[27]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])))],2)])],2))),128))])):(d(),l("div",Xt," No response data available "))])])])):g("",!0)]))]))}};export{ne as default};
