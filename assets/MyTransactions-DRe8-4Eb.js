import{u as R}from"./transactionStore-CiWU6ijC.js";import{l as H,F as w}from"./index.es-DiWTKObd.js";import{b as I}from"./index-DHaoE_mB.js";import{r as p,u as P,a as U,s as L,y as $,c as r,b as e,h as v,i as n,n as u,p as c,F as A,d as z,k as x,o,t as l,m as q}from"./index-BdeprHb9.js";import"./mainStore-B4QZfEKL.js";const E={class:"flex flex-col min-h-screen bg-gray-100"},O={class:"flex border-b border-gray-200 bg-white"},Q={key:0,class:"w-full overflow-x-auto rounded-lg shadow-sm"},W={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},J={key:0,class:"hover:bg-gray-50"},K={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},X={class:"px-4 py-4 whitespace-nowrap"},Y={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},Z={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},ee={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},te={class:"px-4 py-4 whitespace-nowrap"},se={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},ae={key:0,class:"py-8 text-center text-gray-500"},re={key:1,class:"my-4 text-center"},oe=["disabled"],ne={key:0,class:"flex items-center justify-center"},le={key:1,class:"flex items-center justify-center"},ie={key:1,class:"w-full overflow-x-auto rounded-lg shadow-sm"},ce={class:"min-w-full divide-y divide-gray-200"},de={class:"bg-white divide-y divide-gray-200"},pe={key:0,class:"hover:bg-gray-50"},ue={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},xe={class:"px-4 py-4 whitespace-nowrap"},fe={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},ge={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},me={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},ye={key:0,class:"py-8 text-center text-gray-500"},he={key:1,class:"my-4 text-center"},we=["disabled"],ve={key:0,class:"flex items-center justify-center"},_e={key:1,class:"flex items-center justify-center"},ze={__name:"MyTransactions",setup(be){H.add(I);const d=p("fund_transactions"),D=q(),_=P(),f=p(1),g=p(1),m=p(!0),M=p(!0),i=R(),S=U();L(S);const{transactions:b,lifeline_transactions:y}=L(i);$(()=>{k()});const k=async()=>{const s=await i.getTransactions(f.value);s.success?s.pagination?f.value=f.value+1:m.value=!1:_.error("failed to fetch transactions")},j=s=>{switch(s){case"pending":return"Pending";case"approved":return"Approved";case"rejected":return"Rejected";default:return s.charAt(0).toUpperCase()+s.slice(1)}},B=s=>{switch(s){case"deposit":case"referred_reward":case"quiz_reward":return"text-green-600 font-medium";case"withdrawal":return"text-red-600 font-medium";default:return"text-gray-600 font-medium"}},V=s=>{switch(s){case"deposit":return"Deposit";case"withdrawal":return"Withdrawal";case"referred_reward":return"Referral Reward";case"quiz_reward":return"Quiz Reward";default:return s.charAt(0).toUpperCase()+s.slice(1)}},F=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=async()=>{d.value="lifeline_transactions";const s=await i.getLifelineTransactions(g.value);s.success?s.pagination?g.value=g.value+1:M.value=!1:_.error("failed to fetch transactions")},N=()=>{D.back()};return(s,t)=>(o(),r("div",E,[e("div",{onClick:t[0]||(t[0]=a=>N()),class:"bg-orange-500 text-white p-3 flex items-center"},[v(n(w),{icon:"arrow-left",class:"mr-2"}),t[2]||(t[2]=e("span",{class:"font-medium"},"Fund Transactions",-1))]),e("div",O,[e("button",{onClick:t[1]||(t[1]=a=>d.value="fund_transactions"),class:u(["flex-1 py-3 text-center font-medium",d.value==="deposit"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Fund Transactions ",2),e("button",{onClick:T,class:u(["flex-1 py-3 text-center font-medium",d.value==="withdraw"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Lifeline Transactions ",2)]),d.value==="fund_transactions"?(o(),r("div",Q,[e("table",W,[t[4]||(t[4]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transaction Type"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Order ID"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),e("tbody",G,[n(i).loading?(o(),r("tr",J,t[3]||(t[3]=[e("td",{colspan:"4",class:"px-4 py-8 text-center"},[e("div",{class:"flex justify-center items-center space-x-2"},[e("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-sm text-gray-600"},"Loading transactions...")])],-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1)]))):c("",!0),(o(!0),r(A,null,z(n(b),(a,h)=>(o(),r("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",K,l(h+1),1),e("td",X,[e("span",{class:u(B(a.action))},l(V(a.action)),3)]),e("td",Y,l(a.amount),1),e("td",Z,l(a.description||""),1),e("td",ee,l(a.razorpay_order_id||""),1),e("td",te,[e("span",{class:u(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",F(a.approved_status)])},l(j(a.approved_status)),3)]),e("td",se,l(C(a.created_at)),1)]))),128))])]),n(b).length===0?(o(),r("div",ae," No transactions available. ")):c("",!0),m.value?(o(),r("div",re,[e("button",{onClick:k,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:n(i).loading},[n(i).loading?(o(),r("span",ne,t[5]||(t[5]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Loading... ")]))):(o(),r("span",le,[t[6]||(t[6]=x(" Load More ")),v(n(w),{icon:"chevron-down",class:"ml-2"})]))],8,oe)])):c("",!0)])):c("",!0),d.value==="lifeline_transactions"?(o(),r("div",ie,[e("table",ce,[t[8]||(t[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transaction Type"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),e("tbody",de,[n(i).loading?(o(),r("tr",pe,t[7]||(t[7]=[e("td",{colspan:"4",class:"px-4 py-8 text-center"},[e("div",{class:"flex justify-center items-center space-x-2"},[e("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-sm text-gray-600"},"Loading transactions...")])],-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1)]))):c("",!0),(o(!0),r(A,null,z(n(y),(a,h)=>(o(),r("tr",{key:n(y).id,class:"hover:bg-gray-50"},[e("td",ue,l(h+1),1),e("td",xe,[e("span",{class:u(a.type==="lifeline_purchase"?"text-green-600 font-medium":"text-red-600 font-medium")},l(a.type==="lifeline_purchase"?"Lifeline Purchased":""),3)]),e("td",fe,l(a.amount),1),e("td",ge,l(a.description||""),1),e("td",me,l(C(a.created_at)),1)]))),128))])]),n(y).length===0?(o(),r("div",ye," No transactions available. ")):c("",!0),m.value?(o(),r("div",he,[e("button",{onClick:T,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:n(i).loading},[n(i).loading?(o(),r("span",ve,t[9]||(t[9]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Loading... ")]))):(o(),r("span",_e,[t[10]||(t[10]=x(" Load More ")),v(n(w),{icon:"chevron-down",class:"ml-2"})]))],8,we)])):c("",!0)])):c("",!0)]))}};export{ze as default};
