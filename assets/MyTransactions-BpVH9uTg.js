import{u as F}from"./transactionStore-DZMG4JFV.js";import{l as N,F as w}from"./index.es-qPf2d6eU.js";import{b as H}from"./index-BeD0zzHm.js";import{r as p,u as I,a as P,s as L,y as R,c as a,b as t,h as v,i as n,n as u,p as c,F as D,d as A,k as x,o,t as l,m as $}from"./index-CRn1I0yW.js";import"./mainStore-EPclxcda.js";const U={class:"flex flex-col min-h-screen bg-gray-100"},E={class:"flex border-b border-gray-200 bg-white"},O={key:0,class:"w-full overflow-x-auto rounded-lg shadow-sm"},W={class:"min-w-full divide-y divide-gray-200"},q={class:"bg-white divide-y divide-gray-200"},G={key:0,class:"hover:bg-gray-50"},J={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},K={class:"px-4 py-4 whitespace-nowrap"},Q={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},X={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},Y={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},Z={class:"px-4 py-4 whitespace-nowrap"},tt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},et={key:0,class:"py-8 text-center text-gray-500"},st={key:1,class:"my-4 text-center"},at=["disabled"],ot={key:0,class:"flex items-center justify-center"},rt={key:1,class:"flex items-center justify-center"},nt={key:1,class:"w-full overflow-x-auto rounded-lg shadow-sm"},lt={class:"min-w-full divide-y divide-gray-200"},it={class:"bg-white divide-y divide-gray-200"},ct={key:0,class:"hover:bg-gray-50"},dt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},pt={class:"px-4 py-4 whitespace-nowrap"},ut={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},xt={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},gt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},ft={key:0,class:"py-8 text-center text-gray-500"},mt={key:1,class:"my-4 text-center"},yt=["disabled"],ht={key:0,class:"flex items-center justify-center"},wt={key:1,class:"flex items-center justify-center"},Lt={__name:"MyTransactions",setup(vt){N.add(H);const d=p("fund_transactions"),z=$(),_=I(),g=p(1),f=p(1),m=p(!0),M=p(!0),i=F(),S=P();L(S);const{transactions:b,lifeline_transactions:y}=L(i);R(()=>{k()});const k=async()=>{const r=await i.getTransactions(g.value);r.success?r.pagination?g.value=g.value+1:m.value=!1:_.error("failed to fetch transactions")},j=r=>{switch(r){case"pending":return"Pending";case"approved":return"Approved";case"rejected":return"Rejected";default:return r.charAt(0).toUpperCase()+r.slice(1)}},B=r=>{switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=async()=>{d.value="lifeline_transactions";const r=await i.getLifelineTransactions(f.value);r.success?r.pagination?f.value=f.value+1:M.value=!1:_.error("failed to fetch transactions")},V=()=>{z.back()};return(r,e)=>(o(),a("div",U,[t("div",{onClick:e[0]||(e[0]=s=>V()),class:"bg-orange-500 text-white p-3 flex items-center"},[v(n(w),{icon:"arrow-left",class:"mr-2"}),e[2]||(e[2]=t("span",{class:"font-medium"},"Fund Transactions",-1))]),t("div",E,[t("button",{onClick:e[1]||(e[1]=s=>d.value="fund_transactions"),class:u(["flex-1 py-3 text-center font-medium",d.value==="deposit"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Fund Transactions ",2),t("button",{onClick:T,class:u(["flex-1 py-3 text-center font-medium",d.value==="withdraw"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"])}," Lifeline Transactions ",2)]),d.value==="fund_transactions"?(o(),a("div",O,[t("table",W,[e[4]||(e[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transaction Type"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Order ID"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),t("tbody",q,[n(i).loading?(o(),a("tr",G,e[3]||(e[3]=[t("td",{colspan:"4",class:"px-4 py-8 text-center"},[t("div",{class:"flex justify-center items-center space-x-2"},[t("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("span",{class:"text-sm text-gray-600"},"Loading transactions...")])],-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1)]))):c("",!0),(o(!0),a(D,null,A(n(b),(s,h)=>(o(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",J,l(h+1),1),t("td",K,[t("span",{class:u(s.action==="deposit"?"text-green-600 font-medium":"text-red-600 font-medium")},l(s.action==="deposit"?"Deposit":"Withdrawal"),3)]),t("td",Q,l(s.amount),1),t("td",X,l(s.description||""),1),t("td",Y,l(s.razorpay_order_id||""),1),t("td",Z,[t("span",{class:u(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",B(s.approved_status)])},l(j(s.approved_status)),3)]),t("td",tt,l(C(s.created_at)),1)]))),128))])]),n(b).length===0?(o(),a("div",et," No transactions available. ")):c("",!0),m.value?(o(),a("div",st,[t("button",{onClick:k,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:n(i).loading},[n(i).loading?(o(),a("span",ot,e[5]||(e[5]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Loading... ")]))):(o(),a("span",rt,[e[6]||(e[6]=x(" Load More ")),v(n(w),{icon:"chevron-down",class:"ml-2"})]))],8,at)])):c("",!0)])):c("",!0),d.value==="lifeline_transactions"?(o(),a("div",nt,[t("table",lt,[e[8]||(e[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transaction Type"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),t("tbody",it,[n(i).loading?(o(),a("tr",ct,e[7]||(e[7]=[t("td",{colspan:"4",class:"px-4 py-8 text-center"},[t("div",{class:"flex justify-center items-center space-x-2"},[t("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("span",{class:"text-sm text-gray-600"},"Loading transactions...")])],-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1),t("td",null,null,-1)]))):c("",!0),(o(!0),a(D,null,A(n(y),(s,h)=>(o(),a("tr",{key:n(y).id,class:"hover:bg-gray-50"},[t("td",dt,l(h+1),1),t("td",pt,[t("span",{class:u(s.type==="lifeline_purchase"?"text-green-600 font-medium":"text-red-600 font-medium")},l(s.type==="lifeline_purchase"?"Lifeline Purchased":""),3)]),t("td",ut,l(s.amount),1),t("td",xt,l(s.description||""),1),t("td",gt,l(C(s.created_at)),1)]))),128))])]),n(y).length===0?(o(),a("div",ft," No transactions available. ")):c("",!0),m.value?(o(),a("div",mt,[t("button",{onClick:T,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:n(i).loading},[n(i).loading?(o(),a("span",ht,e[9]||(e[9]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Loading... ")]))):(o(),a("span",wt,[e[10]||(e[10]=x(" Load More ")),v(n(w),{icon:"chevron-down",class:"ml-2"})]))],8,yt)])):c("",!0)])):c("",!0)]))}};export{Lt as default};
