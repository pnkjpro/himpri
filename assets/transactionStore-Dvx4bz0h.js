import{L as y,r as n,u as M,A as x,s as d,a as E,I as S}from"./index-C0AflpkF.js";import{u as F}from"./mainStore-R-IA8lOE.js";const j=y("transaction",()=>{const t=n(!1),c=n([]);n(null),M();const l=x("config"),g=n(""),m=F(),{contests:I,contest:f,variant:N}=d(m),u=E(),{token:p,user:T}=d(u),o=S.create({baseURL:l.API_URL,withCredentials:!0,headers:{Authorization:`Bearer ${p.value}`}});async function v(a){var r,s;try{if(t.value=!0,!a||isNaN(a)||a<=0)throw new Error("Invalid amount. Please enter a valid positive number.");const e=await o.post("/funds/transaction",{action:"deposit",amount:a});return t.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return t.value=!1,console.error("Error Adding Fund:",e),{success:!1,message:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function h(a){var r,s;try{if(t.value=!0,!a||isNaN(a)||a<=0)throw new Error("Invalid amount. Please enter a valid positive number.");const e=await o.post("/funds/transaction",{action:"withdraw",amount:a});return t.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return t.value=!1,console.error("Error Withdrawing Fund:",e),{success:!1,message:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function w(a){var r,s;try{const e=await o.post("/play/quiz/join",{node_id:f.value.node_id,variant_id:a});return u.fetchUser(),t.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return t.value=!1,console.error("Error Joining Game:",e),{success:!1,message:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function A(){var a,r;try{const s=await o.get("/funds/transaction/list");return c.value=s.data.data,console.log("pinia: ",c.value),t.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return t.value=!1,console.error("Error Joining Game:",s),{success:!1,message:((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||"An unexpected error occurred"}}}return{fundAction:g,addFunds:v,withdrawFunds:h,joinGame:w,getTransactions:A,transactions:c}});export{j as u};
