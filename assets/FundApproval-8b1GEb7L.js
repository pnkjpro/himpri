import{u as x}from"./adminStore-BfnAEshI.js";import{_ as w,u as C,r as v,s as A,y as T,c as e,b as t,i as c,p as d,F as N,d as j,k as g,h as z,o as n,n as y,t as a,x as S}from"./index-BDLaA5_R.js";const V={class:"approval-dashboard"},B={class:"table-container"},D={class:"requests-table"},F={key:0},I={style:{"text-transform":"capitalize"}},L={style:{"text-transform":"capitalize"}},M={class:"action-buttons"},R=["onClick"],P=["onClick"],$={key:0,class:"mt-6 text-center"},E=["disabled"],H={key:0,class:"flex items-center justify-center"},U={key:1,class:"flex items-center justify-center"},G={__name:"FundApproval",setup(J){const u=C(),m=v(!0),p=v(1),r=x(),{allTransactions:_}=A(r);T(()=>{h()});const h=async()=>{const l=await r.fetchTransactions(p.value);l.success?(console.log("pagination: ",l.pagination),l.pagination?p.value=p.value+1:m.value=!1):u.error("failed to fetch transactions")},f=async(l,o)=>{const i=await r.statusApproval(l,o);i.success||u.error(i.message),u.success(i.message)};return(l,o)=>{const i=S("font-awesome-icon");return n(),e("div",V,[o[4]||(o[4]=t("div",{class:"dashboard-header"},[t("h2",null,"Customer Payment Requests")],-1)),t("div",B,[t("table",D,[o[1]||(o[1]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"UPI ID"),t("th",null,"Action"),t("th",null,"Amount"),t("th",null,"Transaction ID"),t("th",null,"Description"),t("th",null,"Status"),t("th",null,"Actions")])],-1)),t("tbody",null,[c(_).length===0?(n(),e("tr",F,o[0]||(o[0]=[t("td",{colspan:"6",class:"no-results"}," No requests found matching your filters. ",-1)]))):d("",!0),(n(!0),e(N,null,j(c(_),(s,b)=>(n(),e("tr",{key:b,class:y("status-"+s.approved_status)},[t("td",I,a(s.name),1),t("td",null,a(s.upi_id),1),t("td",L,a(s.action),1),t("td",null,"â‚¹"+a(s.amount),1),t("td",null,a(s.transaction_id),1),t("td",null,a(s.description),1),t("td",null,[t("span",{class:y(["status-badge","status-"+s.approved_status])},a(s.approved_status),3)]),t("td",M,[s.approved_status==="pending"?(n(),e("button",{key:0,onClick:k=>f(s,"approved"),class:"btn-approve"}," Approve ",8,R)):d("",!0),s.approved_status==="pending"?(n(),e("button",{key:1,onClick:k=>f(s,"rejected"),class:"btn-reject"}," Reject ",8,P)):d("",!0)])],2))),128))])]),m.value?(n(),e("div",$,[t("button",{onClick:h,class:"px-8 py-3 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-full shadow-lg hover:from-blue-700 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:c(r).loading},[c(r).loading?(n(),e("span",H,o[2]||(o[2]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Loading... ")]))):(n(),e("span",U,[o[3]||(o[3]=g(" Load More ")),z(i,{icon:"chevron-down",class:"ml-2"})]))],8,E)])):d("",!0)])])}}},Q=w(G,[["__scopeId","data-v-b4485d94"]]);export{Q as default};
