import{l as k,F as C}from"./index.es-BAU1JJ28.js";import{b as S}from"./index-Dj4gJ788.js";import{u as L,a as D,s as f,x as y,r as N,B,c as a,b as t,h as V,i as u,p as w,F as I,d as M,o as i,t as r,k as R,m as A}from"./index-Di9soyUq.js";import{u as F}from"./quizStore-BJgtOPsZ.js";import{u as $}from"./mainStore-DVbbYYqd.js";import{f as p,a as E}from"./fromUnixTime-BrNBFJ5H.js";import"./differenceInSeconds-DnHR6_Gw.js";const T={class:"flex flex-col min-h-screen bg-gray-100"},U={class:"w-full overflow-x-auto rounded-lg shadow-sm"},Q={class:"min-w-full divide-y divide-gray-200"},j={class:"bg-white divide-y divide-gray-200"},H={key:0,class:"hover:bg-gray-50"},O={class:"hover:bg-gray-50"},P={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},G={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},J={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},K={class:"px-4 py-4 whitespace-nowrap"},W={class:"mb-2"},X=["onClick"],Y=["onClick"],Z={key:2,class:"text-blue-500 font-medium"},tt={key:0,class:"py-8 text-center text-gray-500"},ut={__name:"MyContests",setup(et){k.add(S);const d=A();L();const n=F(),g=D(),m=$();f(g);const{responses:_,loading:st}=f(n);f(m),y(()=>{n.getUserResponses()});const h=N(new Date);y(()=>{const o=setInterval(()=>{h.value=new Date},6e4);B(()=>{clearInterval(o)})});function c(o,s,e){const x=new Date,l=typeof o=="number"?p(o):new Date(o);typeof s=="number"?p(s):new Date(s);const q=typeof s=="number"?p(e):new Date(e);return x>=q?{isLive:!1,text:"Show Result"}:x>=l?{isLive:!0,text:"LIVE"}:{isLive:!1,text:E(l)+" left"}}const v=async(o,s)=>{await m.fetchCurrentContest(o),m.getPrizeContents(s),d.push("/quiz/variant/details")},z=o=>{n.getLeaderboard(o),d.push("/quiz/leaderboard")},b=()=>{d.back()};return(o,s)=>(i(),a("div",T,[t("div",{onClick:s[0]||(s[0]=e=>b()),class:"bg-orange-500 text-white p-3 flex items-center"},[V(u(C),{icon:"arrow-left",class:"mr-2"}),s[1]||(s[1]=t("span",{class:"font-medium"},"My Contests",-1))]),t("div",U,[t("table",Q,[s[4]||(s[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Node ID"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quiz Name"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Score"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),t("tbody",j,[u(n).loading?(i(),a("tr",H,s[2]||(s[2]=[t("td",{colspan:"4",class:"px-4 py-8 text-center"},[t("div",{class:"flex justify-center items-center space-x-2"},[t("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("span",{class:"text-sm text-gray-600"},"Loading quiz responses...")])],-1)]))):w("",!0),(i(!0),a(I,null,M(u(_),(e,x)=>(i(),a("tr",O,[t("td",P,r(e.node_id),1),t("td",G,r(e.quiz.title),1),t("td",J,r(e.score),1),t("td",K,[t("div",W,[c(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).isLive?(i(),a("p",{key:0,onClick:l=>v(e.node_id,e.quiz_variant_id),class:"text-red-500 font-bold flex items-center"},s[3]||(s[3]=[t("span",{class:"inline-block h-2 w-2 rounded-full bg-red-500 mr-2"},null,-1),R(" LIVE ")]),8,X)):c(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text==="Show Result"?(i(),a("p",{key:1,onClick:l=>z(e.node_id),class:"text-blue-500 font-medium"},r(c(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text),9,Y)):(i(),a("p",Z,r(c(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text),1))])])]))),256))])]),u(_).length===0?(i(),a("div",tt," No data available. ")):w("",!0)])]))}};export{ut as default};
