import{D as L,r as t,m as z,u as M,a as k,s as A,E as g}from"./index-Cbp-QEoN.js";import{u as E}from"./quizStore-Cj6vFRjU.js";const R=L("lifeline",()=>{const a=t(!1),c=t(null),f=z(),m=M(),v=t(!0),h=t(!0),y=t(!0),n=t([]),_=k(),q=E(),{question:d}=A(q);async function S(u){var i,r,o,s,l,p;try{a.value=!0,c.value=null;const e=await g.post("/lifeline/use",u);if(e.data.data.lifeline_type=="skip_question")(i=e.data.data)!=null&&i.flag&&((r=e.data.data)==null?void 0:r.is_nextQuestion)===!1?(console.log("hit inside skip lifeline"),m.success(e.data.data.message),f.push("/quiz/play/finished")):d.value={...e.data.data};else if(e.data.data.lifeline_type=="revive_game"){if((o=e.data.data)!=null&&o.flag&&((s=e.data.data)==null?void 0:s.is_nextQuestion)===!1)return console.log("hit inside revive"),f.push("/quiz/play/finished"),{success:!1,message:e.data.data.message};d.value={...e.data.data}}else n.value=e.data.data.options_to_remove,console.log("fiftyFifty: ",n.value);return a.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return a.value=!1,console.error("Error using Lifeline:",e),{success:!1,message:((p=(l=e.response)==null?void 0:l.data)==null?void 0:p.message)||"An unexpected error occurred"}}}async function x(u,i){var r,o;try{a.value=!0;const s=await g.post("/lifeline/purchase",{lifeline_id:u,quantity:i});return _.fetchUser(),a.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return a.value=!1,console.error("Error Purchasing Lifeline:",s),{success:!1,message:((o=(r=s.response)==null?void 0:r.data)==null?void 0:o.message)||"An unexpected error occurred"}}}return{useLifeline:S,error:c,loading:a,removedOption:n,skip:v,revive:h,fiftyFifty:y,purchaseLifeline:x}});export{R as u};
