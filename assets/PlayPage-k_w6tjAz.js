import{u as V}from"./lifelineStore-DmFlr5nX.js";import{u as H}from"./mainStore-DR85vQDd.js";import{u as N}from"./quizStore-B3cvY6Il.js";import{u as P,s as w,r as _,y as $,C as I,x as R,B as D,c as b,b as e,k as q,t as o,i as s,l as E,n as g,F as O,d as U,o as y,m as G,A as J}from"./index-BuZseQdK.js";const K={class:"min-h-screen bg-gradient-to-b from-rose-300 to-rose-600 p-4 flex flex-col items-center"},W={class:"w-full max-w-md mb-8 mt-24"},X={class:"flex justify-between mb-2"},Y={class:"bg-amber-400 flex items-center justify-center px-4 py-2 rounded-full"},Z={class:"text-black font-bold flex items-center"},ee={class:"bg-rose-500 flex items-center justify-center px-4 py-2 rounded-full"},te={class:"text-white font-bold flex items-center"},se={class:"bg-gray-300 rounded-full h-4"},oe={class:"w-full max-w-md mb-4 flex justify-center space-x-4"},le=["disabled"],ne={class:"text-sm"},ie=["disabled"],ae={class:"text-sm ml-1"},re={class:"bg-white rounded-3xl p-6 w-full max-w-md shadow-lg"},ue={class:"flex justify-between items-center mb-4"},de={class:"text-gray-800 text-xl font-bold"},ce={class:"flex items-center text-purple-600"},fe={class:"text-xl font-bold"},ve={class:"text-4xl font-bold text-gray-800 mb-8"},me={class:"space-y-4"},pe=["disabled","onClick"],ye={__name:"PlayPage",setup(xe){const z=G(),k=P(),f=N(),M=V(),B=H(),{question:l}=w(f),{contest:r}=w(B),{removedOption:u,skip:v,revive:S,fiftyFifty:m}=w(M),d=J("lifeline"),i=_(r.value.quiz_timer||30);let a=null;const p=_(!1),x=_(r.value.totalQuestion),Q=$(()=>l.value.id/x.value*100),h=()=>{clearInterval(a),i.value=r.value.quiz_timer,a=setInterval(()=>{i.value>0&&!p.value?i.value--:i.value===0&&(clearInterval(a),A())},1e3)},T=()=>{p.value=!0},L=()=>{p.value=!1},A=async()=>{await f.nextQuestion(null),z.push("/quiz/play/failed")},F=async n=>{clearInterval(a),u.value=[];const t=await f.nextQuestion(n);t.success||(k.error(t.message),z.push("/quiz/play/failed")),h()};I(l,()=>{h()},{deep:!0});const C=async n=>{T(),u.value=[];const t=await M.useLifeline({lifeline_id:n,node_id:r.value.node_id,question_id:l.value.id});t.success?n==1?m.value=!1:n==2?v.value=!1:n==3&&(S.value=!1):k.error(t.message),L()};return R(()=>{h()}),D(()=>{clearInterval(a)}),(n,t)=>(y(),b("div",K,[e("div",W,[e("div",X,[e("div",Y,[e("span",Z,[t[2]||(t[2]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5 3a2 2 0 012-2h6a2 2 0 012 2v1h2a2 2 0 012 2v11a2 2 0 01-2 2H3a2 2 0 01-2-2V6a2 2 0 012-2h2V3zm6 0H9v1h2V3z","clip-rule":"evenodd"})],-1)),q(" "+o(s(l).id)+" / "+o(x.value),1)])]),e("div",ee,[e("span",te,[t[3]||(t[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})],-1)),q(" "+o(s(l).participated),1)])])]),e("div",se,[e("div",{class:"bg-white rounded-full h-4",style:E({width:Q.value+"%"})},null,4)])]),e("div",oe,[e("button",{class:g(["bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full flex items-center justify-center",{"opacity-50 cursor-not-allowed":!s(m)}]),onClick:t[0]||(t[0]=c=>C(s(d).fiftyFifty.id)),disabled:!s(m)},[e("span",ne,o(s(d).fiftyFifty.alias),1)],10,le),e("button",{class:g(["bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full flex items-center justify-center",{"opacity-50 cursor-not-allowed":!s(v)}]),onClick:t[1]||(t[1]=c=>C(s(d).skip.id)),disabled:!s(v)},[t[4]||(t[4]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})],-1)),e("span",ae,o(s(d).skip.alias),1)],10,ie)]),e("div",re,[e("div",ue,[e("h2",de,"Question "+o(s(l).id)+" of "+o(x.value),1),e("div",ce,[t[5]||(t[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",fe,o(i.value),1)])]),e("h1",ve,o(s(l).id)+". "+o(s(l).question),1),(y(!0),b(O,null,U(s(l).options,(c,j)=>(y(),b("div",me,[e("button",{class:g(["w-full py-4 px-6 border-2 border-rose-400 rounded-full text-rose-500 font-bold text-2xl hover:bg-rose-50 focus:outline-none focus:ring-2 focus:ring-rose-300",{"opacity-50 cursor-not-allowed":s(u)[j]!==void 0}]),disabled:s(u)[j]!==void 0,onClick:he=>F(c.id)},o(c.option),11,pe)]))),256))])]))}};export{ye as default};
