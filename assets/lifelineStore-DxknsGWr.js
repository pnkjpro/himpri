import{L as A,r as i,A as q,l as x,u as M,a as z,s as c,I as R}from"./index-C0AflpkF.js";import{u as w}from"./mainStore-R-IA8lOE.js";import{u as P}from"./quizStore-BBNaM-CG.js";const T=A("lifeline",()=>{const a=i(!1),d=i(null);i([]);const p=q("config"),g=x(),m=M(),u=i([]),v=w(),l=z(),h=P(),{token:y,user:U}=c(l);c(v);const{question:_}=c(h),f=R.create({baseURL:p.API_URL,withCredentials:!0,headers:{Authorization:`Bearer ${y.value}`}});async function L(o){var n,t,r,s;console.log("Lifeline Pinia Data: ",o);try{a.value=!0,d.value=null;const e=await f.post("/lifeline/use",o);return console.log("lifeline_type pinia: ",e.data.data.lifeline_type),e.data.data.lifeline_type=="skip_question"||e.data.data.lifeline_type=="revive_game"?(n=e.data.data)!=null&&n.flag&&((t=e.data.data)==null?void 0:t.is_nextQuestion)===!1?(m.success(e.data.data.message),g.push("/quiz/play/finished")):_.value={...e.data.data}:(u.value=e.data.data.options_to_remove,console.log("fiftyFifty: ",u.value)),a.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return a.value=!1,console.error("Error using Lifeline:",e),{success:!1,message:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"An unexpected error occurred"}}}async function S(o,n){var t,r;try{a.value=!0;const s=await f.post("/lifeline/purchase",{lifeline_id:o,quantity:n});return l.fetchUser(),a.value=!1,{success:s.data.success,message:s.data.message}}catch(s){return a.value=!1,console.error("Error Purchasing Lifeline:",s),{success:!1,message:((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"An unexpected error occurred"}}}return{useLifeline:L,removedOption:u,purchaseLifeline:S}});export{T as u};
