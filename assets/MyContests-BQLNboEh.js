import{l as B,F as b}from"./index.es-c_pi2C2P.js";import{b as A}from"./index-DHaoE_mB.js";import{u as D,r as p,a as I,s as g,y as k,A as R,c as a,b as t,h as q,i as r,p as y,F,d as $,k as _,o as i,t as l,m as j}from"./index-ChV2lZDu.js";import{u as E}from"./quizStore-JpOPdV5e.js";import{u as U}from"./mainStore-CniO3qVg.js";import{f as h,a as H}from"./fromUnixTime-DJExpFBG.js";import"./normalizeDates-D28e74vf.js";import"./en-US-ClfMaaVW.js";import"./differenceInSeconds-DCCrcfcw.js";const Q={class:"flex flex-col min-h-screen bg-gray-100"},O={class:"w-full overflow-x-auto rounded-lg shadow-sm"},P={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},J={key:0,class:"hover:bg-gray-50"},K={class:"hover:bg-gray-50"},W={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},X={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},Y={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},Z={class:"px-4 py-4 whitespace-nowrap"},tt={class:"mb-2"},et=["onClick"],st=["onClick"],ot={key:2,class:"text-blue-500 font-medium"},at={key:0,class:"py-8 text-center text-gray-500"},it={key:1,class:"my-4 text-center"},rt=["disabled"],nt={key:0,class:"flex items-center justify-center"},lt={key:1,class:"flex items-center justify-center"},wt={__name:"MyContests",setup(ct){B.add(A);const u=j(),C=D(),m=p(1),w=p(!0),n=E(),L=I(),f=U();g(L);const{responses:v,loading:dt}=g(n);g(f),k(()=>{z()});const z=async()=>{const o=await n.getUserResponses(m.value);o.success?o.pagination?m.value=m.value+1:w.value=!1:C.error("failed to fetch my constests")},S=p(new Date);k(()=>{const o=setInterval(()=>{S.value=new Date},6e4);R(()=>{clearInterval(o)})});function c(o,s,e){const x=new Date,d=h(Number(o));h(Number(s));const V=h(Number(e));return x>=V?{isLive:!1,text:"Show Result"}:x>=d?{isLive:!0,text:"LIVE"}:{isLive:!1,text:H(d)+" left"}}const N=async(o,s)=>{await f.fetchCurrentContest(o),f.getPrizeContents(s),u.push("/quiz/variant/details")},T=o=>{n.getLeaderboard(o),u.push("/quiz/leaderboard")},M=()=>{u.back()};return(o,s)=>(i(),a("div",Q,[t("div",{onClick:s[0]||(s[0]=e=>M()),class:"bg-orange-500 text-white p-3 flex items-center"},[q(r(b),{icon:"arrow-left",class:"mr-2"}),s[1]||(s[1]=t("span",{class:"font-medium"},"My Contests",-1))]),t("div",O,[t("table",P,[s[4]||(s[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Node ID"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quiz Name"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Score"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),t("tbody",G,[r(n).loading?(i(),a("tr",J,s[2]||(s[2]=[t("td",{colspan:"4",class:"px-4 py-8 text-center"},[t("div",{class:"flex justify-center items-center space-x-2"},[t("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("span",{class:"text-sm text-gray-600"},"Loading quiz responses...")])],-1)]))):y("",!0),(i(!0),a(F,null,$(r(v),(e,x)=>(i(),a("tr",K,[t("td",W,l(e.node_id),1),t("td",X,l(e.quiz.title),1),t("td",Y,l(e.score),1),t("td",Z,[t("div",tt,[c(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).isLive?(i(),a("p",{key:0,onClick:d=>N(e.node_id,e.quiz_variant_id),class:"text-red-500 font-bold flex items-center"},s[3]||(s[3]=[t("span",{class:"inline-block h-2 w-2 rounded-full bg-red-500 mr-2"},null,-1),_(" LIVE ")]),8,et)):c(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text==="Show Result"?(i(),a("p",{key:1,onClick:d=>T(e.node_id),class:"text-blue-500 font-medium"},l(c(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text),9,st)):(i(),a("p",ot,l(c(e.quiz.start_time,e.quiz.end_time,e.quiz.quiz_over_at).text),1))])])]))),256))])]),r(v).length===0?(i(),a("div",at," No data available. ")):y("",!0),w.value?(i(),a("div",it,[t("button",{onClick:z,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:r(n).loading},[r(n).loading?(i(),a("span",nt,s[5]||(s[5]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),_(" Loading... ")]))):(i(),a("span",lt,[s[6]||(s[6]=_(" Load More ")),q(r(b),{icon:"chevron-down",class:"ml-2"})]))],8,rt)])):y("",!0)])]))}};export{wt as default};
