import{u as R,a as F,s as C,B as M,y as $,r as T,c as x,b as e,h as u,i as t,t as o,f as j,C as N,v as z,k as H,o as v,m as Q,D as U}from"./index-Hxr7AJ_R.js";import{u as E}from"./mainStore-Df_xSuYx.js";import{u as G}from"./lifelineStore-DYkyFCMh.js";import{u as I}from"./transactionStore-DdomOFFJ.js";import{l as Y,F as c}from"./index.es-DuTgKZOs.js";import{b as J,g as K,h as O,i as W,j as X}from"./index-BeD0zzHm.js";import"./quizStore-p-DbtzWM.js";const Z={class:"flex flex-col min-h-screen bg-gray-100"},ee={class:"ml-auto flex items-center"},se={class:"bg-white p-4 mb-2 shadow-sm"},te={class:"flex justify-between items-center"},oe={class:"text-xl font-bold"},ie={class:"p-4"},le={class:"bg-white rounded-lg p-4 shadow-sm mb-3 flex items-center"},ne={class:"bg-blue-100 h-12 w-12 rounded-full flex items-center justify-center mr-3"},ae={class:"flex-1"},re={class:"mt-1.5 flex items-center"},de={class:"text-xs bg-gray-200 text-gray-700 px-2 py-0.5 rounded"},ue={class:"ml-3 text-xs text-green-600 font-medium"},ce={class:"bg-white rounded-lg p-4 shadow-sm mb-3 flex items-center"},fe={class:"bg-purple-100 h-12 w-12 rounded-full flex items-center justify-center mr-3"},me={class:"flex-1"},pe={class:"mt-1.5 flex items-center"},xe={class:"text-xs bg-gray-200 text-gray-700 px-2 py-0.5 rounded"},ve={class:"ml-3 text-xs text-green-600 font-medium"},ge={class:"bg-white rounded-lg p-4 shadow-sm mb-5 flex items-center"},ye={class:"bg-yellow-100 h-12 w-12 rounded-full flex items-center justify-center mr-3"},be={class:"flex-1"},he={class:"mt-1.5 flex items-center"},we={class:"text-xs bg-gray-200 text-gray-700 px-2 py-0.5 rounded"},_e={class:"ml-3 text-xs text-green-600 font-medium"},ke={class:"bg-white rounded-lg p-4 shadow-sm"},Le={class:"mb-4"},Se={value:"1"},Ae={value:"2"},Ce={value:"3"},Me={class:"mb-4"},Te=["disabled"],je={key:0,class:"flex items-center justify-center"},Be={key:1},ze={__name:"MyLifeline",setup(qe){Y.add(J,K,O,W,X);const g=Q(),f=R();U("lifeline"),E();const B=F(),n=G();I();const{user:m}=C(B),{lifelineDetails:l}=C(n),q=M(()=>m.value.lifelines||0),V=async()=>{if(!a.value||r.value>0){const i=await n.purchaseLifeline(a.value,r.value);i.success?f.success(i.message):f.error(i.message)}else f.error("Please enter valid field!");a.value="",r.value=1},D=()=>{g.back()};$(()=>{n.fetchLifeline()});const P=i=>{g.push(`/${i}`)},p=M(()=>q.value.reduce((i,s)=>(i[s.lifeline_id]=s,i),{})),a=T(""),r=T(1);return(i,s)=>{var y,b,h,w,_,k,L,S,A;return v(),x("div",Z,[e("div",{onClick:s[0]||(s[0]=d=>D()),class:"bg-orange-500 text-white p-3 flex items-center"},[u(t(c),{icon:"arrow-left",class:"mr-2"}),s[4]||(s[4]=e("span",{class:"font-medium"},"My Lifelines",-1)),e("div",ee,[u(t(c),{icon:"coins",class:"mr-1"}),e("span",null,"₹ "+o(t(m).funds),1)])]),e("div",se,[e("div",te,[e("div",null,[s[5]||(s[5]=e("div",{class:"text-sm text-gray-600"},"Available Balance",-1)),e("div",oe,"₹ "+o(t(m).funds),1)]),e("button",{onClick:s[1]||(s[1]=d=>P("dashboard/funds")),class:"bg-orange-500 text-white px-4 py-1.5 rounded-lg text-sm font-medium"}," Add Funds ")])]),e("div",ie,[s[17]||(s[17]=e("div",{class:"text-lg font-bold mb-4"},"Your Lifelines",-1)),e("div",le,[e("div",ne,[u(t(c),{icon:"divide",class:"text-blue-600 text-lg"})]),e("div",ae,[s[6]||(s[6]=e("div",{class:"font-medium"},"50:50 Lifeline",-1)),s[7]||(s[7]=e("div",{class:"text-sm text-gray-600"},"Removes two incorrect options",-1)),e("div",re,[e("span",de," ₹ "+o(((y=t(l)[0])==null?void 0:y.cost)||"...")+" each ",1),e("span",ue," Available: "+o(((b=p.value[1])==null?void 0:b.quantity)||0),1)])])]),e("div",ce,[e("div",fe,[u(t(c),{icon:"forward-step",class:"text-purple-600 text-lg"})]),e("div",me,[s[8]||(s[8]=e("div",{class:"font-medium"},"Skip Lifeline",-1)),s[9]||(s[9]=e("div",{class:"text-sm text-gray-600"},"Skip the current question without penalty",-1)),e("div",pe,[e("span",xe," ₹ "+o(((h=t(l)[1])==null?void 0:h.cost)||"...")+" each ",1),e("span",ve," Available: "+o(((w=p.value[2])==null?void 0:w.quantity)||0),1)])])]),e("div",ge,[e("div",ye,[u(t(c),{icon:"clock",class:"text-yellow-600 text-lg"})]),e("div",be,[s[10]||(s[10]=e("div",{class:"font-medium"},"Revive Lifeline",-1)),s[11]||(s[11]=e("div",{class:"text-sm text-gray-600"},"This lifeline continues your game when failed",-1)),e("div",he,[e("span",we," ₹ "+o(((_=t(l)[2])==null?void 0:_.cost)||"...")+" each ",1),e("span",_e," Available: "+o(((k=p.value[3])==null?void 0:k.quantity)||0),1)])])]),e("div",ke,[s[16]||(s[16]=e("div",{class:"font-medium mb-3"},"Purchase Lifelines",-1)),e("div",Le,[s[13]||(s[13]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"lifeline-type"}," Select Lifeline ",-1)),j(e("select",{id:"lifeline-type","onUpdate:modelValue":s[2]||(s[2]=d=>a.value=d),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"},[s[12]||(s[12]=e("option",{value:""},"Select a lifeline to purchase",-1)),e("option",Se,"50:50 Lifeline (₹ "+o(((L=t(l)[0])==null?void 0:L.cost)||"...")+")",1),e("option",Ae,"Skip Lifeline (₹ "+o(((S=t(l)[1])==null?void 0:S.cost)||"...")+")",1),e("option",Ce,"Revive Game (₹ "+o(((A=t(l)[2])==null?void 0:A.cost)||"...")+")",1)],512),[[N,a.value]])]),e("div",Me,[s[14]||(s[14]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"quantity"}," Quantity ",-1)),j(e("input",{type:"number",id:"quantity","onUpdate:modelValue":s[3]||(s[3]=d=>r.value=d),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",min:"1",max:"10",placeholder:"How many do you want to purchase?"},null,512),[[z,r.value]])]),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:V,disabled:t(n).loading},[t(n).loading?(v(),x("div",je,s[15]||(s[15]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),H(" Purchasing Lifeline... ")]))):(v(),x("span",Be,"Purchase"))],8,Te)])])])}}};export{ze as default};
