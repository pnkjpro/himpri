import{u as B,a as M,s as T,y as P,r as k,c as d,b as e,h as u,i as l,t as i,f as _,z as V,v as q,p as x,k as g,A as F,o as a,B as R,m as D,C as N,D as $}from"./index-eDpET8fp.js";import{u as z}from"./mainStore-DS-nKbPa.js";import{u as Q}from"./lifelineStore-ASQSoa9w.js";import{u as H}from"./transactionStore-DhAyZg49.js";import{l as U,F as m}from"./index.es-v14MyhAr.js";import{b as E,g as G,h as I,i as Y,j as J}from"./index-Dj4gJ788.js";import"./quizStore-s-yZUfmV.js";const K={class:"flex flex-col min-h-screen bg-gray-100"},O={class:"ml-auto flex items-center"},W={class:"bg-white p-4 mb-2 shadow-sm"},X={class:"flex justify-between items-center"},Z={class:"text-xl font-bold"},ee={class:"p-4"},se={class:"bg-white rounded-lg p-4 shadow-sm mb-3 flex items-center"},te={class:"bg-blue-100 h-12 w-12 rounded-full flex items-center justify-center mr-3"},le={class:"flex-1"},ie={class:"mt-1.5 flex items-center"},oe={class:"ml-3 text-xs text-green-600 font-medium"},ne={class:"bg-white rounded-lg p-4 shadow-sm mb-3 flex items-center"},ae={class:"bg-purple-100 h-12 w-12 rounded-full flex items-center justify-center mr-3"},re={class:"flex-1"},de={class:"mt-1.5 flex items-center"},ue={class:"ml-3 text-xs text-green-600 font-medium"},me={class:"bg-white rounded-lg p-4 shadow-sm mb-5 flex items-center"},fe={class:"bg-yellow-100 h-12 w-12 rounded-full flex items-center justify-center mr-3"},ce={class:"flex-1"},pe={class:"mt-1.5 flex items-center"},ve={class:"ml-3 text-xs text-green-600 font-medium"},xe={class:"bg-white rounded-lg p-4 shadow-sm"},ge={class:"mb-4"},be={class:"mb-4"},ye={key:0,class:"mb-4 p-3 bg-gray-100 rounded-lg"},we={class:"flex justify-between text-sm mb-2"},he={class:"flex justify-between text-sm mb-2"},ke={key:1,class:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm"},_e=["disabled"],Le={key:0,class:"flex items-center justify-center"},Se={key:1},qe={__name:"MyLifeline",setup(Ce){U.add(E,G,I,Y,J);const b=D(),f=B();N("lifeline"),z();const L=M(),c=Q();H();const{user:p}=T(L),v=P(()=>p.value.lifelines||0),S=async()=>{if(!o.value||n.value>0){const t=await c.purchaseLifeline(o.value,n.value);t.success?f.success(t.message):f.error(t.message)}else f.error("Please enter valid field!");o.value="",n.value=1},C=()=>{b.back()},A=t=>{b.push(`/${t}`)},o=k(""),n=k(1);return(t,s)=>{var y,w,h;const j=$("router-link");return a(),d("div",K,[e("div",{onClick:s[0]||(s[0]=r=>C()),class:"bg-orange-500 text-white p-3 flex items-center"},[u(l(m),{icon:"arrow-left",class:"mr-2"}),s[4]||(s[4]=e("span",{class:"font-medium"},"My Lifelines",-1)),e("div",O,[u(l(m),{icon:"coins",class:"mr-1"}),e("span",null,"₹ "+i(l(p).funds),1)])]),e("div",W,[e("div",X,[e("div",null,[s[5]||(s[5]=e("div",{class:"text-sm text-gray-600"},"Available Balance",-1)),e("div",Z,"₹ "+i(l(p).funds),1)]),e("button",{onClick:s[1]||(s[1]=r=>A("/dashboard/funds")),class:"bg-orange-500 text-white px-4 py-1.5 rounded-lg text-sm font-medium"}," Add Funds ")])]),e("div",ee,[s[24]||(s[24]=e("div",{class:"text-lg font-bold mb-4"},"Your Lifelines",-1)),e("div",se,[e("div",te,[u(l(m),{icon:"divide",class:"text-blue-600 text-lg"})]),e("div",le,[s[7]||(s[7]=e("div",{class:"font-medium"},"50:50 Lifeline",-1)),s[8]||(s[8]=e("div",{class:"text-sm text-gray-600"},"Removes two incorrect options",-1)),e("div",ie,[s[6]||(s[6]=e("span",{class:"text-xs bg-gray-200 text-gray-700 px-2 py-0.5 rounded"}," ₹ "+i(29)+" each ",-1)),e("span",oe," Available: "+i(((y=v.value[0])==null?void 0:y.quantity)||0),1)])])]),e("div",ne,[e("div",ae,[u(l(m),{icon:"forward-step",class:"text-purple-600 text-lg"})]),e("div",re,[s[10]||(s[10]=e("div",{class:"font-medium"},"Skip Lifeline",-1)),s[11]||(s[11]=e("div",{class:"text-sm text-gray-600"},"Skip the current question without penalty",-1)),e("div",de,[s[9]||(s[9]=e("span",{class:"text-xs bg-gray-200 text-gray-700 px-2 py-0.5 rounded"}," ₹ 49 each ",-1)),e("span",ue," Available: "+i(((w=v.value[1])==null?void 0:w.quantity)||0),1)])])]),e("div",me,[e("div",fe,[u(l(m),{icon:"clock",class:"text-yellow-600 text-lg"})]),e("div",ce,[s[13]||(s[13]=e("div",{class:"font-medium"},"Revive Lifeline",-1)),s[14]||(s[14]=e("div",{class:"text-sm text-gray-600"},"This lifeline continues your game when failed",-1)),e("div",pe,[s[12]||(s[12]=e("span",{class:"text-xs bg-gray-200 text-gray-700 px-2 py-0.5 rounded"}," ₹ 99 each ",-1)),e("span",ve," Available: "+i(((h=v.value[2])==null?void 0:h.quantity)||0),1)])])]),e("div",xe,[s[23]||(s[23]=e("div",{class:"font-medium mb-3"},"Purchase Lifelines",-1)),e("div",ge,[s[16]||(s[16]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"lifeline-type"}," Select Lifeline ",-1)),_(e("select",{id:"lifeline-type","onUpdate:modelValue":s[2]||(s[2]=r=>o.value=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"},s[15]||(s[15]=[e("option",{value:""},"Select a lifeline to purchase",-1),e("option",{value:"1"},"50:50 Lifeline (₹ 29)",-1),e("option",{value:"2"},"Skip Lifeline (₹ 49)",-1),e("option",{value:"3"},"Revive Game (₹ 99)",-1)]),512),[[V,o.value]])]),e("div",be,[s[17]||(s[17]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2",for:"quantity"}," Quantity ",-1)),_(e("input",{type:"number",id:"quantity","onUpdate:modelValue":s[3]||(s[3]=r=>n.value=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",min:"1",max:"10",placeholder:"How many do you want to purchase?"},null,512),[[q,n.value]])]),o.value&&n.value>0?(a(),d("div",ye,[e("div",we,[s[18]||(s[18]=e("span",null,"Price per lifeline:",-1)),e("span",null,"₹ "+i(t.getLifelinePrice(o.value)),1)]),e("div",he,[s[19]||(s[19]=e("span",null,"Quantity:",-1)),e("span",null,"× "+i(n.value),1)]),s[20]||(s[20]=e("div",{class:"border-t border-gray-300 my-2"},null,-1))])):x("",!0),t.errorMessage?(a(),d("div",ke,[g(i(t.errorMessage)+" ",1),t.insufficientFunds?(a(),F(j,{key:0,to:"/add-fund",class:"text-blue-600 underline ml-1"},{default:R(()=>s[21]||(s[21]=[g(" Add funds to continue ")])),_:1})):x("",!0)])):x("",!0),e("button",{class:"bg-orange-500 text-white py-2 px-6 rounded-lg font-medium w-full",onClick:S,disabled:l(c).loading},[l(c).loading?(a(),d("div",Le,s[22]||(s[22]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Purchasing Lifeline... ")]))):(a(),d("span",Se,"Purchase"))],8,_e)])])])}}};export{qe as default};
