import{u as S}from"./adminStore-Cn6-iULI.js";import{s as j,r as _,B as k,c as d,i as l,b as t,t as o,F as p,d as g,k as f,p as m,o as r,n as x,q as T,m as M}from"./index-CPosEMXC.js";import{u as v}from"./helperStore-Kh_Dm-Zw.js";import"./en-US-ClfMaaVW.js";import"./differenceInCalendarDays-BuUWmaRV.js";import"./normalizeDates-MJlMPps6.js";const U={class:"container mx-auto px-4 py-8"},P={key:0,class:"flex justify-center items-center h-64"},R={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},$={key:2},I={class:"bg-white shadow rounded-lg p-6 mb-6"},N={class:"flex flex-col md:flex-row justify-between items-start md:items-center"},V={class:"text-2xl font-bold text-gray-800"},E={class:"text-gray-600 mt-1"},F={class:"mt-4 md:mt-0"},O={class:"bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full"},H={class:"bg-blue-100 text-blue-800 text-sm font-medium ml-2 px-3 py-1 rounded-full"},W={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},G={class:"bg-white shadow rounded-lg p-6"},J={class:"grid grid-cols-2 gap-4"},K={class:"text-gray-900"},X={class:"text-gray-900"},Y={class:"text-gray-900"},Z={class:"text-gray-900"},tt={class:"text-gray-900"},et={class:"text-gray-900"},st={class:"bg-white shadow rounded-lg p-6"},ot={class:"space-y-3"},it={class:"text-gray-900"},nt={class:"text-gray-900"},lt={class:"text-gray-900"},dt={class:"text-gray-900"},rt={class:"bg-white shadow rounded-lg p-6"},at={class:"space-y-3"},ut={class:"text-gray-900"},ct={class:"text-gray-900"},mt={class:"text-gray-900"},xt={class:"bg-white shadow rounded-lg p-6 mb-6"},pt={class:"flex justify-between items-start"},gt={class:"text-lg font-medium"},_t={class:"bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded"},ft={class:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},vt={class:"flex items-center"},yt={key:0,class:"ml-2 text-xs text-green-600 font-medium"},bt={class:"bg-white shadow rounded-lg p-6"},ht={class:"overflow-x-auto"},wt={class:"min-w-full divide-y divide-gray-200"},kt={class:"bg-white divide-y divide-gray-200"},zt={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"text-sm font-medium text-gray-900"},Qt={class:"text-sm text-gray-500"},At={class:"px-6 py-4 whitespace-nowrap"},qt={class:"px-6 py-4 whitespace-nowrap"},Bt={class:"text-sm text-gray-900"},Dt={key:0,class:"text-xs text-gray-500"},Lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},St={key:0},jt={key:1},Tt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Mt=["onClick","disabled"],Ut={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},Pt={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto"},Rt={class:"p-6 border-b"},$t={class:"flex justify-between items-center"},It={class:"text-xl font-semibold text-gray-900"},Nt={class:"p-6"},Vt={class:"mb-4"},Et={class:"mb-4"},Ft={key:0,class:"space-y-4"},Ot={class:"flex items-start justify-between"},Ht={class:"flex-1"},Wt={class:"font-medium"},Gt={key:0,class:"mt-2 mb-2"},Jt={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Kt={class:"mt-2"},Xt={key:1,class:"mt-1 text-red-600"},Yt={key:0,class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},Zt={key:1,class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},te={key:1,class:"text-center p-6 text-gray-500"},re={__name:"QuizShow",setup(ee){const y=S(),{usersByquiz:i}=j(y);_(!0);const b=_(null);T();const z=M(),c=_(null),C=k(()=>{var n;return((n=i.value.user_responses)==null?void 0:n.filter(e=>e.status==="completed").length)||0});k(()=>{if(!i.value.user_responses||i.value.user_responses.length===0)return 0;const n=i.value.user_responses.filter(s=>s.status==="completed");return n.length===0?0:n.reduce((s,a)=>s+a.score,0)/n.length});function h(n,e){if(!n||!e||n===0||e===0)return"--";const s=e-n,a=Math.floor(s/60),u=s%60;return`${a}m ${u}s`}function Q(n){if(!n||n===0)return"--";const e=Math.floor(n/60),s=n%60;return`${e}m ${s}s`}function w(n,e){return e?Math.round(n/e*100):0}function A(n){n.status==="completed"&&(c.value=n)}function q(n){const e=i.value.quizContents.find(s=>s.id===n);return e?e.question:"Unknown question"}function B(n,e){const s=i.value.quizContents.find(u=>u.id===n);if(!s)return"Unknown option";const a=s.options.find(u=>u.id===e);return a?a.option:"Unknown option"}function D(n){const e=i.value.quizContents.find(a=>a.id===n);if(!e)return"Unknown";const s=e.options.find(a=>a.id===e.correctAnswerId);return s?s.option:"Unknown"}const L=()=>{z.back()};return(n,e)=>(r(),d("div",U,[l(y).loading?(r(),d("div",P,e[2]||(e[2]=[t("div",{class:"text-center"},[t("div",{class:"spinner-border text-primary mb-3",role:"status"}),t("p",null,"Loading quiz data...")],-1)]))):b.value?(r(),d("div",R,[t("p",null,o(b.value),1)])):(r(),d("div",$,[t("header",I,[t("button",{onClick:e[0]||(e[0]=s=>L()),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 mb-4 py-2 rounded-md flex items-center"},e[3]||(e[3]=[t("span",{class:"mr-2"},"Back To Quiz List",-1)])),t("div",N,[t("div",null,[t("h1",V,o(l(i).title),1),t("p",E,o(l(i).description),1)]),t("div",F,[t("span",O,o(l(i).is_active==1?"Active":"Inactive"),1),t("span",H," Node ID: "+o(l(i).node_id),1)])])]),t("div",W,[t("div",G,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quiz Information",-1)),t("div",J,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-500"},"Entry Fee",-1)),t("p",K,"₹"+o(l(i).entry_fees),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-500"},"Prize Money",-1)),t("p",X,"₹"+o(l(i).prize_money),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-500"},"Questions",-1)),t("p",Y,o(l(i).totalQuestion),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-500"},"Time Per Question",-1)),t("p",Z,o(l(i).quiz_timer)+" seconds",1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-500"},"Participant Limit",-1)),t("p",tt,o(l(i).spot_limit),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-500"},"Winners",-1)),t("p",et,o(l(i).winners),1)])])]),t("div",st,[e[15]||(e[15]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quiz Timing",-1)),t("div",ot,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-500"},"Start Time",-1)),t("p",it,o(l(v)().formatDate(l(i).start_time)),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-500"},"End Time",-1)),t("p",nt,o(l(v)().formatDate(l(i).end_time)),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-500"},"Quiz Over At",-1)),t("p",lt,o(l(v)().formatDate(l(i).quiz_over_at)),1)]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-500"},"Duration",-1)),t("p",dt,o(Q(l(i).totalQuestion*l(i).quiz_timer)),1)])])]),t("div",rt,[e[19]||(e[19]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quiz Statistics",-1)),t("div",at,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Participants",-1)),t("p",ut,o(l(i).user_responses.length),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm font-medium text-gray-500"},"Completed Attempts",-1)),t("p",ct,o(C.value),1)]),t("div",null,[e[18]||(e[18]=t("p",{class:"text-sm font-medium text-gray-500"},"Prize Distribution",-1)),t("p",mt,o(l(i).is_prize_distributed==1?"Completed":"Pending"),1)])])])]),t("div",xt,[e[20]||(e[20]=t("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Quiz Questions",-1)),(r(!0),d(p,null,g(l(i).quizContents,(s,a)=>(r(),d("div",{key:a,class:"mb-6 p-4 border rounded-lg"},[t("div",pt,[t("h3",gt,o(a+1)+". "+o(s.question),1),t("span",_t," ID: "+o(s.id),1)]),t("div",ft,[(r(!0),d(p,null,g(s.options,u=>(r(),d("div",{key:u.id,class:x(["p-2 rounded border",u.id===s.correctAnswerId?"bg-green-50 border-green-200":""])},[t("div",vt,[t("span",{class:x(["h-5 w-5 flex items-center justify-center rounded-full border mr-2",u.id===s.correctAnswerId?"bg-green-500 text-white border-green-500":""])},o(u.id),3),t("span",null,o(u.option),1),u.id===s.correctAnswerId?(r(),d("span",yt," (Correct Answer) ")):m("",!0)])],2))),128))])]))),128))]),t("div",bt,[e[22]||(e[22]=t("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Participant Results",-1)),t("div",ht,[t("table",wt,[e[21]||(e[21]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Score "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Duration ")])],-1)),t("tbody",kt,[(r(!0),d(p,null,g(l(i).user_responses,(s,a)=>(r(),d("tr",{key:a},[t("td",zt,[t("div",null,[t("div",Ct,o(s.user.name),1),t("div",Qt,o(s.user.email),1)])]),t("td",At,[t("span",{class:x(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.status==="completed","bg-yellow-100 text-yellow-800":s.status==="joined"}])},o(s.status),3)]),t("td",qt,[t("div",Bt,o(s.score)+" / "+o(l(i).totalQuestion),1),s.status==="completed"?(r(),d("div",Dt,o(w(s.score,l(i).totalQuestion))+"% ",1)):m("",!0)]),t("td",Lt,[s.started_at>0?(r(),d("div",St,o(h(s.started_at,s.ended_at)),1)):(r(),d("div",jt,"--"))]),t("td",Tt,[t("button",{onClick:u=>A(s),disabled:s.status!=="completed",class:"text-indigo-600 hover:text-indigo-900 disabled:text-gray-400"}," View Answers ",8,Mt)])]))),128))])])])]),c.value?(r(),d("div",Ut,[t("div",Pt,[t("div",Rt,[t("div",$t,[t("h3",It,o(c.value.user.name)+"'s Responses ",1),t("button",{onClick:e[1]||(e[1]=s=>c.value=null),class:"text-gray-400 hover:text-gray-500"},e[23]||(e[23]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),t("div",Nt,[t("div",Vt,[e[24]||(e[24]=t("span",{class:"font-medium"},"Score:",-1)),f(" "+o(c.value.score)+" / "+o(l(i).totalQuestion)+" ("+o(w(c.value.score,l(i).totalQuestion))+"%) ",1)]),t("div",Et,[e[25]||(e[25]=t("span",{class:"font-medium"},"Time Taken:",-1)),f(" "+o(h(c.value.started_at,c.value.ended_at)),1)]),c.value.responseContents?(r(),d("div",Ft,[(r(!0),d(p,null,g(c.value.responseContents,(s,a)=>(r(),d("div",{key:a,class:x(["p-4 border rounded-lg",{"bg-green-50":s.is_correct,"bg-red-50":!s.is_correct}])},[t("div",Ot,[t("div",Ht,[t("h4",Wt," Question "+o(s.question_id)+": "+o(q(s.question_id)),1),s.lifeline_used&&s.lifeline_used&&s.lifeline_used.name?(r(),d("div",Gt,[t("span",Jt,[e[26]||(e[26]=t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z","clip-rule":"evenodd"})],-1)),f(" Lifeline Used: "+o(s.lifeline_used.name),1)])])):m("",!0),t("p",Kt," Selected Answer: "+o(B(s.question_id,s.answer_id)),1),s.is_correct?m("",!0):(r(),d("p",Xt," Correct Answer: "+o(D(s.question_id)),1))]),t("span",{class:x(["inline-flex items-center justify-center h-8 w-8 rounded-full ml-4",{"bg-green-100 text-green-800":s.is_correct,"bg-red-100 text-red-800":!s.is_correct}])},[s.is_correct?(r(),d("svg",Yt,e[27]||(e[27]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(r(),d("svg",Zt,e[28]||(e[28]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])))],2)])],2))),128))])):(r(),d("div",te," No response data available "))])])])):m("",!0)]))]))}};export{re as default};
