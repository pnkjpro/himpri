import{u as C}from"./transactionStore-CIVCfPOx.js";import{l as A,F as f}from"./index.es-Csimy4uK.js";import{b as S}from"./index-BeD0zzHm.js";import{u as z,r as x,a as B,s as g,x as H,c as s,b as e,h as y,i as o,p as u,F as N,d as V,k as h,o as a,t as l,m as D}from"./index-HOv384w_.js";import"./mainStore-KPr6ic9I.js";const M={class:"flex flex-col min-h-screen bg-gray-100"},T={class:"w-full overflow-x-auto rounded-lg shadow-sm"},F={class:"min-w-full divide-y divide-gray-200"},j={class:"bg-white divide-y divide-gray-200"},I={key:0,class:"hover:bg-gray-50"},R={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},U={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},$={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},q={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},E={key:0,class:"py-8 text-center text-gray-500"},Q={key:1,class:"my-4 text-center"},G=["disabled"],J={key:0,class:"flex items-center justify-center"},K={key:1,class:"flex items-center justify-center"},ee={__name:"LifelineHistory",setup(O){A.add(S);const w=D(),v=z(),c=x(1),p=x(!0),r=C(),_=B();g(_);const{lifeline_histories:d}=g(r);H(()=>{m()});const m=async()=>{const n=await r.getLifelineHistories(c.value);n.success?n.pagination?c.value=c.value+1:p.value=!1:v.error("failed to fetch lifeline history")},k=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=()=>{w.back()};return(n,t)=>(a(),s("div",M,[e("div",{onClick:t[0]||(t[0]=i=>b()),class:"bg-orange-500 text-white p-3 flex items-center"},[y(o(f),{icon:"arrow-left",class:"mr-2"}),t[1]||(t[1]=e("span",{class:"font-medium"},"Lifeline History",-1))]),e("div",T,[e("table",F,[t[3]||(t[3]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Lifeline Name"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quiz Applied"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Used At")])],-1)),e("tbody",j,[o(r).loading?(a(),s("tr",I,t[2]||(t[2]=[e("td",{colspan:"4",class:"px-4 py-8 text-center"},[e("div",{class:"flex justify-center items-center space-x-2"},[e("svg",{class:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-sm text-gray-600"},"Loading transactions...")])],-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1),e("td",null,null,-1)]))):u("",!0),(a(!0),s(N,null,V(o(d),(i,L)=>(a(),s("tr",{key:o(d).id,class:"hover:bg-gray-50"},[e("td",R,l(L+1),1),e("td",U,l(i.lifeline_name),1),e("td",$,l(i.applied_quiz_name||""),1),e("td",q,l(k(i.used_at)),1)]))),128))])]),o(d).length===0?(a(),s("div",E," No lifeline history available. ")):u("",!0),p.value?(a(),s("div",Q,[e("button",{onClick:m,class:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-full shadow-lg hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all transform hover:scale-105",disabled:o(r).loading},[o(r).loading?(a(),s("span",J,t[4]||(t[4]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),h(" Loading... ")]))):(a(),s("span",K,[t[5]||(t[5]=h(" Load More ")),y(o(f),{icon:"chevron-down",class:"ml-2"})]))],8,G)])):u("",!0)])]))}};export{ee as default};
