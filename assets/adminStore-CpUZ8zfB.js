import{a4 as $,r as u,a5 as n}from"./index-BHNnW986.js";const N=$("admin",()=>{const o=u(!1),f=u(null),d=u([]),i=u([]),g=u([]),p=u([]),v=u([]),m=u([]),l=u([]);async function h(r){var s,t;try{o.value=!0;const e=await n.post("/admin/category/create",r);return{success:e.data.success,message:e.data.message}}catch(e){return console.error("Error creating category:",e),{success:!1,message:((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred"}}finally{o.value=!1}}async function w(r,s){var t,e;try{o.value=!0;const a=await n.post(`/admin/category/update/${r}`,s);return{success:a.data.success,message:a.data.message}}catch(a){return console.error("Error updating category:",a),{success:!1,message:((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||"An unexpected error occurred"}}finally{o.value=!1}}async function M(r){var s,t;try{o.value=!0;const e=await n.delete(`/admin/category/delete/${r}`);return{success:e.data.success,message:e.data.message}}catch(e){return console.error("Error deleting category:",e),{success:!1,message:((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred"}}finally{o.value=!1}}async function z(r){var s,t;try{o.value=!0;const e=await n.post("/admin/quiz/create",r);return o.value=!0,{success:e.data.success,message:e.data.message}}catch(e){return o.value=!0,console.error("Error using Lifeline:",e),{success:!1,message:((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function E(r=1){var s,t;try{o.value=!0;const e={page:r},a=await n.get("/admin/transaction/list/all",{params:e});return r===1?l.value=[...a.data.data.transactions]:l.value=[...l.value,...a.data.data.transactions],console.log(a.data.data.totalCount>l.value.length),{success:a.data.success,message:a.data.message,pagination:a.data.data.totalCount>l.value.length}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred"}}finally{o.value=!1}}async function A(r,s){var t,e;try{console.log(r),o.value=!0;const a=await n.post("/admin/transaction/approval",{uid:r.user_id,approval_id:r.id,change_approval:s});if(a.data.success){const c={...r,approved_status:s},y=l.value.findIndex(U=>U.id===r.id);y!==-1&&(l.value[y]=c)}return{success:a.data.success,message:a.data.message}}catch(a){return console.error("Error using Lifeline:",a),{success:!1,message:((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||"An unexpected error occurred"}}finally{o.value=!1}}const L=async(r=1)=>{var s,t;o.value=!0,f.value=null;try{const e={page:r},a=await n.get("/admin/list/leaderboards",{params:e});return r===1?d.value=a.data.data.leaderboards:d.value=[...d.value,...a.data.data.leaderboards],{success:a.data.success,message:a.data.message,pagination:a.data.data.totalCount>d.value.length}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred"}}finally{o.value=!1}},x=async r=>{var s,t;o.value=!0,f.value=null;try{const e=await n.post("/admin/show/leaderboard",r);return m.value=e.data.data,{success:e.data.success,message:e.data.message}}catch(e){return console.error("Error using Lifeline:",e),{success:!1,message:((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred"}}finally{o.value=!1}};async function b(r){try{o.value=!0;const s=await n.post("/admin/lifeline/update",r);return{success:s.data.success,message:s.data.message}}catch(s){return console.error("Error updating Lifeline:",s),{success:!1,message:"Error updating Lifeline"}}finally{o.value=!1}}async function C(r){try{o.value=!0;const s=await n.post("/admin/variables/update",r);return{success:s.data.success,message:s.data.message}}catch(s){return console.error("Error updating official notice:",s),{success:!1,message:"Error updating official notice"}}finally{o.value=!1}}const q=()=>{d.value=[],m.value=[],f.value=null},_=async r=>{var s,t;o.value=!0;try{const e=await n.post("/admin/category/update-order",{categories:r});return o.value=!1,e.data}catch(e){return o.value=!1,console.error("Error updating categories order:",e),{success:!1,message:((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to update category order"}}};async function B(r){var s,t;try{o.value=!0,console.log("pinia node id: ",r);const e=await n.get(`/admin/show/quiz/users?node_id=${r}`);return v.value=e.data.data,o.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return o.value=!1,console.error("Error showing users of quiz:",e),{success:!1,message:((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function Q(r){var s,t;try{o.value=!0;const e=await n.get("/admin/show/user/quizzes",{user_id:r});return p.value=e.data.data,o.value=!1,{success:e.data.success,message:e.data.message}}catch(e){return o.value=!1,console.error("Error showing quizzes by user:",e),{success:!1,message:((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function S(r=1){var s,t;try{o.value=!0;const e={page:r},a=await n.get("/admin/user/list",{params:e});return r===1?i.value=[...a.data.data.users]:i.value=[...i.value,...a.data.data.users],o.value=!1,{success:a.data.success,message:a.data.message,pagination:a.data.data.totalCount>i.value.length}}catch(e){return o.value=!1,console.error("Error showing user list:",e),{success:!1,message:((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred"}}}async function T(r=1,s=""){var t,e;try{o.value=!0;const a={page:r};s&&(a.category=s);const c=await n.get("/admin/quiz/list",{params:a});return r===1?g.value=c.data.data.quizzes:g.value=[...g.value,...c.data.data.quizzes],o.value=!1,{success:c.data.success,message:c.data.message,pagination:c.data.data.totalCount>g.value.length}}catch(a){return o.value=!1,console.error("Error showing user list:",a),{success:!1,message:((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||"An unexpected error occurred"}}}return{createCategory:h,updateCategory:w,deleteCategory:M,createQuiz:z,fetchTransactions:E,statusApproval:A,listAdminLeaderboards:L,showAdminLeaderboard:x,resetLeaderboardState:q,updateLifelineCost:b,updateCategorySorting:_,updateOfficialNotice:C,showUsersByQuiz:B,showQuizzesByUser:Q,showUserList:S,showQuizList:T,quizzesByuser:p,usersByquiz:v,userList:i,quizList:g,allTransactions:l,leaderboards:d,currentLeaderboard:m,loading:o}});export{N as u};
